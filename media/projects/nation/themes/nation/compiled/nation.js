!function(t){if("function"==typeof define&&define.amd){var e="[history"+(new Date).getTime()+"]",i=requirejs.onError;t.toString=function(){return e},requirejs.onError=function(t){-1===t.message.indexOf(e)&&i.call(requirejs,t)},define([],t)}t()}(function(){function t(){}function e(t,i,s){var o=/(?:(\w+\:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/;if(null==t||""===t||i)t=i?t:E.href,b&&!s||(t=t.replace(/^[^#]*/,"")||"#",t=E.protocol.replace(/:.*$|$/,":")+"//"+E.host+B.basepath+t.replace(new RegExp("^#[/]?(?:"+B.type+")?"),""));else{var n=e(),r=f.getElementsByTagName("base")[0];!s&&r&&r.getAttribute("href")&&(r.href=r.href,n=e(r.href,null,!0));var a=n._pathname,l=n._protocol;t=""+t,t=/^(?:\w+\:)?\/\//.test(t)?0===t.indexOf("/")?l+t:t:l+"//"+n._host+(0===t.indexOf("/")?t:0===t.indexOf("?")?a+t:0===t.indexOf("#")?a+n._search+t:a.replace(/[^\/]+$/g,"")+t)}U.href=t;var h=o.exec(U.href),c=h[2]+(h[3]?":"+h[3]:""),d=h[4]||"/",p=h[5]||"",u="#"===h[6]?"":h[6]||"",_=d+p+u,m=d.replace(new RegExp("^"+B.basepath,"i"),B.type)+p;return{_href:h[1]+"//"+c+_,_protocol:h[1],_host:c,_hostname:h[2],_port:h[3]||"",_pathname:d,_search:p,_hash:u,_relative:_,_nohash:m,_special:m+u}}function i(){var t;try{t=y.sessionStorage,t.setItem(x+"t","1"),t.removeItem(x+"t")}catch(e){t={getItem:function(t){var e=f.cookie.split(t+"=");return e.length>1&&e.pop().split(";").shift()||"null"},setItem:function(t,e){var i={};(i[E.href]=O.state)&&(f.cookie=t+"="+T.stringify(i))}}}try{z=T.parse(t.getItem(x))||{}}catch(e){z={}}H(w+"unload",function(){t.setItem(x,T.stringify(z))},!1)}function s(e,i,s,o){var n=0;s||(s={set:t},n=1);var r=!s.set,a=!s.get,l={configurable:!0,set:function(){r=1},get:function(){a=1}};try{P(e,i,l),e[i]=e[i],P(e,i,s)}catch(h){}if(!(r&&a||(e.__defineGetter__&&(e.__defineGetter__(i,l.get),e.__defineSetter__(i,l.set),e[i]=e[i],s.get&&e.__defineGetter__(i,s.get),s.set&&e.__defineSetter__(i,s.set)),r&&a))){if(n)return!1;if(e===y){try{var c=e[i];e[i]=null}catch(h){}if("execScript"in y)y.execScript("Public "+i,"VBScript"),y.execScript("var "+i+";","JavaScript");else try{P(e,i,{value:t})}catch(h){"onpopstate"===i&&(H("popstate",s=function(){k("popstate",s,!1);var t=e.onpopstate;e.onpopstate=null,setTimeout(function(){e.onpopstate=t},1)},!1),Y=0)}e[i]=c}else try{try{var d=N.create(e);P(N.getPrototypeOf(d)===e?d:e,i,s);for(var p in e)"function"==typeof e[p]&&(d[p]=e[p].bind(e));try{o.call(d,d,e)}catch(h){}e=d}catch(h){P(e.constructor.prototype,i,s)}}catch(h){return!1}}return e}function o(t,e,i){return i=i||{},t=t===Z?E:t,i.set=i.set||function(i){t[e]=i},i.get=i.get||function(){return t[e]},i}function n(t,e,i){t in G?G[t].push(e):arguments.length>3?H(t,e,i,arguments[3]):H(t,e,i)}function r(t,e,i){var s=G[t];if(s){for(var o=s.length;o--;)if(s[o]===e){s.splice(o,1);break}}else k(t,e,i)}function a(e,i){var o=(""+("string"==typeof e?e:e.type)).replace(/^on/,""),n=G[o];if(n){if(i="string"==typeof e?i:e,null==i.target)for(var r=["target","currentTarget","srcElement","type"];e=r.pop();)i=s(i,e,{get:"type"===e?function(){return o}:function(){return y}});Y&&(("popstate"===o?y.onpopstate:y.onhashchange)||t).call(y,i);for(var a=0,l=n.length;l>a;a++)n[a].call(y,i);return!0}return V(e,i)}function l(){var t=f.createEvent?f.createEvent("Event"):f.createEventObject();t.initEvent?t.initEvent("popstate",!1,!1):t.type="popstate",t.state=O.state,a(t)}function h(){F&&(F=!1,l())}function c(t,i,s,o){if(b)j=E.href;else{0===W&&(W=2);var n=e(i,2===W&&-1!==(""+i).indexOf("#"));n._relative!==e()._relative&&(j=o,s?E.replace("#"+n._special):E.hash=n._special)}!D&&t&&(z[E.href]=t),F=!1}function d(t){var i=j;if(j=E.href,i){q!==E.href&&l(),t=t||y.event;var s=e(i,!0),o=e();t.oldURL||(t.oldURL=s._href,t.newURL=o._href),s._hash!==o._hash&&a(t)}}function p(t){setTimeout(function(){H("popstate",function(t){q=E.href,D||(t=s(t,"state",{get:function(){return O.state}})),a(t)},!1)},0),!b&&t!==!0&&"location"in O&&(m(L.hash),h())}function u(t){for(;t;){if("A"===t.nodeName)return t;t=t.parentNode}}function _(t){var i=t||y.event,s=u(i.target||i.srcElement),o="defaultPrevented"in i?i.defaultPrevented:i.returnValue===!1;if(s&&"A"===s.nodeName&&!o){var n=e(),r=e(s.getAttribute("href",2)),a=n._href.split("#").shift()===r._href.split("#").shift();a&&r._hash&&(n._hash!==r._hash&&(L.hash=r._hash),m(r._hash),i.preventDefault?i.preventDefault():i.returnValue=!1)}}function m(t){var e=f.getElementById(t=(t||"").replace(/^#/,""));if(e&&e.id===t&&"A"===e.nodeName){var i=e.getBoundingClientRect();y.scrollTo(v.scrollLeft||0,i.top+(v.scrollTop||0)-(v.clientTop||0))}}function g(){var t=f.getElementsByTagName("script"),n=(t[t.length-1]||{}).src||"",r=-1!==n.indexOf("?")?n.split("?").pop():"";r.replace(/(\w+)(?:=([^&]*))?/g,function(t,e,i){B[e]=(i||"").replace(/^(0|false)$/,"")}),H(w+"hashchange",d,!1);var a=[Z,L,Q,y,$,O];D&&delete $.state;for(var l=0;l<a.length;l+=2)for(var h in a[l])if(a[l].hasOwnProperty(h))if("function"==typeof a[l][h])a[l+1][h]=a[l][h];else{var c=o(a[l],h,a[l][h]);if(!s(a[l+1],h,c,function(t,e){e===O&&(y.history=O=a[l+1]=t)}))return k(w+"hashchange",d,!1),!1;a[l+1]===y&&(G[h]=G[h.substr(2)]=[])}return O.setup(),B.redirect&&O.redirect(),B.init&&(W=1),!D&&T&&i(),b||f[C](w+"click",_,!1),"complete"===f.readyState?p(!0):(b||e()._relative===B.basepath||(F=!0),H(w+"load",p,!1)),!0}var y=("object"==typeof window?window:this)||{};if(!y.history||"emulate"in y.history)return y.history;var f=y.document,v=f.documentElement,N=y.Object,T=y.JSON,E=y.location,A=y.history,O=A,S=A.pushState,I=A.replaceState,b=!!S,D="state"in A,P=N.defineProperty,L=s({},"t")?{}:f.createElement("a"),w="",C=y.addEventListener?"addEventListener":(w="on")&&"attachEvent",M=y.removeEventListener?"removeEventListener":"detachEvent",R=y.dispatchEvent?"dispatchEvent":"fireEvent",H=y[C],k=y[M],V=y[R],B={basepath:"/",redirect:0,type:"/",init:0},x="__historyAPI__",U=f.createElement("a"),j=E.href,q="",Y=1,F=!1,W=0,z={},G={},X=f.title,Q={onhashchange:null,onpopstate:null},K=function(t,e){var i=y.history!==A;i&&(y.history=A),t.apply(A,e),i&&(y.history=O)},$={setup:function(t,e,i){B.basepath=(""+(null==t?B.basepath:t)).replace(/(?:^|\/)[^\/]*$/,"/"),B.type=null==e?B.type:e,B.redirect=null==i?B.redirect:!!i},redirect:function(t,i){if(O.setup(i,t),i=B.basepath,y.top==y.self){var s=e(null,!1,!0)._relative,o=E.pathname+E.search;b?(o=o.replace(/([^\/])$/,"$1/"),s!=i&&new RegExp("^"+i+"$","i").test(o)&&E.replace(s)):o!=i&&(o=o.replace(/([^\/])\?/,"$1/?"),new RegExp("^"+i,"i").test(o)&&E.replace(i+"#"+o.replace(new RegExp("^"+i,"i"),B.type)+E.hash))}},pushState:function(t,e,i){var s=f.title;null!=X&&(f.title=X),S&&K(S,arguments),c(t,i),f.title=s,X=e},replaceState:function(t,e,i){var s=f.title;null!=X&&(f.title=X),delete z[E.href],I&&K(I,arguments),c(t,i,!0),f.title=s,X=e},location:{set:function(t){0===W&&(W=1),y.location=t},get:function(){return 0===W&&(W=1),b?E:L}},state:{get:function(){return z[E.href]||null}}},Z={assign:function(t){0===(""+t).indexOf("#")?c(null,t):E.assign(t)},reload:function(){E.reload()},replace:function(t){0===(""+t).indexOf("#")?c(null,t,!0):E.replace(t)},toString:function(){return this.href},href:{get:function(){return e()._href}},protocol:null,host:null,hostname:null,port:null,pathname:{get:function(){return e()._pathname}},search:{get:function(){return e()._search}},hash:{set:function(t){c(null,(""+t).replace(/^(#|)/,"#"),!1,j)},get:function(){return e()._hash}}};return g()?(O.emulate=!b,y[C]=n,y[M]=r,y[R]=a,O):void 0}),function(t){var e=navigator.userAgent;t.HTMLPictureElement&&/ecko/.test(e)&&e.match(/rv\:(\d+)/)&&RegExp.$1<41&&addEventListener("resize",function(){var e,i=document.createElement("source"),s=function(t){var e,s,o=t.parentNode;"PICTURE"===o.nodeName.toUpperCase()?(e=i.cloneNode(),o.insertBefore(e,o.firstElementChild),setTimeout(function(){o.removeChild(e)})):(!t._pfLastSize||t.offsetWidth>t._pfLastSize)&&(t._pfLastSize=t.offsetWidth,s=t.sizes,t.sizes+=",100vw",setTimeout(function(){t.sizes=s}))},o=function(){var t,e=document.querySelectorAll("picture > img, img[srcset][sizes]");for(t=0;t<e.length;t++)s(e[t])},n=function(){clearTimeout(e),e=setTimeout(o,99)},r=t.matchMedia&&matchMedia("(orientation: landscape)"),a=function(){n(),r&&r.addListener&&r.addListener(n)};return i.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?a():document.addEventListener("DOMContentLoaded",a),n}())}(window),function(t,e,i){"use strict";function s(t){return" "===t||"	"===t||"\n"===t||"\f"===t||"\r"===t}function o(e,i){var s=new t.Image;return s.onerror=function(){S[e]=!1,tt()},s.onload=function(){S[e]=1===s.width,tt()},s.src=i,"pending"}function n(){V=!1,U=t.devicePixelRatio,B={},x={},f.DPR=U||1,j.width=Math.max(t.innerWidth||0,O.clientWidth),j.height=Math.max(t.innerHeight||0,O.clientHeight),j.vw=j.width/100,j.vh=j.height/100,y=[j.height,j.width,U].join("-"),j.em=f.getEmValue(),j.rem=j.em}function r(t,e,i,s){var o,n,r,a;return"saveData"===I.algorithm?t>2.7?a=i+1:(n=e-i,o=Math.pow(t-.6,1.5),r=n*o,s&&(r+=.1*o),a=t+r):a=i>1?Math.sqrt(t*e):t,a>i}function a(t){var e,i=f.getSet(t),s=!1;"pending"!==i&&(s=y,i&&(e=f.setRes(i),f.applySetCandidate(e,t))),t[f.ns].evaled=s}function l(t,e){return t.res-e.res}function h(t,e,i){var s;return!i&&e&&(i=t[f.ns].sets,i=i&&i[i.length-1]),s=c(e,i),s&&(e=f.makeUrl(e),t[f.ns].curSrc=e,t[f.ns].curCan=s,s.res||J(s,s.set.sizes)),s}function c(t,e){var i,s,o;if(t&&e)for(o=f.parseSet(e),t=f.makeUrl(t),i=0;i<o.length;i++)if(t===f.makeUrl(o[i].url)){s=o[i];break}return s}function d(t,e){var i,s,o,n,r=t.getElementsByTagName("source");for(i=0,s=r.length;s>i;i++)o=r[i],o[f.ns]=!0,n=o.getAttribute("srcset"),n&&e.push({srcset:n,media:o.getAttribute("media"),type:o.getAttribute("type"),sizes:o.getAttribute("sizes")})}function p(t,e){function i(e){var i,s=e.exec(t.substring(p));return s?(i=s[0],p+=i.length,i):void 0}function o(){var t,i,s,o,n,l,h,c,d,p=!1,_={};for(o=0;o<a.length;o++)n=a[o],l=n[n.length-1],h=n.substring(0,n.length-1),c=parseInt(h,10),d=parseFloat(h),X.test(h)&&"w"===l?((t||i)&&(p=!0),0===c?p=!0:t=c):Q.test(h)&&"x"===l?((t||i||s)&&(p=!0),0>d?p=!0:i=d):X.test(h)&&"h"===l?((s||i)&&(p=!0),0===c?p=!0:s=c):p=!0;p||(_.url=r,t&&(_.w=t),i&&(_.d=i),s&&(_.h=s),s||i||t||(_.d=1),1===_.d&&(e.has1x=!0),_.set=e,u.push(_))}function n(){for(i(F),l="",h="in descriptor";;){if(c=t.charAt(p),"in descriptor"===h)if(s(c))l&&(a.push(l),l="",h="after descriptor");else{if(","===c)return p+=1,l&&a.push(l),void o();if("("===c)l+=c,h="in parens";else{if(""===c)return l&&a.push(l),void o();l+=c}}else if("in parens"===h)if(")"===c)l+=c,h="in descriptor";else{if(""===c)return a.push(l),void o();l+=c}else if("after descriptor"===h)if(s(c));else{if(""===c)return void o();h="in descriptor",p-=1}p+=1}}for(var r,a,l,h,c,d=t.length,p=0,u=[];;){if(i(W),p>=d)return u;r=i(z),a=[],","===r.slice(-1)?(r=r.replace(G,""),o()):n()}}function u(t){function e(t){function e(){n&&(r.push(n),n="")}function i(){r[0]&&(a.push(r),r=[])}for(var o,n="",r=[],a=[],l=0,h=0,c=!1;;){if(o=t.charAt(h),""===o)return e(),i(),a;if(c){if("*"===o&&"/"===t[h+1]){c=!1,h+=2,e();continue}h+=1}else{if(s(o)){if(t.charAt(h-1)&&s(t.charAt(h-1))||!n){h+=1;continue}if(0===l){e(),h+=1;continue}o=" "}else if("("===o)l+=1;else if(")"===o)l-=1;else{if(","===o){e(),i(),h+=1;continue}if("/"===o&&"*"===t.charAt(h+1)){c=!0,h+=2;continue}}n+=o,h+=1}}}function i(t){return c.test(t)&&parseFloat(t)>=0?!0:d.test(t)?!0:"0"===t||"-0"===t||"+0"===t}var o,n,r,a,l,h,c=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,d=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(n=e(t),r=n.length,o=0;r>o;o++)if(a=n[o],l=a[a.length-1],i(l)){if(h=l,a.pop(),0===a.length)return h;if(a=a.join(" "),f.matchesMedia(a))return h}return"100vw"}e.createElement("picture");var _,m,g,y,f={},v=function(){},N=e.createElement("img"),T=N.getAttribute,E=N.setAttribute,A=N.removeAttribute,O=e.documentElement,S={},I={algorithm:""},b="data-pfsrc",D=b+"set",P=navigator.userAgent,L=/rident/.test(P)||/ecko/.test(P)&&P.match(/rv\:(\d+)/)&&RegExp.$1>35,w="currentSrc",C=/\s+\+?\d+(e\d+)?w/,M=/(\([^)]+\))?\s*(.+)/,R=t.picturefillCFG,H="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",k="font-size:100%!important;",V=!0,B={},x={},U=t.devicePixelRatio,j={px:1,"in":96},q=e.createElement("a"),Y=!1,F=/^[ \t\n\r\u000c]+/,W=/^[, \t\n\r\u000c]+/,z=/^[^ \t\n\r\u000c]+/,G=/[,]+$/,X=/^\d+$/,Q=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,K=function(t,e,i,s){t.addEventListener?t.addEventListener(e,i,s||!1):t.attachEvent&&t.attachEvent("on"+e,i)},$=function(t){var e={};return function(i){return i in e||(e[i]=t(i)),e[i]}},Z=function(){var t=/^([\d\.]+)(em|vw|px)$/,e=function(){for(var t=arguments,e=0,i=t[0];++e in t;)i=i.replace(t[e],t[++e]);return i},i=$(function(t){return"return "+e((t||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"});return function(e,s){var o;if(!(e in B))if(B[e]=!1,s&&(o=e.match(t)))B[e]=o[1]*j[o[2]];else try{B[e]=new Function("e",i(e))(j)}catch(n){}return B[e]}}(),J=function(t,e){return t.w?(t.cWidth=f.calcListLength(e||"100vw"),t.res=t.w/t.cWidth):t.res=t.d,t},tt=function(t){var i,s,o,n=t||{};if(n.elements&&1===n.elements.nodeType&&("IMG"===n.elements.nodeName.toUpperCase()?n.elements=[n.elements]:(n.context=n.elements,n.elements=null)),i=n.elements||f.qsa(n.context||e,n.reevaluate||n.reselect?f.sel:f.selShort),o=i.length){for(f.setupRun(n),Y=!0,s=0;o>s;s++)f.fillImg(i[s],n);f.teardownRun(n)}};_=t.console&&console.warn?function(t){console.warn(t)}:v,w in N||(w="src"),S["image/jpeg"]=!0,S["image/gif"]=!0,S["image/png"]=!0,S["image/svg+xml"]=e.implementation.hasFeature("http://wwwindow.w3.org/TR/SVG11/feature#Image","1.1"),f.ns=("pf"+(new Date).getTime()).substr(0,9),f.supSrcset="srcset"in N,f.supSizes="sizes"in N,f.supPicture=!!t.HTMLPictureElement,f.supSrcset&&f.supPicture&&!f.supSizes&&!function(t){N.srcset="data:,a",t.src="data:,a",f.supSrcset=N.complete===t.complete,f.supPicture=f.supSrcset&&f.supPicture}(e.createElement("img")),f.selShort="picture>img,img[srcset]",f.sel=f.selShort,f.cfg=I,f.supSrcset&&(f.sel+=",img["+D+"]"),f.DPR=U||1,f.u=j,f.types=S,g=f.supSrcset&&!f.supSizes,f.setSize=v,f.makeUrl=$(function(t){return q.href=t,q.href}),f.qsa=function(t,e){return t.querySelectorAll(e)},f.matchesMedia=function(){return t.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?f.matchesMedia=function(t){return!t||matchMedia(t).matches}:f.matchesMedia=f.mMQ,f.matchesMedia.apply(this,arguments)},f.mMQ=function(t){return t?Z(t):!0},f.calcLength=function(t){var e=Z(t,!0)||!1;return 0>e&&(e=!1),e},f.supportsType=function(t){return t?S[t]:!0},f.parseSize=$(function(t){var e=(t||"").match(M);return{media:e&&e[1],length:e&&e[2]}}),f.parseSet=function(t){return t.cands||(t.cands=p(t.srcset,t)),t.cands},f.getEmValue=function(){var t;if(!m&&(t=e.body)){var i=e.createElement("div"),s=O.style.cssText,o=t.style.cssText;i.style.cssText=H,O.style.cssText=k,t.style.cssText=k,t.appendChild(i),m=i.offsetWidth,t.removeChild(i),m=parseFloat(m,10),O.style.cssText=s,t.style.cssText=o}return m||16},f.calcListLength=function(t){if(!(t in x)||I.uT){var e=f.calcLength(u(t));x[t]=e?e:j.width}return x[t]},f.setRes=function(t){var e;if(t){e=f.parseSet(t);for(var i=0,s=e.length;s>i;i++)J(e[i],t.sizes)}return e},f.setRes.res=J,f.applySetCandidate=function(t,e){if(t.length){var i,s,o,n,a,c,d,p,u,_=e[f.ns],m=f.DPR;if(c=_.curSrc||e[w],d=_.curCan||h(e,c,t[0].set),d&&d.set===t[0].set&&(u=L&&!e.complete&&d.res-.1>m,u||(d.cached=!0,d.res>=m&&(a=d))),!a)for(t.sort(l),n=t.length,a=t[n-1],s=0;n>s;s++)if(i=t[s],i.res>=m){o=s-1,a=t[o]&&(u||c!==f.makeUrl(i.url))&&r(t[o].res,i.res,m,t[o].cached)?t[o]:i;break}a&&(p=f.makeUrl(a.url),_.curSrc=p,_.curCan=a,p!==c&&f.setSrc(e,a),f.setSize(e))}},f.setSrc=function(t,e){var i;t.src=e.url,"image/svg+xml"===e.set.type&&(i=t.style.width,t.style.width=t.offsetWidth+1+"px",t.offsetWidth+1&&(t.style.width=i))},f.getSet=function(t){var e,i,s,o=!1,n=t[f.ns].sets;for(e=0;e<n.length&&!o;e++)if(i=n[e],i.srcset&&f.matchesMedia(i.media)&&(s=f.supportsType(i.type))){"pending"===s&&(i=s),o=i;break}return o},f.parseSets=function(t,e,s){var o,n,r,a,l=e&&"PICTURE"===e.nodeName.toUpperCase(),h=t[f.ns];(h.src===i||s.src)&&(h.src=T.call(t,"src"),h.src?E.call(t,b,h.src):A.call(t,b)),(h.srcset===i||s.srcset||!f.supSrcset||t.srcset)&&(o=T.call(t,"srcset"),h.srcset=o,a=!0),h.sets=[],l&&(h.pic=!0,d(e,h.sets)),h.srcset?(n={srcset:h.srcset,sizes:T.call(t,"sizes")},h.sets.push(n),r=(g||h.src)&&C.test(h.srcset||""),r||!h.src||c(h.src,n)||n.has1x||(n.srcset+=", "+h.src,n.cands.push({url:h.src,d:1,set:n}))):h.src&&h.sets.push({srcset:h.src,sizes:null}),h.curCan=null,h.curSrc=i,h.supported=!(l||n&&!f.supSrcset||r),a&&f.supSrcset&&!h.supported&&(o?(E.call(t,D,o),t.srcset=""):A.call(t,D)),h.supported&&!h.srcset&&(!h.src&&t.src||t.src!==f.makeUrl(h.src))&&(null===h.src?t.removeAttribute("src"):t.src=h.src),h.parsed=!0},f.fillImg=function(t,e){var i,s=e.reselect||e.reevaluate;t[f.ns]||(t[f.ns]={}),i=t[f.ns],(s||i.evaled!==y)&&(i.parsed&&!e.reevaluate||f.parseSets(t,t.parentNode,e),i.supported?i.evaled=y:a(t))},f.setupRun=function(){Y&&!V&&U===t.devicePixelRatio||n()},f.supPicture?(tt=v,f.fillImg=v):!function(){var i,s=t.attachEvent?/d$|^c/:/d$|^c|^i/,o=function(){var t=e.readyState||"";n=setTimeout(o,"loading"===t?200:999),e.body&&(f.fillImgs(),i=i||s.test(t),i&&clearTimeout(n))},n=setTimeout(o,e.body?9:99),r=function(t,e){var i,s,o=function(){var n=new Date-s;e>n?i=setTimeout(o,e-n):(i=null,t())};return function(){s=new Date,i||(i=setTimeout(o,e))}},a=O.clientHeight,l=function(){V=Math.max(t.innerWidth||0,O.clientWidth)!==j.width||O.clientHeight!==a,a=O.clientHeight,V&&f.fillImgs()};K(t,"resize",r(l,99)),K(e,"readystatechange",o)}(),f.picturefill=tt,f.fillImgs=tt,f.teardownRun=v,tt._=f,t.picturefillCFG={pf:f,push:function(t){var e=t.shift();"function"==typeof f[e]?f[e].apply(f,t):(I[e]=t[0],Y&&f.fillImgs({reselect:!0}))}};for(;R&&R.length;)t.picturefillCFG.push(R.shift());t.picturefill=tt,"object"==typeof module&&"object"==typeof module.exports?module.exports=tt:"function"==typeof define&&define.amd&&define("picturefill",function(){return tt}),f.supPicture||(S["image/webp"]=o("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="))}(window,document),function(t,e,i){"use strict";function s(){var e="NATION.video.BasicVideoPlayer",i={"NATION.Utils":NATION.Utils,"NATION.EventDispatcher":NATION.EventDispatcher};t.waitingDependencies=t.waitingDependencies||{};var n=!0;for(var r in i)if(!i[r]){t.waitingDependencies[e]={dependencies:i,callback:function(){s()}},n=!1;break}if(n){o();for(var a in t.waitingDependencies)for(r in t.waitingDependencies[a].dependencies)r===e&&t.waitingDependencies[a].callback()}}function o(){var i=function(t,e){if(NATION.EventDispatcher.call(this),this.__DOMElement=NATION.Utils.getDOMElement(t),this.__playerContainer=this.__DOMElement.querySelector(".js-player, .player"),!this.__playerContainer)throw new Error(this.ERROR_MISSING_ELEMENT.replace("{{className}}",".js-player"));if(this.options={controls:!1,autoPlay:!1,loop:!1,mute:!1,preload:!1,mobileMode:!1,poster:""},this.webmSupport=!1,this.h264Support=!1,this.oggSupport=!1,this.firstPlayHasHappened=!1,this.__video=null,this.currentTime=0,this.currentTimeMS=0,this.currentTimeText="",this.duration=0,this.durationMS=0,this.durationText="",this.videoReady=!1,this.videoPlaying=!1,this.loadProgress=0,this.lastCurrentTime=0,this.playProgress=0,this.fullScreenActive=!1,this.previousVolume=1,e)for(var i in e)this.options[i]=e[i];this.options.mobileMode&&(this.options.controls=!0,this.options.autoPlay=!1),this.checkCodecSupport(),this.h264URLs=[];var s=this.__DOMElement.getAttribute("data-video");s&&this.h264URLs.push(s),this.webmURLs=[];var o=this.__DOMElement.getAttribute("data-webm");o&&this.webmURLs.push(o),this.oggURLs=[];var n=this.__DOMElement.getAttribute("data-ogg");n&&this.oggURLs.push(n),(this.h264URLs[0]||this.webmURLs[0]||this.oggURLs[0])&&this.setup()};i.prototype=Object.create(NATION.EventDispatcher.prototype),i.prototype.constructor=i,i.prototype.PLAYER_READY="PlayerReady",i.prototype.VIDEO_PLAYING="VideoPlaying",i.prototype.VIDEO_PAUSED="VideoPaused",i.prototype.VIDEO_COMPLETE="VideoComplete",i.prototype.PLAY_PROGRESS="PlayProgress",i.prototype.LOAD_PROGRESS="LoadProgress",i.prototype.FULL_SCREEN_ENTER="FullScreenEnter",i.prototype.FULL_SCREEN_EXIT="FullScreenExit",i.prototype.playVideo=function(){this.videoPlaying||(this.videoPlaying=!0,this.__video.play())},i.prototype.pauseVideo=function(){this.videoPlaying&&(this.videoPlaying=!1,this.__video.pause())},i.prototype.mute=function(){this.previousVolume=this.__video.volume,this.__video.volume=0},i.prototype.unMute=function(){this.previousVolume>0?this.__video.volume=this.previousVolume:this.__video.volume=1},i.prototype.seekTo=function(t){this.__video.currentTime=this.currentTime=t},i.prototype.getCurrentTime=function(t){return t?this.currentTimeMS:this.currentTime},i.prototype.getPlayProgress=function(){return this.playProgress},i.prototype.getVideoLoadedFraction=function(){return this.loadProgress},i.prototype.getDuration=function(t){return t?this.durationMS:this.duration},i.prototype.getDurationText=function(){return this.durationText},i.prototype.getCurrentTimeText=function(){return this.currentTimeText},i.prototype.isReady=function(){return this.videoReady},i.prototype.isPlaying=function(){return this.videoPlaying},i.prototype.enterFullScreen=function(){this.fullScreenActive=!0,this.__DOMElement.requestFullscreen?this.__DOMElement.requestFullscreen():this.__DOMElement.webkitRequestFullScreen?this.__DOMElement.webkitRequestFullScreen():this.__DOMElement.mozRequestFullScreen?this.__DOMElement.mozRequestFullScreen():this.__DOMElement.msRequestFullscreen&&this.__DOMElement.msRequestFullscreen()},i.prototype.exitFullScreen=function(){this.fullScreenActive=!1,e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},i.prototype.playNewVideo=function(t,e,i,s){this.pauseVideo(),this.videoReady=!1,this.h264URLs=[e],this.webmURLs=[i],this.oggURLs=[s],t&&this.__video.setAttribute("autoplay",""),this.changeElementVideoURL(),this.updateCurrentTimeText(),this.updateDurationTimeText()},i.prototype.getHasPlayTriggered=function(){return this.firstPlayHasHappened},i.prototype.rebuild=function(t,e,i,s){this.remove(),this.h264URLs=[e],this.webmURLs=[i],this.oggURLs=[s],this.createPlayer()},i.prototype.remove=function(){for(this.pauseVideo();this.__playerContainer.firstChild;)this.__playerContainer.removeChild(this.__playerContainer.firstChild)},i.prototype.ERROR_MISSING_ELEMENT="NATION.video.BasicVideoPlayer: Selector is missing a child with class name '{{className}}'.",i.prototype.setup=function(){this.createPlayer(),this.createListeners(),this.updateCurrentTimeText(),this.updateDurationTimeText()},i.prototype.checkCodecSupport=function(){var t=e.createElement("video");this.webmSupport=!(!t.canPlayType||!t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/no/,"")),this.h264Support=!(!t.canPlayType||!t.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"').replace(/no/,"")),this.oggSupport=!(!t.canPlayType||!t.canPlayType('video/ogg; codecs="theora"').replace(/no/,""))},i.prototype.createPlayer=function(){this.__video=e.createElement("video"),this.options.controls&&this.__video.setAttribute("controls",""),this.options.autoPlay&&this.__video.setAttribute("autoplay",""),this.options.preload&&this.__video.setAttribute("preload",""),this.options.loop&&this.__video.setAttribute("loop",""),this.options.mute&&this.__video.setAttribute("muted",""),this.options.poster&&this.__video.setAttribute("poster",this.options.poster),this.changeElementVideoURL(),this.__playerContainer.appendChild(this.__video),this.options.mute&&(this.__video.volume=0)},i.prototype.changeElementVideoURL=function(){this.webmSupport&&this.webmURLs[0]?this.__video.setAttribute("src",this.webmURLs[0]):this.h264Support&&this.h264URLs[0]?this.__video.setAttribute("src",this.h264URLs[0]):this.oggSupport&&this.oggURLs[0]&&this.__video.setAttribute("src",this.oggURLs[0])},i.prototype.createListeners=function(){this.__video.addEventListener("loadedmetadata",this.onMetaDataLoaded.bind(this)),this.__video.addEventListener("canplaythrough",this.onVideoCanPlayThrough.bind(this)),this.__video.addEventListener("playing",this.onVideoPlaying.bind(this)),this.__video.addEventListener("pause",this.onVideoPaused.bind(this)),this.__video.addEventListener("ended",this.onVideoEnded.bind(this)),this.__video.addEventListener("progress",this.onVideoLoadProgress.bind(this)),this.__video.addEventListener("timeupdate",this.onTimeUpdate.bind(this));var t=["fullscreenchange","msfullscreenchange","webkitfullscreenchange","mozfullscreenchange"];for(var i in t)e.addEventListener(t[i],this.onFullScreenChange.bind(this))},i.prototype.updateCurrentTimeText=function(){this.currentTimeText=this.createTimeString(this.currentTime)},i.prototype.updateDurationTimeText=function(){this.durationText=this.createTimeString(this.duration)},i.prototype.createTimeString=function(t){t||(t=0);var e,i,s,o="";return e=Math.floor(t/1440),t%=1440,i=Math.floor(t/60),s=Math.floor(t%60),e>0&&(o+=e+":"),i>0?(e>0&&10>i&&(o+="0"),o+=i+":"):o+=e>0?"00:":"0:",o+=s>0?10>s?"0"+s:s:"00"},i.prototype.updateLoadProgress=function(){if(this.__video.buffered.length&&this.duration){var t=(this.__video.buffered.start(0),this.__video.buffered.end(0)),e=t/this.__video.duration;this.loadProgress!==e&&(this.loadProgress=e,this.trigger(this.LOAD_PROGRESS))}},i.prototype.onMetaDataLoaded=function(){this.durationMS=1e3*this.__video.duration,this.duration=Math.floor(this.__video.duration),this.updateDurationTimeText()},i.prototype.onVideoCanPlayThrough=function(){this.videoReady||(this.videoReady=!0,this.trigger(this.PLAYER_READY))},i.prototype.onVideoPlaying=function(){this.firstPlayHasHappened=!0,this.videoPlaying=!0,this.trigger(this.VIDEO_PLAYING)},i.prototype.onVideoPaused=function(){this.videoPlaying=!1,this.trigger(this.VIDEO_PAUSED)},i.prototype.onVideoEnded=function(){this.videoPlaying=!1,this.trigger(this.VIDEO_COMPLETE)},i.prototype.onVideoLoadProgress=function(){this.loadProgress<1&&this.updateLoadProgress()},i.prototype.onTimeUpdate=function(){if(this.__video.currentTime&&this.lastCurrentTime!==this.__video.currentTime&&this.duration>0){this.currentTimeMS=1e3*this.__video.currentTime,this.currentTime=Math.floor(this.__video.currentTime);var t=this.__video.currentTime/this.__video.duration;this.lastCurrentTime=this.__video.currentTime,t!==this.playProgress&&(this.playProgress=t,this.trigger(this.PLAY_PROGRESS))}this.currentTime&&this.duration>0&&this.updateCurrentTimeText(),this.loadProgress<1&&this.updateLoadProgress()},i.prototype.onFullScreenChange=function(){var t=e.fullscreenElement||e.msFullscreenElement||e.webkitFullscreenElement||e.webkitCurrentFullScreenElement||e.mozFullScreenElement;t?(this.fullScreenActive=!0,this.__DOMElement.style.width="100%",this.__DOMElement.style.height="100%",this.trigger(this.FULL_SCREEN_ENTER)):(this.fullScreenActive=!1,this.__DOMElement.style.removeProperty("width"),this.__DOMElement.style.removeProperty("height"),this.trigger(this.FULL_SCREEN_EXIT))},t.NATION.video.BasicVideoPlayer=i}"undefined"==typeof t.NATION&&(t.NATION={}),"undefined"==typeof t.NATION.video&&(t.NATION.video={}),s()}(window,document,void 0),function(t,e,i){"use strict";function s(){var e="NATION.video.BasicYouTubePlayer",i={"NATION.Utils":NATION.Utils,"NATION.EventDispatcher":NATION.EventDispatcher};t.waitingDependencies=t.waitingDependencies||{};var n=!0;for(var r in i)if(!i[r]){t.waitingDependencies[e]={dependencies:i,callback:function(){s()}},n=!1;break}if(n){o();for(var a in t.waitingDependencies)for(r in t.waitingDependencies[a].dependencies)r===e&&t.waitingDependencies[a].callback()}}function o(){var i=function(t,e){if(NATION.EventDispatcher.call(this),this.__DOMElement=NATION.Utils.getDOMElement(t),this.__playerContainer=this.__DOMElement.querySelector(".js-player, .player"),!this.__playerContainer)throw new Error(this.ERROR_MISSING_ELEMENT.replace("{{className}}",".js-player"));if(this.API_URL="//www.youtube.com/iframe_api",this.options={controls:!0,autoPlay:!1,preventInit:!1,loop:!1,mute:!1,mobileMode:!1},this.videoID="",this.player=null,this.apiLoading=!1,this.apiLoadTimer=null,this.playRequested=!1,this.pauseRequested=!1,this.playProgress=0,this.currentTime=0,this.currentTimeMS=0,this.currentTimeText="0:00",this.duration=0,this.durationMS=0,this.durationText="0:00",this.loadTimer=null,this.loadProgress=0,this.videoPlaying=!1,this.firstPlayHasHappened=!1,this.fullScreenActive=!1,this.muted=!1,this.playTimer=null,this.hasSetup=!1,this.touchDevice=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),e)for(var i in e)this.options[i]=e[i];this.options.mobileMode&&(this.options.controls=!0,this.options.autoPlay=!1),this.videoURLs=[this.__DOMElement.getAttribute("data-video")],!this.options.preventInit&&this.videoURLs[0]&&this.setup()};i.prototype=Object.create(NATION.EventDispatcher.prototype),i.prototype.constructor=i,i.prototype.PLAYER_READY="PlayerReady",i.prototype.VIDEO_PLAYING="VideoPlaying",i.prototype.VIDEO_PAUSED="VideoPaused",i.prototype.VIDEO_COMPLETE="VideoComplete",i.prototype.PLAY_PROGRESS="PlayProgress",i.prototype.LOAD_PROGRESS="LoadProgress",i.prototype.FULL_SCREEN_ENTER="FullScreenEnter",i.prototype.FULL_SCREEN_EXIT="FullScreenExit",i.prototype.playVideo=function(){this.player&&this.player.playVideo?this.touchDevice?this.player&&this.firstPlayHasHappened&&this.player.playVideo():this.player.playVideo():(this.playRequested=!0,this.hasSetup||this.setup())},i.prototype.pauseVideo=function(){this.player&&this.player.pauseVideo?this.touchDevice?this.firstPlayHasHappened&&this.pauseVideo():this.player.pauseVideo():this.pauseRequested=!0,this.stopLoadTimer()},i.prototype.mute=function(){this.muted||(this.muted=!0,this.player&&this.player.mute())},i.prototype.unMute=function(){this.muted&&(this.muted=!1,this.player&&this.player.unMute())},i.prototype.seekTo=function(t){this.seekingToTime=Math.floor(t),this.player&&this.player.seekTo&&this.player.seekTo(t)},i.prototype.getCurrentTime=function(t){return t?this.currentTimeMS:this.currentTime},i.prototype.getPlayProgress=function(){return Math.floor(100*this.playProgress)/100},i.prototype.getVideoLoadedFraction=function(){return this.player.getVideoLoadedFraction()},i.prototype.getDuration=function(){return milliseconds?this.durationMS:this.duration},i.prototype.getDurationText=function(){return this.durationText},i.prototype.getCurrentTimeText=function(){return this.currentTimeText},i.prototype.isReady=function(){return this.playerReadyState},i.prototype.isPlaying=function(){return this.videoPlaying},i.prototype.enterFullScreen=function(){this.fullScreenActive=!0,this.__DOMElement.requestFullscreen?this.__DOMElement.requestFullscreen():this.__DOMElement.webkitRequestFullScreen?this.__DOMElement.webkitRequestFullScreen():this.__DOMElement.mozRequestFullScreen?this.__DOMElement.mozRequestFullScreen():this.__DOMElement.msRequestFullscreen&&this.__DOMElement.msRequestFullscreen()},i.prototype.exitFullScreen=function(){this.fullScreenActive=!1,e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},i.prototype.playNewVideo=function(t,e){this.getVideoID(e),
this.playRequested=this.pauseRequested=!1,this.player&&this.player.playVideo?this.touchDevice&&!this.firstPlayHasHappened?this.player.cueVideoById(this.videoID):(!this.touchDevice||this.touchDevice&&this.firstPlayHasHappened)&&this.player.loadVideoById(this.videoID):(this.options.autoPlay=t,this.apiLoading?this.playRequested=!0:(this.apiLoading=!0,this.loadAPI(),this.createListeners()))},i.prototype.getHasPlayTriggered=function(){return this.firstPlayHasHappened},i.prototype.rebuild=function(){this.stopLoadTimer(),this.stopPlayTimer(),this.videoURL=videoURL,this.getVideoID(videoURL),this.options.autoPlay=autoPlay,this.player=null,this.apiLoading=!0,this.firstPlayHasHappened=!1,"undefined"==typeof YT?this.loadAPI():this.createPlayer()},i.prototype.remove=function(){"undefined"!=typeof swfobject&&swfobject.removeSWF("youtube-video"),t.onPlayerStateChange=function(){},this.player&&this.player.stopVideo&&this.player.stopVideo(),this.__DOMElement.querySelector(".player").innerHTML=""},i.prototype.ERROR_MISSING_ELEMENT="NATION.video.BasicYouTubePlayer: Selector is missing a child with class name '{{className}}'.",i.prototype.ERROR_INVALID_URL="NATION.video.BasicYouTubePlayer: Passed video URL is not a valid YouTube URL. URL was = '{{url}}'.",i.prototype.ERROR_FAILED_API_LOAD="NATION.video.BasicYouTubePlayer: YouTube API load error. Status: '{{status}}', statusText: '{{statusText}}'.",i.prototype.setup=function(){this.hasSetup=!0,this.getVideoID(this.videoURLs[0]),this.loadAPI(),this.createListeners()},i.prototype.getVideoID=function(t){var e=-1,i=0;if(t.search("youtube.com")>-1)e=parseInt(t.search("v="))+2;else{if(!(t.search("youtu.be/")>-1))throw this.videoID="",new Error(this.ERROR_INVALID_URL.replace("{{url}}",t));e=parseInt(t.search("youtu.be/"),10)+9}e>-1&&(i=t.search("&")>-1?t.search("&"):t.search("#")>-1?t.search("#"):t.length,this.videoID=t.substr(e,i-e))},i.prototype.loadAPI=function(){e.documentElement.querySelectorAll("#youtube-api").length?this.onAPILoaded():NATION.Utils.ajax({url:this.API_URL,dataType:"script",id:"youtube-api",success:this.onAPILoaded.bind(this),error:this.onAPILoadError.bind(this)})},i.prototype.onAPILoaded=function(t){this.apiLoading=!0,this.createPlayer()},i.prototype.onAPILoadError=function(t,e){throw new Error(this.ERROR_FAILED_API_LOAD.replace("{{status}}",t).replace("{{statusText}}",e))},i.prototype.createPlayer=function(){"undefined"!=typeof YT&&YT.Player?this.player=new YT.Player(this.__playerContainer,{width:"100%",height:"100%",videoId:this.videoID,playerVars:{playlist:this.videoID,controls:this.options.controls?1:0,modestBranding:1,showinfo:0,origin:e.domain,rel:0,disablekb:0,enablejsapi:1,wmode:"opaque",autoplay:this.options.autoPlay?1:0,loop:this.options.loop?1:0,iv_load_policy:this.options.annotations?1:3},events:{onReady:this.onPlayerReady.bind(this),onStateChange:this.onPlayerStateChange.bind(this),onError:this.onVideoError.bind(this)}}):this.recheckAPILoad()},i.prototype.recheckAPILoad=function(){this.apiLoadTimer&&clearTimeout(this.apiLoadTimer),this.apiLoadTimer=setTimeout(this.createPlayer.bind(this),300)},i.prototype.createListeners=function(){var t=["fullscreenchange","msfullscreenchange","webkitfullscreenchange","mozfullscreenchange"];for(var i in t)e.addEventListener(t[i],this.onFullScreenChange.bind(this))},i.prototype.startPlayTimer=function(){this.duration=Math.floor(this.player.getDuration()),this.updateDurationTimeText(),this.playTimer&&clearInterval(this.playTimer),this.playTimer=setInterval(this.onPlayProgress.bind(this),20)},i.prototype.stopPlayTimer=function(){this.playTimer&&(clearInterval(this.playTimer),this.playTimer=null)},i.prototype.startLoadTimer=function(){this.loadTimer&&clearInterval(this.loadTimer),this.loadTimer=setInterval(this.onLoadProgress.bind(this),200)},i.prototype.stopLoadTimer=function(){this.loadTimer&&(clearInterval(this.loadTimer),this.loadTimer=null)},i.prototype.updateCurrentTimeText=function(){this.currentTimeText=this.createTimeString(this.currentTime)},i.prototype.updateDurationTimeText=function(){this.durationText=this.createTimeString(this.duration)},i.prototype.createTimeString=function(t){if(t||(t=0),0===t)return"0:00";var e,i,s,o="";return e=Math.floor(t/1440),t%=1440,i=Math.floor(t/60),s=Math.floor(t%60),e>0&&(o+=e+":"),i>0?(e>0&&10>i&&(o+="0"),o+=i+":"):o+=e>0?"00:":"0:",o+=s>0?10>s?"0"+s:s:"00"},i.prototype.onPlayProgress=function(){this.currentTimeMS=1e3*this.player.getCurrentTime(),this.currentTime=Math.floor(this.player.getCurrentTime()),this.updateCurrentTimeText(),this.durationMS=1e3*this.player.getDuration(),this.duration=Math.floor(this.player.getDuration()),this.updateDurationTimeText();var t=0;t=this.seekingToTime>0?this.seekingToTime/this.duration:this.currentTime/this.duration,t!==this.playProgress&&(this.playProgress=t,this.trigger(this.PLAY_PROGRESS))},i.prototype.onLoadProgress=function(){var t=this.player.getVideoLoadedFraction();t!==this.loadProgress&&(this.loadProgress=t,this.trigger(this.LOAD_PROGRESS))},i.prototype.onPlayerReady=function(){this.player.playVideo?this.onPlayerReadyToPlay():(this.apiLoadTimer&&clearTimeout(this.apiLoadTimer),this.apiLoadTimer=setTimeout(this.onPlayerReady.bind(this),20))},i.prototype.onPlayerReadyToPlay=function(){this.playerReadyState=!0,this.startLoadTimer(),this.playRequested&&!this.pauseRequested&&(this.playRequested=!1,this.playVideo()),this.durationMS=1e3*this.player.getDuration(),this.duration=Math.floor(this.player.getDuration()),this.updateDurationTimeText(),this.trigger(this.PLAYER_READY)},i.prototype.onPlayerStateChange=function(t){t.data===YT.PlayerState.ENDED?(this.playProgress=1,this.videoPlaying=!1,this.stopPlayTimer(),this.trigger(this.PLAY_PROGRESS),this.trigger(this.VIDEO_COMPLETE)):t.data===YT.PlayerState.PLAYING?(this.videoPlaying=!0,this.firstPlayHasHappened=!0,this.startPlayTimer(),this.options.mute&&this.mute(),this.trigger(this.VIDEO_PLAYING)):t.data===YT.PlayerState.PAUSED&&(this.stopPlayTimer(),this.videoPlaying=!1,this.trigger(this.VIDEO_PAUSED))},i.prototype.onVideoError=function(e){t&&t.console&&console.dir(e)},i.prototype.onFullScreenChange=function(){var t=e.fullscreenElement||e.msFullscreenElement||e.webkitFullscreenElement||e.webkitCurrentFullScreenElement||e.mozFullScreenElement;t?(this.fullScreenActive=!0,this.__DOMElement.style.width="100%",this.__DOMElement.style.height="100%",this.trigger(this.FULL_SCREEN_ENTER)):(this.fullScreenActive=!1,this.__DOMElement.style.removeProperty("width"),this.__DOMElement.style.removeProperty("height"),this.trigger(this.FULL_SCREEN_EXIT))},t.NATION.video.BasicYouTubePlayer=i}"undefined"==typeof t.NATION&&(t.NATION={}),"undefined"==typeof t.NATION.video&&(t.NATION.video={}),s()}(window,document,void 0),function(t,e,i){"use strict";function s(){var e="NATION.video.StandardVideoPlayer",i={"NATION.video.BasicVideoPlayer":NATION.video.BasicVideoPlayer,"NATION.MediaControls":NATION.MediaControls,"NATION.Utils":NATION.Utils,"NATION.EventDispatcher":NATION.EventDispatcher};t.waitingDependencies=t.waitingDependencies||{};var n=!0;for(var r in i)if(!i[r]){t.waitingDependencies[e]={dependencies:i,callback:function(){s()}},n=!1;break}if(n){delete t.waitingDependencies[e],o();for(var a in t.waitingDependencies)for(r in t.waitingDependencies[a].dependencies)r===e&&t.waitingDependencies[a].callback()}}function o(){var e=function(t,e,i){NATION.video.BasicVideoPlayer.call(this,t,e),this.options=e,this.controlsOptions=i,this.controls=null,this.__DOMElement=NATION.Utils.getDOMElement(t),this.__placeholder=this.__DOMElement.querySelector(".js-placeholder, .placeholder"),this.videoWasPlaying=!1,this.createControls(),this.createVideoListeners()};e.prototype=Object.create(NATION.video.BasicVideoPlayer.prototype),e.prototype.constructor=e,e.prototype.createControls=function(){this.controls=new NATION.MediaControls(this.__DOMElement.querySelector(".js-controls-container, .controls-container"),this.controlsOptions),this.options.mute&&this.controls.showUnMuteButton()},e.prototype.createVideoListeners=function(){this.controls.addListener(this.controls.PLAY_CLICKED,this.onPlayClicked.bind(this)),this.controls.addListener(this.controls.PAUSE_CLICKED,this.onPauseClicked.bind(this)),this.controls.addListener(this.controls.MUTE_CLICKED,this.onMuteClicked.bind(this)),this.controls.addListener(this.controls.UNMUTE_CLICKED,this.onUnMuteClicked.bind(this)),this.controls.addListener(this.controls.PROGRESS_CLICKED,this.onProgressClicked.bind(this)),this.controls.addListener(this.controls.ENTER_FULL_SCREEN_CLICKED,this.onEnterFullScreenClicked.bind(this)),this.controls.addListener(this.controls.EXIT_FULL_SCREEN_CLICKED,this.onExitFullScreenClicked.bind(this)),this.controls.addListener(this.controls.HANDLE_MOUSE_DOWN,this.onHandleMouseDown.bind(this)),this.controls.addListener(this.controls.HANDLE_DRAGGED,this.onHandleDragged.bind(this)),this.controls.addListener(this.controls.HANDLE_RELEASED,this.onHandleReleased.bind(this)),this.controls.addListener(this.controls.OVERLAY_HIDDEN,this.onOverlayHidden.bind(this)),this.addListener(this.PLAYER_READY,this.onPlayerReady.bind(this)),this.addListener(this.VIDEO_PLAYING,this.onVideoPlayStarted.bind(this)),this.addListener(this.VIDEO_PAUSED,this.onVideoPaused.bind(this)),this.addListener(this.VIDEO_COMPLETE,this.onVideoComplete.bind(this)),this.addListener(this.PLAY_PROGRESS,this.onPlaybackProgress.bind(this)),this.addListener(this.LOAD_PROGRESS,this.onLoadProgress.bind(this)),this.addListener(this.FULL_SCREEN_ENTER,this.onFullScreenEnter.bind(this)),this.addListener(this.FULL_SCREEN_EXIT,this.onFullScreenExit.bind(this))},e.prototype.onPlayClicked=function(t){this.playVideo()},e.prototype.onPauseClicked=function(t){this.pauseVideo()},e.prototype.onMuteClicked=function(t){this.mute()},e.prototype.onUnMuteClicked=function(t){this.unMute()},e.prototype.onProgressClicked=function(t){var e=this.controls.getRequestedPercentage();this.seekTo(e*this.duration),this.controls.setProgress(e)},e.prototype.onEnterFullScreenClicked=function(t){this.enterFullScreen()},e.prototype.onExitFullScreenClicked=function(t){this.exitFullScreen()},e.prototype.onHandleMouseDown=function(t){this.videoWasPlaying=this.videoPlaying},e.prototype.onHandleDragged=function(t){},e.prototype.onHandleReleased=function(t){var e=this.controls.getRequestedPercentage();this.pauseVideo(),this.seekTo(e*this.duration),this.controls.setProgress(e),this.videoWasPlaying&&(this.videoWasPlaying=!1,this.playVideo())},e.prototype.onPlayerReady=function(t){this.controls.setDisplayedDuration(this.getDurationText())},e.prototype.onVideoPlayStarted=function(t){this.controls.showPauseButton(),this.controls.setDisplayedDuration(this.getDurationText())},e.prototype.onVideoPaused=function(t){this.controls.showPlayButton()},e.prototype.onVideoComplete=function(t){this.controls.showPlayButton(),this.controls.show()},e.prototype.onPlaybackProgress=function(t){var e=this.playProgress;this.controls.setProgress(e),this.controls.setDisplayedCurrentTime(this.getCurrentTimeText())},e.prototype.onLoadProgress=function(t){var e=this.getVideoLoadedFraction();this.controls.setLoaded(e)},e.prototype.onFullScreenEnter=function(t){},e.prototype.onFullScreenExit=function(t){},e.prototype.onOverlayHidden=function(t){this.options.mobileMode&&this.__placeholder&&(this.__placeholder.style.zIndex=-1)},t.NATION.video.StandardVideoPlayer=e}"undefined"==typeof t.NATION&&(t.NATION={}),"undefined"==typeof t.NATION.video&&(t.NATION.video={}),s()}(window,document,void 0),function(t,e,i){"use strict";function s(){var e="NATION.video.StandardYouTubePlayer",i={"NATION.video.BasicYouTubePlayer":NATION.video.BasicYouTubePlayer,"NATION.MediaControls":NATION.MediaControls,"NATION.Utils":NATION.Utils,"NATION.EventDispatcher":NATION.EventDispatcher};t.waitingDependencies=t.waitingDependencies||{};var n=!0;for(var r in i)if(!i[r]){t.waitingDependencies[e]={dependencies:i,callback:function(){s()}},n=!1;break}if(n){delete t.waitingDependencies[e],o();for(var a in t.waitingDependencies)for(r in t.waitingDependencies[a].dependencies)r===e&&t.waitingDependencies[a].callback()}}function o(){var e=function(t,e,i){NATION.video.BasicYouTubePlayer.call(this,t,e),this.options=e,this.controlsOptions=i,this.controls=null,this.__DOMElement=NATION.Utils.getDOMElement(t),this.__placeholder=this.__DOMElement.querySelector(".js-placeholder, .placeholder"),this.videoWasPlaying=!1,this.createControls(),this.createVideoListeners()};e.prototype=Object.create(NATION.video.BasicYouTubePlayer.prototype),e.prototype.constructor=e,e.prototype.createControls=function(){this.controls=new NATION.MediaControls(this.__DOMElement.querySelector(".js-controls-container, .controls-container"),this.controlsOptions),this.options.mute&&this.controls.showUnMuteButton()},e.prototype.createVideoListeners=function(){this.controls.addListener(this.controls.PLAY_CLICKED,this.onPlayClicked.bind(this)),this.controls.addListener(this.controls.PAUSE_CLICKED,this.onPauseClicked.bind(this)),this.controls.addListener(this.controls.MUTE_CLICKED,this.onMuteClicked.bind(this)),this.controls.addListener(this.controls.UNMUTE_CLICKED,this.onUnMuteClicked.bind(this)),this.controls.addListener(this.controls.PROGRESS_CLICKED,this.onProgressClicked.bind(this)),this.controls.addListener(this.controls.ENTER_FULL_SCREEN_CLICKED,this.onEnterFullScreenClicked.bind(this)),this.controls.addListener(this.controls.EXIT_FULL_SCREEN_CLICKED,this.onExitFullScreenClicked.bind(this)),this.controls.addListener(this.controls.HANDLE_MOUSE_DOWN,this.onHandleMouseDown.bind(this)),this.controls.addListener(this.controls.HANDLE_DRAGGED,this.onHandleDragged.bind(this)),this.controls.addListener(this.controls.HANDLE_RELEASED,this.onHandleReleased.bind(this)),this.controls.addListener(this.controls.OVERLAY_HIDDEN,this.onOverlayHidden.bind(this)),this.addListener(this.PLAYER_READY,this.onPlayerReady.bind(this)),this.addListener(this.VIDEO_PLAYING,this.onVideoPlayStarted.bind(this)),this.addListener(this.VIDEO_PAUSED,this.onVideoPaused.bind(this)),this.addListener(this.VIDEO_COMPLETE,this.onVideoComplete.bind(this)),this.addListener(this.PLAY_PROGRESS,this.onPlaybackProgress.bind(this)),this.addListener(this.LOAD_PROGRESS,this.onLoadProgress.bind(this)),this.addListener(this.FULL_SCREEN_ENTER,this.onFullScreenEnter.bind(this)),this.addListener(this.FULL_SCREEN_EXIT,this.onFullScreenExit.bind(this))},e.prototype.onPlayClicked=function(t){this.playVideo()},e.prototype.onPauseClicked=function(t){this.pauseVideo()},e.prototype.onMuteClicked=function(t){this.mute()},e.prototype.onUnMuteClicked=function(t){this.unMute()},e.prototype.onProgressClicked=function(t){var e=this.controls.getRequestedPercentage();this.seekTo(e*this.duration),this.controls.setProgress(e)},e.prototype.onEnterFullScreenClicked=function(t){this.enterFullScreen()},e.prototype.onExitFullScreenClicked=function(t){this.exitFullScreen()},e.prototype.onHandleMouseDown=function(t){this.videoWasPlaying=this.videoPlaying},e.prototype.onHandleDragged=function(t){},e.prototype.onHandleReleased=function(t){var e=this.controls.getRequestedPercentage();this.pauseVideo(),this.seekTo(e*this.duration),this.controls.setProgress(e),this.videoWasPlaying&&(this.videoWasPlaying=!1,this.playVideo())},e.prototype.onPlayerReady=function(t){this.controls.setDisplayedDuration(this.getDurationText())},e.prototype.onVideoPlayStarted=function(t){this.controls.showPauseButton(),this.controls.setDisplayedDuration(this.getDurationText())},e.prototype.onVideoPaused=function(t){this.controls.showPlayButton()},e.prototype.onVideoComplete=function(t){this.controls.showPlayButton(),this.controls.show()},e.prototype.onPlaybackProgress=function(t){var e=this.playProgress;this.controls.setProgress(e),this.controls.setDisplayedCurrentTime(this.getCurrentTimeText())},e.prototype.onLoadProgress=function(t){var e=this.getVideoLoadedFraction();this.controls.setLoaded(e)},e.prototype.onFullScreenEnter=function(t){},e.prototype.onFullScreenExit=function(t){},e.prototype.onOverlayHidden=function(t){this.options.mobileMode&&this.__placeholder&&(this.__placeholder.style.zIndex=-1)},t.NATION.video.StandardYouTubePlayer=e}"undefined"==typeof t.NATION&&(t.NATION={}),"undefined"==typeof t.NATION.video&&(t.NATION.video={}),s()}(window,document,void 0),function(t,e,i){"use strict";function s(){var e="NATION.Accordion",i={"NATION.Utils":NATION.Utils,"NATION.EventDispatcher":NATION.EventDispatcher};t.waitingDependencies=t.waitingDependencies||{};var n=!0;for(var r in i)if(!i[r]){t.waitingDependencies[e]={dependencies:i,callback:function(){s()}},n=!1;break}if(n){o();for(var a in t.waitingDependencies)for(r in t.waitingDependencies[a].dependencies)r===e&&t.waitingDependencies[a].callback()}}function o(){var i=function(t,e){if(NATION.EventDispatcher.call(this),this.__DOMElement=NATION.Utils.getDOMElement(t),this.options={duration:400,easing:"linear",animateTransitions:!0,openPanel:-1,maxPanelHeight:-1,scrollbarTemplateID:"",enableMouseLock:!1,autoScroll:!1,autoScrollOffset:0},e)for(var i in e)this.options[i]=e[i];if(e.firstPanelOpen&&(this.options.openPanel=0),this.jQueryMode="undefined"!=typeof jQuery&&"undefined"==typeof NATION.Animation,this.scrollbarTemplate='<div class="js-scrollbar"><div class="js-track"></div><a href="#" class="js-handle"></a></div>',this.__clickableHeaders=this.__DOMElement.querySelectorAll(".js-header, .header"),this.openPanelID=-1,this.autoScrolling=!1,this.enabled=!0,this.handler_windowScrolled=null,this.__clickableHeaders.length<=0)throw new Error(this.ERROR_MISSING_ELEMENT.replace("{{className}}",".js-header"));if(this.__contentPanels=this.__DOMElement.querySelectorAll(".js-content, .content"),this.__contentPanels.length<=0)throw new Error(this.ERROR_MISSING_ELEMENT.replace("{{className}}",".js-content"));this.resizeTimer=null,this.scrollbars=[],this.setup()};i.prototype=Object.create(NATION.EventDispatcher.prototype),i.prototype.constructor=i,i.prototype.PANEL_OPEN_COMPLETE="PanelOpenComplete",i.prototype.PANEL_CLOSE_COMPLETE="PanelCloseComplete",i.prototype.HEADER_CLICKED="HeaderClicked",i.prototype.getOpenPanelID=function(){return this.openPanelID},i.prototype.getTotalSections=function(){return this.__clickableHeaders.length},i.prototype.openPanel=function(e,i){var s=this.__contentPanels[e];s.style.display="block",this.__clickableHeaders[e].className.search("active")<0&&(this.__clickableHeaders[e].className+=" active"),s.className.search("active")<0&&(s.className+=" active");var o=s.children[0].offsetHeight;this.options.maxPanelHeight>0&&o>this.options.maxPanelHeight&&(o=this.options.maxPanelHeight),this.options.maxPanelHeight>-1&&this.scrollbars[e]&&this.scrollbars[e].setPosition(0);var n=0;if(this.options.autoScroll){if(this.autoScrolling=!0,n=NATION.Utils.getOffset(this.__clickableHeaders[e]).top,n-=this.options.autoScrollOffset,this.openPanelID>-1&&this.openPanelID<e){var r=this.options.maxPanelHeight>0?this.options.maxPanelHeight:this.__contentPanels[this.openPanelID].children[0].offsetHeight;n-=r}this.listenForWindowScrolling()}i?(s.style.height=o+"px",this.options.autoScroll&&(NATION.Utils.getPageElement().style.scrollTop=n+"px"),this.onPanelOpenComplete()):this.jQueryMode?(this.options.autoScroll&&$(t).stop().animate({scrollTop:n},this.options.duration,this.options.easing,this.onAutoScrollComplete.bind(this)),$(s).stop().animate({height:o},this.options.duration,this.options.easing,this.onPanelOpenComplete.bind(this))):(this.options.autoScroll&&NATION.Animation.start(NATION.Utils.getPageElement(),{scrollTop:n},{duration:this.options.duration,easing:this.options.easing},this.onAutoScrollComplete.bind(this)),NATION.Animation.start(s,{height:o},{duration:this.options.duration,easing:this.options.easing},this.onPanelOpenComplete.bind(this))),this.openPanelID=e},i.prototype.closePanel=function(t,e){this.autoScrolling=!1,this.openPanelID===t&&this.stopListeningForWindowScrolling(),this.__clickableHeaders[t].className=this.__clickableHeaders[t].className.replace(/ active|active/g,""),this.__contentPanels[t].className=this.__contentPanels[t].className.replace(/ active|active/g,"");var i=this.__contentPanels[t];i.style.display="block",e?(i.style.height=0,this.onPanelCloseComplete(i)):this.jQueryMode?$(i).stop().animate({height:0},this.options.duration,this.options.easing,function(t){this.onPanelCloseComplete(t.target)}):(i.style.height=i.offsetHeight+"px",NATION.Animation.start(i,{height:0},{duration:this.options.duration,easing:this.options.easing},this.onPanelCloseComplete.bind(this)))},i.prototype.enable=function(t){if(!this.enabled){this.enabled=!0;for(var e=0,i=this.__contentPanels.length;i>e;e++)this.__contentPanels[e].style.overflow="hidden",this.options.maxPanelHeight>-1&&this.scrollbars[e]&&(this.scrollbars[e].enable(),this.__contentPanels[e].children[0].style.maxHeight=this.options.maxPanelHeight+"px",this.__contentPanels[e].querySelector(".js-scrollbar, .scrollbar").style.removeProperty("display"),this.scrollbars[e].resize()),e===this.openPanelID&&t?t&&this.openPanel(this.openPanelID,!0):(this.__contentPanels[e].style.height=0,this.__contentPanels[e].style.display="none")}},i.prototype.disable=function(){if(this.enabled){this.enabled=!1;for(var t=0,e=this.__contentPanels.length;e>t;t++)this.__contentPanels[t].style.removeProperty("height"),this.__contentPanels[t].style.removeProperty("display"),this.__contentPanels[t].style.removeProperty("overflow"),this.__contentPanels[t].className=this.__contentPanels[t].className.replace(/ active|active/g,""),this.__clickableHeaders[t].className=this.__clickableHeaders[t].className.replace(/ active|active/g,""),this.options.maxPanelHeight>-1&&this.scrollbars[t]&&(this.scrollbars[t].disable(),this.__contentPanels[t].children[0].style.removeProperty("max-height"),this.__contentPanels[t].querySelector(".js-scrollbar, .scrollbar").style.display="none")}},i.prototype.setMaxPanelHeight=function(t){this.options.maxPanelHeight=t,this.openPanelID>-1&&this.openPanel(this.openPanelID,!0)},i.prototype.destroy=function(){this.disable();for(var e=0,i=this.__clickableHeaders.length;i>e;e++)this.__clickableHeaders[e].removeEventListener("click",this.handler_headerClicked);t.removeEventListener("resize",this.handler_windowResized),this.stopListeningForWindowScrolling()},i.prototype.ERROR_MISSING_ELEMENT="NATION.Accordion: Selector is missing a child with class name '{{className}}'.",i.prototype.ERROR_MISSING_TEMPLATE_CLASS="NATION.Accordion: The provided scrollbar template does not contain an element with the required class '{{className}}'",i.prototype.setup=function(){this.prepareContent(),this.options.openPanel>-1&&this.openPanel(this.options.openPanel,!0),this.createListeners(),this.resize()},i.prototype.createListeners=function(){var e=0,i=this.__clickableHeaders.length;for(this.handler_headerClicked=this.onHeaderClicked.bind(this);i>e;e++)this.__clickableHeaders[e].addEventListener("click",this.handler_headerClicked);this.handler_windowResized=this.onWindowResized.bind(this),t.addEventListener("resize",this.handler_windowResized)},i.prototype.listenForWindowScrolling=function(){this.options.autoScroll&&(this.handler_windowScrolled=this.onWindowScrolled.bind(this),t.addEventListener("wheel",this.handler_windowScrolled),t.addEventListener("DOMMouseWheel",this.handler_windowScrolled))},i.prototype.stopListeningForWindowScrolling=function(){t.removeEventListener("wheel",this.handler_windowScrolled),t.removeEventListener("DOMMouseWheel",this.handler_windowScrolled)},i.prototype.selectScrollbarTemplate=function(){if(this.options.scrollbarTemplateID&&(this.scrollbarTemplate=e.getElementById(this.options.scrollbarTemplateID).innerHTML,this.scrollbarTemplate.search(/js-scrollbar|scrollbar/g)<0))throw new Error(this.ERROR_MISSING_TEMPLATE_CLASS.replace("{{className}}",".js-scrollbar"))},i.prototype.prepareContent=function(){this.options.maxPanelHeight>-1&&this.selectScrollbarTemplate();for(var t,e,i=0,s=this.__contentPanels.length;s>i;i++)this.options.maxPanelHeight>-1&&(this.__contentPanels[i].innerHTML=this.__contentPanels[i].innerHTML+this.scrollbarTemplate,e=this.__contentPanels[i].querySelector(".js-scrollbar, .scrollbar")),t=this.__contentPanels[i].children[0],t.style.overflow="hidden",this.options.maxPanelHeight>-1&&(t.style.maxHeight=this.options.maxPanelHeight+"px"),this.__contentPanels[i].style.height="auto",this.__contentPanels[i].style.display="block",e?(t.children.length>1&&(t.innerHTML="<div>"+t.innerHTML+"</div>"),this.scrollbars.push(new NATION.VerticalScrollbar(t,e,{enableMouseLock:this.options.enableMouseLock}))):this.scrollbars.push(null),this.__contentPanels[i].style.overflow="hidden",this.__contentPanels[i].style.display="none",this.__contentPanels[i].style.height=0},i.prototype.resize=function(){if(this.resizeTimer&&(clearTimeout(this.resizeTimer),this.resizeTimer=null),this.enabled&&this.scrollbars.length)for(var t=0,e=this.__contentPanels.length;e>t;t++)this.scrollbars[t]&&(this.openPanelID!==t&&(this.__contentPanels[t].style.height="auto",this.__contentPanels[t].style.display="block"),this.scrollbars[t].resize(),this.openPanelID!==t&&(this.__contentPanels[t].style.height=0,this.__contentPanels[t].style.display="none"))},i.prototype.onHeaderClicked=function(t){if(this.enabled){for(var e=-1,i=0,s=this.__clickableHeaders.length;s>i;i++)if(this.__clickableHeaders[i]===t.currentTarget){e=i;break}this.openPanelID>=0&&this.closePanel(this.openPanelID,!this.options.animateTransitions),this.openPanelID!==e?this.openPanel(e,!this.options.animateTransitions):this.openPanelID=-1,this.trigger(this.HEADER_CLICKED),t.preventDefault()}},i.prototype.onPanelCloseComplete=function(t){t=t.target?t.target:t,t.style.display="none",this.trigger(this.PANEL_CLOSE_COMPLETE)},i.prototype.onWindowResized=function(t){this.resizeTimer||(this.resizeTimer=setTimeout(this.resize.bind(this),20))},i.prototype.onPanelOpenComplete=function(t){this.options.maxPanelHeight<0&&this.__contentPanels[this.openPanelID].style.removeProperty("height"),this.trigger(this.PANEL_OPEN_COMPLETE)},i.prototype.onAutoScrollComplete=function(t){this.autoScrolling=!1,this.stopListeningForWindowScrolling()},i.prototype.onWindowScrolled=function(t){this.autoScrolling&&(this.autoScrolling=!1,this.jQueryMode?$(NATION.Utils.getPageElement()).stop():NATION.Animation.stop(NATION.Utils.getPageElement()),this.stopListeningForWindowScrolling())},t.NATION.Accordion=i}"undefined"==typeof t.NATION&&(t.NATION={}),s()}(window,document,void 0),function(t,e,i){"use strict";function s(){var e="NATION.Animation",i={"NATION.Utils":NATION.Utils};t.waitingDependencies=t.waitingDependencies||{};var n=!0;for(var r in i)if(!i[r]){t.waitingDependencies[e]={dependencies:i,callback:function(){s()}},n=!1;break}if(n){delete t.waitingDependencies[e],o();for(var a in t.waitingDependencies)for(r in t.waitingDependencies[a].dependencies)r===e&&t.waitingDependencies[a].callback()}}function o(){var i=function(){this.prioritiseJS=!1,this.transitionString="",this.transitionEndString="",this.checkCSSSupport(),this.activeAnimations=[],this.animRequest=null,this.UNITLESS_VALUES=["columnCount","fillOpacity","flexGrow","flexShrink","fontWeight","lineHeight","opacity","order","orphans","widows","zIndex","zoom"],this.unitRegex=/%|px|#|rgba|rgb|hsla|hsl|pt|em|rem|vh|vw|vmin|vmax|ex|ch|cm|mm|q|in|pc|transparent/i,this.colorUnitRegex=/#|rgba|rgb|hsla|hsl|transparent/gi};i.prototype.DEFAULT_EASING="linear",i.prototype.DEFAULT_DURATION=1e3,i.prototype.CSS3_SUPPORTED=!1,i.prototype.start=function(t,e,i,s){"function"==typeof i&&(s=i),i||(i={}),i&&s&&(i.complete=s),i.easing=i.easing||this.DEFAULT_EASING,i.duration=i.duration||this.DEFAULT_DURATION,i.delay=i.delay||0,(i.forcejs||i.useJS)&&(i.jsMode=!0),i.jsMode||this.CSS3_SUPPORTED&&this.cssAnimationOnPropertiesSupported(e)||(i.jsMode=!0);var n,r=[],a=[],l=0;if(t.length){for(var h=[],c=0,d=t.length;d>c;c++)h[c]=NATION.Utils.getDOMElement(t[c]);for(c=0;d>c;c++)this.stop(h[c]),a=this.preprocessProperties(h[c],e),i.stagger&&(l+=i.stagger,i.delay=l),n=new o(h[c],a,i,s),r.push(n),this.activeAnimations.push(n)}else t=NATION.Utils.getDOMElement(t),this.stop(t),a=this.preprocessProperties(t,e),n=new o(t,a,i,s),this.activeAnimations.push(n);this.animRequest||(this.animRequest=requestAnimationFrame(this.updateActiveAnimations.bind(this)))},i.prototype.stop=function(t){if(t.length){for(var e=[],i=0,s=t.length;s>i;i++)e[i]=NATION.Utils.getDOMElement(t[i]);for(i=0;s>i;i++)this.removeAnimation(e[i])}else t=NATION.Utils.getDOMElement(t),this.removeAnimation(t)},i.prototype.pause=function(t){var e=0,i=0;if(t.length){var s=[];for(i=t.length;i>e;e++)s[e]=NATION.Utils.getDOMElement(t[e]);t=s}else t=NATION.Utils.getDOMElement(t);for(e=0,i=this.activeAnimations.length;i>e;e++)(t.length&&this.inNodeList(this.activeAnimations[e].DOMElement,t)||this.activeAnimations[e].DOMElement===t)&&this.activeAnimations[e].pause()},i.prototype.resume=function(t){var e=0,i=0;if(t.length){var s=[];for(i=t.length;i>e;e++)s[e]=NATION.Utils.getDOMElement(t[e]);t=s}else t=NATION.Utils.getDOMElement(t);for(e=0,i=this.activeAnimations.length;i>e;e++)(t.length&&this.inNodeList(this.activeAnimations[e].DOMElement,t)||this.activeAnimations[e].DOMElement===t)&&this.activeAnimations[e].resume()},i.prototype.setJSMode=function(t){this.prioritiseJS=t},i.prototype.inNodeList=function(t,e){for(var i=0,s=e.length;s>i;i++)if(e[i]===t)return!0;return!1},i.prototype.ERROR_INVALID_TRANSFORM="NATION.Animation: The value '{{value}}' supplied for '{{transform}}' is invalid.",i.prototype.removeAnimation=function(t){for(var e=0,i=this.activeAnimations.length,s=[];i>e;e++)this.activeAnimations[e].DOMElement===t?this.activeAnimations[e].stop():s.push(this.activeAnimations[e]);this.activeAnimations=s},i.prototype.cssAnimationOnPropertiesSupported=function(t){var e=null;for(e in t)if(e.search(/scroll/g)>=0||t[e].toString().search("hsl")>=0)return!1;return!0},i.prototype.checkCSSSupport=function(){for(var t=e.createElement("div"),i=["","webkit","moz","o"],s="",o=0,n=i.length;n>o;o++)if(s=""===i[o]?"transition":i[o]+"Transition",s in t.style)return this.transitionString=s,""===i[o]?this.transitionEndString="transitionend":"webkit"===i[o]?this.transitionEndString="webkitTransitionEnd":"o"===i[o]&&(this.transitionEndString="oTransitionEnd"),void(this.CSS3_SUPPORTED=!0)},i.prototype.preprocessProperties=function(t,e){e=this.checkForPrefixes(e);var i=(Date.now(),""),s={},o=this.getCSSStartValues(t,e),n=!1;for(i in e){var r,a="";if(i.search(/transform/i)>=0&&i.toLowerCase().search(/origin/i)<0){var l=this.parseTransformValues(t,o[i],e[i]);s[i]={name:i,start:l.startValue,end:l.targetValue,targetString:l.targetString,startString:l.startString,multiValue:!1}}else{var h=!1,c=o[i].toString().trim(),d=e[i].toString().trim();if(c.search(this.colorUnitRegex)<0&&(c.search(" ")>0||c.search(",")>0||d.search(" ")>0||d.search(",")>0)){h=!0,c=c.replace(/, /g,",");var p=c.split(/,|\s/);d=d.replace(/, /g,",");var u=d.split(/,|\s/),_=0;if(p.length<u.length)for(var m=p.length,g=u.length;g>m;m++)_>p.length-1&&(_=0),p.push(p[_]),_++;if(u.length<p.length)for(var m=u.length,g=p.length;g>m;m++)_>u.length-1&&(_=0),u.push(u[_]),_++;var y,f,v=0,N=u.length,T=[],E=[],A=[];for(n=[];N>v;v++){y=p[0].search(/inherit|initial|unset/i)>=0?0:p[v],f=u[v],r=this.prepareProperty(t,i,y,f),T.push(r.startValue),E.push(r.targetValue),A.push(r.targetUnit);var O=r.targetUnit.match(this.colorUnitRegex);n.push(O&&O.length>0)}o[i]=T,e[i]=E,a=A}else r=this.prepareProperty(t,i,o[i],e[i]),o[i]=r.startValue,e[i]=r.targetValue,a=r.targetUnit,n=a.match(this.colorUnitRegex);s[i]={name:i,start:o[i],end:e[i],unit:a,color:n,multiValue:h,attribute:i.search(/scrollTop|scrollLeft/i)>=0}}}return s},i.prototype.prepareProperty=function(t,e,i,s){"left"===i||"top"===i?i=0:"right"!==i&&"bottom"!==i||(i="100%"),"left"===s||"top"===s?s=0:"right"!==s&&"bottom"!==s||(s="100%");var o=i.toString().match(this.unitRegex);o&&(o=o[0]),null==o&&(o="");var n=s.toString().match(this.unitRegex);
n&&(n=n[0]),null==n&&(n=""),"px"!=o||n||(n="px");var r=new RegExp(o+"| |\\(|\\)|%","gi");"transparent"!==o&&(i=i.toString().replace(r,"")),r=new RegExp(n+"| |\\(|\\)|%","gi"),"transparent"!==n&&(s=s.toString().replace(r,"")),"#"===o&&(i=this.expandHex(i)),"#"===n&&(s=this.expandHex(s));var a=e.search(/transform/i)<0;return o.match(this.colorUnitRegex)||n.match(this.colorUnitRegex)||(o!==n?(i=this.convertUnit(t,i,o,n,e,a),o=n):""===o&&""===n&&this.UNITLESS_VALUES.indexOf(e)<0&&(o=n="px")),o.match(this.colorUnitRegex)?n.search(/hsla|hsl/g)>-1?(i=this.convertColorToHSLA(i,o),o="hsla"):(i=this.convertColorToRGBA(i,o),o="rgba"):i=parseFloat(i),n.match(this.colorUnitRegex)?n.search(/hsla|hsl/g)>-1?(s=this.convertColorToHSLA(s,n),n="hsla"):(s=this.convertColorToRGBA(s,n),n="rgba"):s=parseFloat(s),{startValue:i,targetValue:s,startUnit:o,targetUnit:n}},i.prototype.expandHex=function(t){return 3===t.toString().length&&(t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,s){return e+e+i+i+s+s})),t},i.prototype.transformContains=function(t,e){for(var i=0,s=e.length;s>i;i++)if(e[i].attributeName===t)return i;return 0},i.prototype.parseTransformValues=function(t,e,i){var s=i;"none"===e&&(e="");var o=e;e=this.convertTransformString(e),i=this.convertTransformString(i);var n=0,r=i.length>e.length?i.length:e.length;if(1===e.length){var a=this.transformContains(e[0].attributeName,i);if(a)for(var l=e[0].attributeName;r>n;n++)i[n].attributeName!==l&&e.splice(n,0,this.prepareAutoTransformValue(i[n],!0))}if(n=0,e.length!==i.length)for(;r>n;n++)e[n]||(e[n]=this.prepareAutoTransformValue(i[n],!0));n=0,r=i.length>e.length?i.length:e.length;for(var h=i;r>n;n++)h[n]&&e[n].attributeName===h[n].attributeName||i.splice(n,0,this.prepareAutoTransformValue(e[n],!0));if(i.length>e.length)for(n=e.length,r=i.length;r>n;n++)e[n]=this.prepareAutoTransformValue(i[n],!0);n=0,r=i.length;for(var c={};r>n;n++)if(e[n].multiValue)for(var d=0,p=i.length;p>d;d++){var u=i[n].attributeName;"translate"!==u&&"translate3d"!==u||1===d&&(u="translateY"),e[n].unit[d]?(c=this.convertUnit(t,i[n].value[d],i[n].unit[d],e[n].unit[d],e[n].attributeName,!1),i[n].unit[d]=e[n].unit[d],i[n].value[d]=c):(c=this.convertUnit(t,e[n].value[d],e[n].unit[d],i[n].unit[d],i[n].attributeName,!1),e[n].unit[d]=i[n].unit[d],e[n].value[d]=c)}else e[n].unit!==i[n].unit&&(e[n].unit?(c=this.convertUnit(t,i[n].value,i[n].unit,e[n].unit,e[n].attributeName,!1),i[n].unit=e[n].unit,i[n].value=c):(c=this.convertUnit(t,e[n].value,e[n].unit,i[n].unit,i[n].attributeName,!1),e[n].unit=i[n].unit,e[n].value=c));return{startValue:e,targetValue:i,targetString:s,startString:o}},i.prototype.convertUnit=function(i,s,o,n,r,a){if(0==s||!s)return 0;var l=0;return r.search(/color/i)<0&&(l=r.search(/top|height|minHeight|maxHeight|translateY/g)>=0?a?i.parentNode.clientHeight:i.clientHeight:a?i.parentNode.clientWidth:i.clientWidth),"%"===n?"px"===o?s=s/l*100:"vh"===o?s=t.innerHeight*s/l*100:"vw"===o&&(s=t.innerWidth*s/l*100):"px"===n?"%"===o?s=s/100*l:"vh"===o?s=t.innerHeight*s:"vw"===o&&(s=t.innerWidth*s):"vw"===n?"px"===o?s/=t.innerWidth:"%"===o&&(s=s/100*l/t.innerWidth):"vh"===n&&("px"===o?s/=t.innerHeight:"%"===o&&(s=s/100*l/t.innerHeight)),"em"===n?"px"===o?s/=parseInt(getComputedStyle(i.parentNode,null).fontSize,10):"rem"===o&&(s=parseInt(getComputedStyle(i,null)[r],10)/parseInt(getComputedStyle(i.parentNode,null).fontSize,10)):"rem"===n&&("px"===o?s/=parseInt(getComputedStyle(e.body,null).fontSize,10):"em"===o&&(s=parseInt(getComputedStyle(i,null)[r],10)/parseInt(getComputedStyle(e.body,null).fontSize,10))),"rad"===n?"deg"===o?s*=Math.PI/180:"grad"===o?s=s/400*(2*Math.PI):"turn"===o&&(s*=2*Math.PI):"deg"===n?"rad"===o?s*=180/Math.PI:"grad"===o?s=s/400*360:"turn"===o&&(s=360*s):"grad"===n?"rad"===o?s=s/(2*Math.PI)*400:"deg"===o?s=s/360*400:"turn"===o&&(s=400*s):"turn"===n&&("rad"===o?s/=2*Math.PI:"grad"===o?s/=400:"deg"===o&&(s/=360)),s},i.prototype.hexToRGBA=function(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(t,e,i,s){return e+e+i+i+s+s});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return parseInt(i[1],16)+","+parseInt(i[2],16)+","+parseInt(i[3],16)+",1"},i.prototype.rgbToRGBA=function(t){return t+=",1"},i.prototype.hslToRGBA=function(t){t=t.split(",");var e=t[0],i=t[1],s=t[2];e=0===e?0:e/360,i=parseInt(i,10)/100,s=parseInt(s,10)/100;var o=0,n=0,r=0;if(0===i)o=n=r=1;else{var a=s+i-s*i,l=2*s-a;o=this.hueToRGB(l,a,e+1/3),n=this.hueToRGB(l,a,e),r=this.hueToRGB(l,a,e-1/3)}return Math.round(255*o)+","+Math.round(255*n)+","+Math.round(255*r)+",1"},i.prototype.HSLToHSLA=function(t){return t+=",1"},i.prototype.RGBAToHSLA=function(t){var e=this.RGBToHSLA(t).split(",");return e[3]=t.split(",")[3],e.join(",")},i.prototype.RGBToHSLA=function(t){t=t.split(",");var e,i,s=t[0]/255,o=t[1]/255,n=t[2]/255,r=Math.max(s,o,n),a=Math.min(s,o,n),l=(r+a)/2;if(r===a)e=i=0;else{var h=r-a;i=l>.5?h/(2-r-a):h/(r+a),r===s?e=(o-n)/h+(n>o?6:0):r===o?e=(n-s)/h+2:r===n&&(e=(s-o)/h+4),e/=6}return e*=360,i*=100,l*=100,e+","+i+"%,"+l+"%,1"},i.prototype.hexToHSLA=function(t){return t=this.hexToRGBA(t),t=this.RGBAToHSLA(t)},i.prototype.hueToRGB=function(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+(e-t)*(2/3-i)*6:t},i.prototype.hslaToRGBA=function(t){var e=t.split(",");return e=e[0]+","+e[1]+","+e[2],e=this.hslToRGBA(e).split(","),e[3]=t.split(",")[3],e[0]+","+e[1]+","+e[2]+","+e[3]},i.prototype.prepareAutoTransformValue=function(t,e){var i={attributeName:t.attributeName,multiValue:t.multiValue,unit:t.unit,value:t.value};if(e){var s=0,o=0,n=i.attributeName.search("scale")>=0?1:0;if(i.multiValue)for(s=0,o=i.value.length,i.value=[];o>s;s++)i.value.push(n);else i.value=n}return i},i.prototype.convertTransformString=function(t){t=t.trim().replace(/, | ,/g,",").split(" ");var e,i,s,o,n=0,r=t.length,a=[],l=!1;if(""===t.toString().replace(/\s/g,"")||"none"===t)return a;for(;r>n;n++){if(t[n]=t[n].replace(/\s/g,""),o=t[n].indexOf("("),e=t[n].substr(0,o),s=t[n].substr(o+1,t[n].indexOf(")")-(o+1)),l=s.indexOf(",")>-1){s=s.split(",");var h=0,c=s.length;for(i=[];c>h;h++)i.push(s[h].replace(/\d+|-|\./g,"").toLowerCase()),s[h]=parseFloat(s[h].replace(i[h],""))}else i=s.replace(/\d+|-|\./g,"").toLowerCase(),s=parseFloat(s.replace(i,""));a.push({attributeName:e,value:s,multiValue:l,unit:i})}return a},i.prototype.getCSSStartValues=function(i,s){var o,n,r={},a=getComputedStyle(i,null);for(var l in s){n=!1,l.search(/scrollLeft|scrollTop/i)>=0?(n=!0,i!==e.documentElement&&i!==e&&i!==t&&i!==e.body||(i=NATION.Utils.getPageElement()),o=i[l]):(o=a[l],"background"===l&&s[l].search(" ")&&s[l].search(this.colorUnitRegex)>=0&&(o=a.backgroundColor));var h=o.toString().match(this.unitRegex);h&&(h=h[0]),null==h&&(h="");var c=s[l].toString().match(this.unitRegex);if(c&&(c=c[0]),null==c&&(c=""),"px"!=h||c||(c="px"),i.style&&i.style[l])r[l]=i.style[l];else if((l.search(/transform/i)<0||l.search(/origin/i)>=0)&&h==c)n?r[l]=o:h?r[l]=a[l]:r[l]=parseFloat(a[l]);else if(l.search(/transform/i)>=0&&l.search(/origin/i)<0){var d=this.isMatrixIdentity(a[l])||"none"===a[l]||""===a[l];d?r[l]="":(i.style[l]="none",r[l]="")}else r[l]=o}return r},i.prototype.isMatrixIdentity=function(t){return t.search("matrix3d")?"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"===t:"matrix(1,0,0,1,0,0)"===t||"matrix(1,0,0,0,1,0,0,0,1)"===t},i.prototype.checkForPrefixes=function(t){var e,i,s={};for(e in t)i=t[e],e=NATION.Utils.getPrefixedName(e),s[e]=i;return s},i.prototype.calculateTransformProgress=function(t,e){for(var i,s,o,n=0,r=t.end.length,a="",l=0,h=0;r>n;n++)if(0!==n&&(a+=" "),t.end[n].multiValue){for(l=0,h=t.end[n].value.length,o=t.end[n].attributeName,a+=o+"(";h>l;l++)s=t.start[n].value[l]+(t.end[n].value[l]-t.start[n].value[l])*e,i=t.end[n].unit[l],0!==l&&(a+=", "),a+=s+i;a+=")"}else s=t.start[n].value+(t.end[n].value-t.start[n].value)*e,i=t.end[n].unit,o=t.end[n].attributeName,a+=o+"("+s+i+")";return a},i.prototype.calculateColorProgress=function(t,e,i,s){e=e.toString().split(","),i=i.split(",");for(var o=0,n=e.length;n>o;o++)e[o]=parseFloat(e[o]),i[o]=parseFloat(i[o]);var r=e[3]+t*(i[3]-e[3]);return"rgba"===s?"rgba("+Math.round(e[0]+t*(i[0]-e[0]))+","+Math.round(e[1]+t*(i[1]-e[1]))+","+Math.round(e[2]+t*(i[2]-e[2]))+","+r+")":"hsla("+Math.round(e[0]+t*(i[0]-e[0]))+","+Math.round(e[1]+t*(i[1]-e[1]))+"%,"+Math.round(e[2]+t*(i[2]-e[2]))+"%,"+r+")"},i.prototype.convertColorToRGBA=function(t,e){return"transparent"===t.toLowerCase()?t="0,0,0,0":"#"===e?t=this.hexToRGBA(t):"rgb"===e?t=this.rgbToRGBA(t):"hsl"==e?t=this.hslToRGBA(t):"hsla"===e&&(t=this.hslaToRGBA(t)),t},i.prototype.convertColorToHSLA=function(t,e){return"transparent"===t.toLowerCase()?t="0,0,0,0":"#"===e?t=this.hexToHSLA(t):"rgb"===e?t=this.RGBToHSLA(t):"rgba"===e?t=this.RGBAToHSLA(t):"hsl"===e&&(t=this.HSLToHSLA(t)),t},i.prototype.updateActiveAnimations=function(){for(var t=0,e=[];t<this.activeAnimations.length;t++)this.activeAnimations[t]&&(this.activeAnimations[t].update(),this.activeAnimations[t]&&(this.activeAnimations[t].complete||e.push(this.activeAnimations[t])));this.activeAnimations=e,this.animRequest=requestAnimationFrame(this.updateActiveAnimations.bind(this))};var s=function(){this.EASING_METHODS={linear:{x1:0,y1:0,x2:1,y2:1},easeInSine:{x1:.47,y1:0,x2:.745,y2:.715},easeOutSine:{x1:.39,y1:.575,x2:.565,y2:1},easeInOutSine:{x1:.445,y1:.05,x2:.55,y2:.95},easeInQuad:{x1:.55,y1:.085,x2:.68,y2:.53},easeOutQuad:{x1:.25,y1:.46,x2:.45,y2:.94},easeInOutQuad:{x1:.455,y1:.03,x2:.515,y2:.955},easeInCubic:{x1:.55,y1:.055,x2:.675,y2:.19},easeOutCubic:{x1:.215,y1:.61,x2:.355,y2:1},easeInOutCubic:{x1:.645,y1:.045,x2:.355,y2:1},easeInQuart:{x1:.895,y1:.03,x2:.685,y2:.22},easeOutQuart:{x1:.165,y1:.84,x2:.44,y2:1},easeInOutQuart:{x1:.77,y1:0,x2:.175,y2:1},easeInQuint:{x1:.755,y1:.05,x2:.855,y2:.06},easeOutQuint:{x1:.23,y1:1,x2:.32,y2:1},easeInOutQuint:{x1:.86,y1:0,x2:.07,y2:1},easeInExpo:{x1:.95,y1:.05,x2:.795,y2:.035},easeOutExpo:{x1:.19,y1:1,x2:.22,y2:1},easeInOutExpo:{x1:1,y1:0,x2:0,y2:1},easeInCirc:{x1:.6,y1:.04,x2:.98,y2:.335},easeOutCirc:{x1:.075,y1:.82,x2:.165,y2:1},easeInOutCirc:{x1:.785,y1:.135,x2:.15,y2:.86}},this.getEasingObject=function(t){var e={};return t.search("bezier")>-1?(t=t.replace("cubic-bezier(",""),t=t.replace(")",""),t=t.replace(/ /g,""),t=t.split(","),e.x1=parseFloat(t[0]),e.y1=parseFloat(t[1]),e.x2=parseFloat(t[2]),e.y2=parseFloat(t[3])):e=this.EASING_METHODS[t],e},this.getFlippedEasingObject=function(t){var e=this.halfUnitTurn({x:t.x1,y:t.y1},1,1),i=this.halfUnitTurn({x:t.x2,y:t.y2},1,1);return{x1:e.x,y1:e.y,x2:i.x,y2:i.y}},this.halfUnitTurn=function(t,e,i){var s=e/2,o=i/2;return{x:s-(t.x-s),y:o-(t.y-o)}},this.easeOnBezierCurve=function(t,e){return t.x1===t.y1&&t.x2===t.y2?e:this.calculateBezier(this.getPositionOnCurve(t,e),t.y1,t.y2)},this.getPositionOnCurve=function(t,e){for(var i=e,s=0,o=0,n=0;4>s;s++){if(o=this.getBezierSlope(i,t.x1,t.x2),0==o)return i;n=this.calculateBezier(i,t.x1,t.x2)-e,i-=n/o}return i},this.calculateBezier=function(t,e,i){return((this.calculateBezierPropA(e,i)*t+this.calculateBezierPropB(e,i))*t+this.calculateBezierPropC(e))*t},this.getBezierSlope=function(t,e,i){return 3*this.calculateBezierPropA(e,i)*t*t+2*this.calculateBezierPropB(e,i)*t+this.calculateBezierPropC(e)},this.calculateBezierPropA=function(t,e){return 1-3*e+3*t},this.calculateBezierPropB=function(t,e){return 3*e-6*t},this.calculateBezierPropC=function(t){return 3*t}};s=new s;var o=function(t,e,i,o){this.DOMElement=t,this.properties=e,this.options=i,this.callback=o,this.easingMethod=s.getEasingObject(i.easing),this.startTime=Date.now()+parseInt(this.options.delay,10),this.endTime=this.startTime+i.duration,this.currentTime=this.startTime,this.progress=0,this.reversing=!1,this.complete=!1,this.paused=!1,this.remainingDelay=0;var n=this;if(!this.options.jsMode){var n=this;this.transitionCallback=function(t){n.onCycleComplete(t)}}this.options.bounce&&this.options.flipBounceEasing&&(this.normalEasingMethod=this.easingMethod,this.flippedEasingMethod=s.getFlippedEasingObject(this.easingMethod)),this.options.delay?this.startDelayTimer():this.options.jsMode||this.startCSSAnimation(this.properties)};o.prototype.startDelayTimer=function(){this.delayActive=!0;var t=this;this.delayTimer=setTimeout(function(){t.delayActive=!1,t.remainingDelay=0,t.options.jsMode||t.startCSSAnimation(t.properties)},this.remainingDelay>0?this.remainingDelay:this.options.delay)},o.prototype.startCSSAnimation=function(t,e){e=e||0;var i="cubic-bezier("+this.easingMethod.x1+","+this.easingMethod.y1+","+this.easingMethod.x2+","+this.easingMethod.y2+")";this.progress=-e/this.options.duration;var s=this.createCSSState(1);this.DOMElement.style[NATION.Animation.transitionString]="all "+parseInt(this.options.duration,10)+"ms "+i+" "+parseInt(e,10)+"ms",NATION.Utils.setStyle(this.DOMElement,s)},o.prototype.createCSSState=function(t){var e={},i=0;for(var s in this.properties)if(!this.properties[s].attribute)if(s.search(/transform/i)>=0&&s.search(/origin/i)<0)t>=1?e[s]=this.properties[s].targetString:(i=NATION.Animation.calculateTransformProgress(this.properties[s],t),e[s]=i);else if(this.properties[s].multiValue){var o=0,n=this.properties[s].end.length;for(i="";n>o;o++){if(o>0&&(i+=" "),this.properties[s].color[o])i+=NATION.Animation.calculateColorProgress(t,this.properties[s].start[o],this.properties[s].end[o],this.properties[s].unit[o]);else{var r=this.properties[s].start[o]+t*(this.properties[s].end[o]-this.properties[s].start[o]);s.search(/transform/i)>=0&&s.search(/origin/i)>=0&&(r=Math.floor(r)),i+=r+this.properties[s].unit[o]}e[s]=i}}else this.properties[s].color?(i=NATION.Animation.calculateColorProgress(t,this.properties[s].start,this.properties[s].end,this.properties[s].unit),e[s]=i):(i=this.properties[s].start+t*(this.properties[s].end-this.properties[s].start)+this.properties[s].unit,e[s]=i);return e},o.prototype.updateElementAttributes=function(t){var e;for(var i in this.properties)this.properties[i].attribute&&(e=this.properties[i].start+t*(this.properties[i].end-this.properties[i].start),this.DOMElement[i]=e)},o.prototype.update=function(){if(!this.delayActive&&!this.paused){if(this.currentTime=Date.now(),this.progress=(this.currentTime-this.startTime)/(this.endTime-this.startTime),this.options.jsMode){var t=0;t=s.easeOnBezierCurve(this.easingMethod,this.progress>1?1:this.progress);var e=this.createCSSState(t);NATION.Utils.setStyle(this.DOMElement,e),this.updateElementAttributes(t)}this.options.progress&&this.options.progress({target:this.DOMElement,currentTarget:this.DOMElement,cancelable:!1,defaultPrevented:!1,eventPhase:2,timestamp:this.currentTime,isTrusted:!1},this.progress>1?1:this.progress),this.progress>=1?this.onCycleComplete():this.complete=!1,this.complete&&(this.options.loop||this.options.bounce)&&(this.complete=!1,this.progress=0),this.complete&&(this.stop(),this.onAnimationComplete())}},o.prototype.stop=function(){if(this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null),!this.options.jsMode&&this.progress<1){var t=s.easeOnBezierCurve(this.easingMethod,this.progress>1?1:this.progress),e=this.createCSSState(t);NATION.Utils.setStyle(this.DOMElement,e)}this.options.jsMode||this.DOMElement.style.removeProperty(NATION.Animation.transitionString),this.complete=!0},o.prototype.pause=function(){if(this.paused=!0,this.delayTimer){clearTimeout(this.delayTimer),this.delayTimer=null;var t=Date.now(),e=t-this.startTime;this.remainingDelay=this.options.delay-e}if(!this.options.jsMode&&this.progress>0){this.DOMElement.style.removeProperty(NATION.Animation.transitionString);var i=s.easeOnBezierCurve(this.easingMethod,this.progress>1?1:this.progress);NATION.Utils.setStyle(this.DOMElement,this.createCSSState(i))}},o.prototype.resume=function(){if(this.paused=!1,this.delayActive)this.startDelayTimer();else if(this.currentTime=Date.now(),this.startTime=this.currentTime-this.options.duration*this.progress,this.endTime=this.startTime+this.options.duration,!this.options.jsMode){var t=this.createCSSState(0);NATION.Utils.setStyle(this.DOMElement,t);s.easeOnBezierCurve(this.easingMethod,this.progress>1?1:this.progress);this.startCSSAnimation(this.properties,-(this.progress*this.options.duration))}},o.prototype.onCycleComplete=function(t){if(this.currentTime=Date.now(),this.options.loop||this.options.bounce){this.options.jsMode&&(this.complete=!0);var e=this.progress<1?0:this.progress%1;this.startTime=this.currentTime-e*this.options.duration,this.endTime=this.startTime+this.options.duration;var i=-(e*this.options.duration);if(this.options.bounce){var s="";if(this.progress%2>=1||this.progress<1&&!this.options.jsMode){for(var o in this.properties)s=this.properties[o].start,this.properties[o].start=this.properties[o].end,this.properties[o].end=s,s=this.properties[o].targetString,o.search(/transform/i)>=0&&o.search(/origin/i)<0&&(this.properties[o].targetString=this.properties[o].startString,this.properties[o].startString=s);this.options.flipBounceEasing&&(this.reversing=!this.reversing,this.easingMethod=this.reversing?this.flippedEasingMethod:this.normalEasingMethod)}this.options.jsMode||(this.complete=!1,this.DOMElement.style[NATION.Animation.transitionString]="",NATION.Utils.setStyle(this.DOMElement,this.createCSSState(e)),this.DOMElement.offsetHeight,this.startCSSAnimation(this.properties,i))}else this.options.jsMode||(this.DOMElement.style[NATION.Animation.transitionString]="",NATION.Utils.setStyle(this.DOMElement,this.createCSSState(0)),this.DOMElement.offsetHeight,this.options.jsMode||(this.complete=!1,this.startCSSAnimation(this.properties,i)));this.progress=0,this.options.loopComplete&&this.options.loopComplete({target:this.DOMElement,currentTarget:this.DOMElement,cancelable:!1,defaultPrevented:!1,eventPhase:2,timestamp:this.currentTime,isTrusted:!1})}else this.complete=!0;t&&t.preventDefault&&t.preventDefault()},o.prototype.onAnimationComplete=function(t){this.options.complete&&this.options.complete({target:this.DOMElement,currentTarget:this.DOMElement,cancelable:!1,defaultPrevented:!1,eventPhase:2,timestamp:this.currentTime,isTrusted:!1})},t.NATION.Animation=new i}"undefined"==typeof t.NATION&&(t.NATION={}),s()}(window,document,void 0),function(t,e,i){"use strict";function s(){var s=function(){this.wheelEventName="",this.eventHandlers={}};s.prototype.addListener=function(t,e){if(!t)throw new Error(this.ERROR_MISSING_EVENT_NAME);t=t.split(" ");for(var i=0,s=t.length;s>i;i++){if(!e)throw new Error(this.ERROR_MISSING_CALLBACK.replace("{{eventName}}",t[i]));t[i]=this.normalizeMouseWheelEvent(t[i]),"undefined"==typeof this.eventHandlers[t[i]]&&(this.eventHandlers[t[i]]=[]),this.eventHandlers[t[i]].push(e)}},s.prototype.removeListener=function(t,e){if(!t)throw new Error(this.ERROR_MISSING_EVENT_NAME);t=t.split(" ");for(var i=0,s=t.length;s>i;i++)if(t[i]=this.normalizeMouseWheelEvent(t[i]),this.eventHandlers[t[i]]instanceof Array){if(!e)return void(this.eventHandlers[t[i]]=[]);for(var i=0,s=this.eventHandlers[t[i]].length;s>i;i++)String(this.eventHandlers[t[i]])===String(e)&&this.eventHandlers[t[i]].splice(i,1)}},s.prototype.trigger=function(t){if(!t)throw new Error(this.ERROR_MISSING_EVENT_NAME);t=arguments.length>1?Array.prototype.slice.call(arguments,0):t.split(" ");for(var e,i,s=0,o=t.length,n=[],r=0;o>s;s++)if(t[s]=this.normalizeMouseWheelEvent(t[s]),n=this.eventHandlers[t[s]],"undefined"!=typeof n)for(e=n.length,r=0;e>r;r++)n[r]&&(i={target:this,currentTarget:this,type:t[s],bubbles:!1,cancelable:!1,defaultPrevented:!1,timestamp:Date.now(),isTrusted:!1},n[r].apply(this,[i]))},s.prototype.ERROR_MISSING_EVENT_NAME="NATION.EventDispatcher: The argument 'eventName' is required",s.prototype.ERROR_MISSING_CALLBACK="NATION.EventDispatcher: The 'callback' argument is required to listen for event '{{eventName}}'",s.prototype.normalizeMouseWheelEvent=function(t){return t.search(/mousewheel|wheel|DOMMouseScroll/g)>=0?(this.wheelEventName||("onwheel"in e.createElement("div")?this.wheelEventName="wheel":e.onmousewheel!==i?this.wheelEventName="mousewheel":this.wheelEventName="DOMMouseScroll"),this.wheelEventName):t.replace(/ /g,"")},t.NATION.EventDispatcher=s}"undefined"==typeof t.NATION&&(t.NATION={}),s();var o="NATION.EventDispatcher";t.waitingDependencies=t.waitingDependencies||{};for(var n in t.waitingDependencies)for(var r in t.waitingDependencies[n].dependencies)r===o&&t.waitingDependencies[n].callback()}(window,document,void 0),function(t,e,i){"use strict";function s(){var e="NATION.MediaControls",i={"NATION.Utils":NATION.Utils,"NATION.EventDispatcher":NATION.EventDispatcher};t.waitingDependencies=t.waitingDependencies||{};var n=!0;for(var r in i)if(!i[r]){t.waitingDependencies[e]={dependencies:i,callback:function(){s()}},n=!1;break}if(n){delete t.waitingDependencies[e],o();for(var a in t.waitingDependencies)for(r in t.waitingDependencies[a].dependencies)r===e&&t.waitingDependencies[a].callback()}}function o(){var i=function(t,e){if(NATION.EventDispatcher.call(this),this.__DOMElement=NATION.Utils.getDOMElement(t),this.jQueryMode="undefined"!=typeof jQuery&&"undefined"==typeof NATION.Animation,this.options={fade:!1,slide:!1,delay:3e3,duration:300,easing:"linear",mobileMode:!1,handlePositioning:"outside"},e)for(var i in e)this.options[i]=e[i];if(this.__controls=this.__DOMElement.querySelector(".js-controls, .controls"),!this.__controls)throw new Error(this.ERROR_MISSING_ELEMENT.replace("{{className}}",".js-controls"));this.__progressBar=this.__DOMElement.querySelector(".js-progress-bar, .progress-bar"),this.__playButton=this.__DOMElement.querySelector(".js-play-button, .play-button"),this.__videoOverlay=this.__DOMElement.querySelector(".js-video-overlay, .video-overlay"),this.__muteButton=this.__DOMElement.querySelector(".js-mute-button, .mute-button"),this.__fullScreenButton=this.__DOMElement.querySelector(".js-full-screen-button, .full-screen-button"),this.__currentTimeDisplay=this.__DOMElement.querySelector(".js-current-time, .current-time"),this.__durationDisplay=this.__DOMElement.querySelector(".js-duration, .duration"),this.controlsTimer=null,this.listeningForMouseMove=!1,this.controlsShowing=!0,this.resizeTimer=null,this.height=0,this.lastMouseY=0,this.playActive=0,this.options.slide||this.options.fade||(this.options.fade=!0),this.__progressBar&&this.createProgressBar(),this.options.mobileMode?(this.__controls.style.display="none",this.createMobileListeners()):this.createListeners(),this.resize()};i.prototype=Object.create(NATION.EventDispatcher.prototype),i.prototype.constructor=i,i.prototype.PLAY_CLICKED="PlayClicked",i.prototype.PAUSE_CLICKED="PauseClicked",i.prototype.MUTE_CLICKED="MuteClicked",i.prototype.UNMUTE_CLICKED="UnMuteClicked",i.prototype.PROGRESS_CLICKED="ProgressClicked",i.prototype.ENTER_FULL_SCREEN_CLICKED="EnterFullScreenClicked",i.prototype.EXIT_FULL_SCREEN_CLICKED="ExitFullScreenClicked",i.prototype.HANDLE_MOUSE_DOWN="HandleMouseDown",i.prototype.HANDLE_DRAGGED="HandleDragged",i.prototype.HANDLE_RELEASED="HandleReleased",i.prototype.OVERLAY_HIDDEN="OverlayHidden",i.prototype.setProgress=function(t){this.progressBar&&!this.progressBar.getHandleDragInProgress()&&this.progressBar.setProgress(t)},i.prototype.setDisplayedDuration=function(t){this.__durationDisplay&&(this.__durationDisplay.innerHTML=t)},i.prototype.setDisplayedCurrentTime=function(t){this.__currentTimeDisplay&&(this.__currentTimeDisplay.innerHTML=t)},i.prototype.setLoaded=function(t,e){this.progressBar&&this.progressBar.setLoaded(t,e)},i.prototype.getRequestedPercentage=function(){return this.progressBar?this.progressBar.getRequestedPercentage():0},i.prototype.getControlsShowing=function(){return this.controlsShowing},i.prototype.showPlayButton=function(){this.playActive=!1,this.startHideTimer(),this.__playButton.className.search("active")>=0&&(this.__playButton.className=this.__playButton.className.replace(/ active|active/g,"")),this.__videoOverlay&&this.__videoOverlay.className.search("active")>=0&&(this.__videoOverlay.className=this.__videoOverlay.className.replace(/ active|active/g,""))},i.prototype.showPauseButton=function(){this.playActive=!0,this.startHideTimer(),this.__playButton.className.search("active")<0&&(this.__playButton.className+=" active"),this.__videoOverlay&&this.__videoOverlay.className.search("active")<0&&(this.__videoOverlay.className+=" active")},i.prototype.show=function(){this.controlsShowing=!0,this.jQueryMode?this.options.fade?$(this.__controls).stop().fadeIn({duration:this.options.duration,easing:this.options.easing}):this.options.slide?$(this.__controls).stop().animate({bottom:0},this.options.duration,this.options.easing):this.__controls.style.display="block":this.options.fade?NATION.Animation.start(this.__controls,{opacity:1},{duration:this.options.duration,easing:this.options.easing}):this.options.slide?NATION.Animation.start(this.__controls,{bottom:0},{duration:this.options.duration,easing:this.options.easing}):this.__controls.style.display="block"},i.prototype.hide=function(){this.controlsShowing=!1,this.jQueryMode?this.options.fade?$(this.__controls).stop().fadeOut({duration:this.options.duration,easing:this.options.easing}):this.options.slide?$(this.__controls).stop().stop().animate({bottom:-this.height},this.options.duration,this.options.easing):this.__controls.style.display="none":this.options.fade?NATION.Animation.start(this.__controls,{opacity:0},{duration:this.options.duration,easing:this.options.easing}):this.options.slide?NATION.Animation.start(this.__controls,{bottom:-this.height},{duration:this.options.duration,easing:this.options.easing}):this.__controls.style.display="none"},i.prototype.startAutoHiding=function(){this.startHideTimer()},i.prototype.showLargePlayButton=function(){this.__videoOverlay&&(this.__videoOverlay.style.display="block")},i.prototype.hideLargePlayButton=function(){this.__videoOverlay&&(this.__videoOverlay.style.display="none")},i.prototype.showMuteButton=function(){var t=this.__muteButton.className;t.search("active")>=0&&(t=t.replace(/ active|active/g,"")),this.__muteButton.className=t},i.prototype.showUnMuteButton=function(){var t=this.__muteButton.className;t.search("active")<0&&(t+=" active"),this.__muteButton.className=t},i.prototype.ERROR_MISSING_ELEMENT="NATION.video.Controls: Selector is missing a child with class name '{{className}}'.",i.prototype.createProgressBar=function(){this.progressBar=new NATION.ProgressBar(this.__progressBar,this.options.handlePositioning)},i.prototype.createListeners=function(){if(this.__playButton.addEventListener("click",this.onPlayButtonClicked.bind(this)),this.__videoOverlay&&this.__videoOverlay.addEventListener("click",this.onPlayButtonClicked.bind(this)),this.__muteButton&&this.__muteButton.addEventListener("click",this.onMuteButtonClicked.bind(this)),this.__fullScreenButton){this.__fullScreenButton.addEventListener("click",this.onFullScreenButtonClicked.bind(this));var i=["fullscreenchange","msfullscreenchange","webkitfullscreenchange","mozfullscreenchange"];for(var s in i)e.addEventListener(i[s],this.onFullScreenChange.bind(this))}(this.options.slide||this.options.fade)&&this.__controls.addEventListener("mouseleave",this.onMouseLeave.bind(this)),this.progressBar&&(this.progressBar.addListener(this.progressBar.CLICKED,this.onProgressBarClicked.bind(this)),this.progressBar.addListener(this.progressBar.HANDLE_MOUSE_DOWN,this.onHandleMouseDown.bind(this)),this.progressBar.addListener(this.progressBar.HANDLE_RELEASED,this.onHandleReleased.bind(this)),this.progressBar.addListener(this.progressBar.HANDLE_DRAGGED,this.onHandleDragged.bind(this))),t.addEventListener("resize",this.onWindowResized.bind(this))},i.prototype.createMobileListeners=function(){this.__videoOverlay&&this.__videoOverlay.addEventListener("click",this.onMobileOverlayClicked.bind(this))},i.prototype.startHideTimer=function(){(this.options.slide||this.options.fade)&&(this.listeningForMouseMove||(this.__DOMElement.addEventListener("mousemove",this.onMouseMoved.bind(this)),this.listeningForMouseMove=!0),this.restartTimer())},i.prototype.restartTimer=function(){this.controlsTimer&&clearTimeout(this.controlsTimer),this.controlsTimer=setTimeout(this.onControlsTimerTicked.bind(this),this.options.delay)},i.prototype.setNewHandlePosition=function(t){this.progressBar.setNewHandlePosition(t)},i.prototype.onHandleMouseDown=function(){this.trigger(this.HANDLE_MOUSE_DOWN)},i.prototype.onHandleDragged=function(t){this.trigger(this.HANDLE_DRAGGED)},i.prototype.onHandleReleased=function(t){this.trigger(this.HANDLE_RELEASED)},i.prototype.onMouseMoved=function(t){this.hideTimer&&(clearTimeout(this.hideTimer),this.hideTimer=null);var e=t.pageY-NATION.Utils.getOffset(this.__DOMElement).top,i=this.__DOMElement.offsetHeight;e!==this.lastMouseY&&!this.controlsShowing&&i>e&&e>0&&this.show(),this.lastMouseY=e,this.restartTimer()},i.prototype.onMouseLeave=function(t){if(this.playActive){var e=t.pageY-NATION.Utils.getOffset(this.__DOMElement).top;this.lastMouseY=e,this.hideTimer&&clearTimeout(this.hideTimer),this.hideTimer=setTimeout(this.hide.bind(this),this.options.delay)}},i.prototype.onPlayButtonClicked=function(t){var e=this.__playButton.className,i="";this.__videoOverlay&&(i=this.__videoOverlay.className),e.search("active")>=0?(e=e.replace(/ active|active/g,""),this.__videoOverlay&&(i=i.replace(/ active|active/g,"")),this.controlsTimer&&clearTimeout(this.controlsTimer),this.playActive=!1,this.onPaused(),this.show(),this.trigger(this.PAUSE_CLICKED)):(e+=" active",this.__videoOverlay&&(i+=" active"),(this.options.fade||this.options.slide)&&this.startHideTimer(),this.playActive=!0,this.trigger(this.PLAY_CLICKED)),this.__playButton.className=e,this.show(),this.__videoOverlay&&(this.__videoOverlay.className=i),t.stopPropagation(),t.preventDefault()},i.prototype.onMuteButtonClicked=function(t){var e=this.__muteButton.className;e.search("active")>=0?(e=e.replace(/ active|active/g,""),this.trigger(this.UNMUTE_CLICKED)):(e+=" active",this.trigger(this.MUTE_CLICKED)),this.__muteButton.className=e,t.stopPropagation(),t.preventDefault()},i.prototype.onFullScreenButtonClicked=function(t){var e=this.__fullScreenButton.className;e.search("active")>=0?(e=e.replace(/ active|active/g,""),this.trigger(this.EXIT_FULL_SCREEN_CLICKED)):(e+=" active",this.trigger(this.ENTER_FULL_SCREEN_CLICKED)),this.__fullScreenButton.className=e,t.stopPropagation(),t.preventDefault()},i.prototype.onProgressBarClicked=function(t){this.trigger(this.PROGRESS_CLICKED)},i.prototype.onControlsTimerTicked=function(t){!this.progressBar.getHandleDragInProgress()&&this.playActive&&this.controlsShowing&&this.lastMouseY<this.__DOMElement.offsetHeight-this.__controls.offsetHeight&&(this.controlsTimer&&clearTimeout(this.controlsTimer),this.hide())},i.prototype.onPaused=function(t){this.playActive=!1,this.controlsTimer&&clearTimeout(this.controlsTimer),this.listeningForMouseMove=!1,this.handler_MouseMove&&this.__DOMElement.removeEventListener("mousemove",this.handler_MouseMove)},i.prototype.onMobileOverlayClicked=function(t){this.__DOMElement.style.display="none",this.trigger(this.OVERLAY_HIDDEN),t.stopPropagation(),t.preventDefault()},i.prototype.resize=function(t){this.resizeTimer&&(clearTimeout(this.resizeTimer),this.resizeTimer=null),this.height=this.__controls.clientHeight},i.prototype.onWindowResized=function(t){this.resizeTimer||(this.resizeTimer=setTimeout(this.resize.bind(this),20))},i.prototype.onFullScreenChange=function(t){var i=e.fullscreenElement||e.msFullscreenElement||e.webkitFullscreenElement||e.webkitCurrentFullScreenElement||e.mozFullScreenElement;if(!i){var s=this.__fullScreenButton.className;s.search("active")&&(s=s.replace(/ active|active/g,""),this.__fullScreenButton.className=s)}},t.NATION.MediaControls=i}"undefined"==typeof t.NATION&&(t.NATION={}),"undefined"==typeof t.NATION.video&&(t.NATION.video={}),s()}(window,document,void 0),function(t,e,i){"use strict";function s(){var e="NATION.ProgressBar",i={"NATION.Utils":NATION.Utils,"NATION.EventDispatcher":NATION.EventDispatcher
};t.waitingDependencies=t.waitingDependencies||{};var n=!0;for(var r in i)if(!i[r]){t.waitingDependencies[e]={dependencies:i,callback:function(){s()}},n=!1;break}if(n){delete t.waitingDependencies[e],o();for(var a in t.waitingDependencies)for(r in t.waitingDependencies[a].dependencies)r===e&&t.waitingDependencies[a].callback()}}function o(){var i=function(t,e){NATION.EventDispatcher.call(this),this.handlePositioning=e,e||(this.handlePositioning="outside"),this.__DOMElement=NATION.Utils.getDOMElement(t),this.__hitArea=this.__DOMElement.querySelector(".js-hitarea, .hitarea"),this.__handle=this.__DOMElement.querySelector(".js-handle, .handle"),this.__progressElement=this.__DOMElement.querySelector(".js-progress, .progress"),this.__loadedElement=this.__DOMElement.querySelector(".js-loaded, .loaded"),this.__handle&&this.__handle.setAttribute("draggable","false"),this.requestedPercentage=0,this.displayedPercentage=0,this.displayedLoadedPercentage=0,this.handleDragging=!1,this.createListeners()};i.prototype=Object.create(NATION.EventDispatcher.prototype),i.prototype.constructor=i,i.prototype.CLICKED="clicked",i.prototype.HANDLE_MOUSE_DOWN="HandleMouseDown",i.prototype.HANDLE_DRAGGED="HandleDragged",i.prototype.HANDLE_RELEASED="HandleReleased",i.prototype.getHandleDragInProgress=function(){return this.handleDragging},i.prototype.getPercentage=function(){return this.displayedPercentage},i.prototype.getRequestedPercentage=function(){return this.requestedPercentage},i.prototype.setProgress=function(t){t>1?t=1:0>t&&(t=0),"inside"===this.handlePositioning&&(t=(this.__DOMElement.offsetWidth-this.__handle.offsetWidth)*t/this.__DOMElement.offsetWidth);var e=100*t;e>0&&(e+="%"),this.__progressElement&&(this.__progressElement.style.width=e),this.displayedPercentage=t,this.setNewHandlePosition(t)},i.prototype.setLoaded=function(t,e){t>1?t=1:0>t&&(t=0);var i=100*t+"%";this.__loadedElement&&(this.__loadedElement.style.width=i),e&&this.__hitArea&&(this.__hitArea.style.width=i),this.displayedLoadedPercentage=t},i.prototype.setNewHandlePosition=function(t){if(this.__handle){var e=this.__progressElement.offsetWidth,i=t;0>i&&(i=0);var s=0;s=this.__hitArea?this.__hitArea.offsetWidth/e:this.__DOMElement.offsetWidth/e,i>s&&(i=s),this.__handle.style.left=100*i+"%"}},i.prototype.createListeners=function(){this.__hitArea&&this.__hitArea.addEventListener("click",this.onHitAreaClicked.bind(this)),this.__handle&&(this.__handle.addEventListener("mousedown",this.onHandleMouseDown.bind(this)),this.__handle.addEventListener("click",this.onHandleClicked.bind(this)),this.__handle.addEventListener("touchstart",this.onHandleTouchStart.bind(this)))},i.prototype.onHitAreaClicked=function(t){var e=t.pageX-NATION.Utils.getOffset(t.currentTarget).left;this.requestedPercentage=e/this.__DOMElement.offsetWidth,this.trigger(this.CLICKED),t.stopPropagation(),t.preventDefault()},i.prototype.onHandleMouseDown=function(t){this.handleDragging=!0,this.handler_MouseMove=this.onHandleDragged.bind(this),this.handler_MouseUp=this.onHandleReleased.bind(this),e.addEventListener("mousemove",this.handler_MouseMove),e.addEventListener("mouseup",this.handler_MouseUp),this.trigger(this.HANDLE_MOUSE_DOWN),t.stopPropagation(),t.preventDefault()},i.prototype.onHandleDragged=function(t){var e=t.pageX-NATION.Utils.getOffset(this.__DOMElement).left;this.updateHandleOnDrag(e),this.trigger(this.HANDLE_DRAGGED),t.stopPropagation(),t.preventDefault()},i.prototype.updateHandleOnDrag=function(t){var e=this.__DOMElement.offsetWidth;this.__hitArea&&t>this.__hitArea.offsetWidth&&(t=this.__hitArea.offsetWidth),this.requestedPercentage=t/e,this.requestedPercentage>1&&(this.requestedPercentage=1),this.requestedPercentage<0&&(this.requestedPercentage=0),"inside"===this.handlePositioning&&t>this.__DOMElement.offsetWidth-this.__handle.offsetWidth;var i=t/e;this.setProgress(i)},i.prototype.onHandleReleased=function(t){this.handleDragging=!1,e.removeEventListener("mousemove",this.handler_MouseMove),e.removeEventListener("mouseup",this.handler_MouseUp),this.trigger(this.HANDLE_RELEASED),t.stopPropagation(),t.preventDefault()},i.prototype.onHandleTouchStart=function(t){this.handleDragging=!0,this.handler_TouchMove=this.onHandleTouchMove.bind(this),this.handler_TouchEnd=this.HandleTouchEnd.bind(this),e.addEventListener("touchmove",this.handler_TouchMove),e.addEventListener("touchend",this.handler_TouchEnd),e.addEventListener("pointermove",this.handler_TouchMove),e.addEventListener("pointerup",this.handler_TouchEnd),this.trigger(this.HANDLE_MOUSE_DOWN),t.stopPropagation(),t.preventDefault()},i.prototype.onHandleTouchMove=function(t){var e="undefined"!=typeof t.changedTouches?t.changedTouches:[t],i=e[0].pageX-NATION.Utils.getOffset(this.__DOMElement).left;this.updateHandleOnDrag(i),t.stopPropagation(),t.preventDefault()},i.prototype.onHandleTouchEnd=function(t){this.handleDragging=!1,e.removeEventListener("touchmove",this.handler_TouchMove),e.removeEventListener("touchend",this.handler_TouchEnd),e.removeEventListener("pointermove",this.handler_TouchMove),e.removeEventListener("pointerup",this.handler_TouchEnd),this.trigger(this.HANDLE_RELEASED),t.stopPropagation(),t.preventDefault()},i.prototype.onHandleClicked=function(t){t.preventDefault()},t.NATION.ProgressBar=i}"undefined"==typeof t.NATION&&(t.NATION={}),s()}(window,document,void 0),function(t,e,i){"use strict";function s(){var e="NATION.Slideshow",i={"NATION.Utils":NATION.Utils,"NATION.EventDispatcher":NATION.EventDispatcher};t.waitingDependencies=t.waitingDependencies||{};var n=!0;for(var r in i)if(!i[r]){t.waitingDependencies[e]={dependencies:i,callback:function(){s()}},n=!1;break}if(n){delete t.waitingDependencies[e],o();for(var a in t.waitingDependencies)for(r in t.waitingDependencies[a].dependencies)r===e&&t.waitingDependencies[a].callback()}}function o(){var i=function(t,e){if(NATION.EventDispatcher.call(this),this.__DOMElement=NATION.Utils.getDOMElement(t),this.__slideElements=this.__DOMElement.querySelectorAll(".js-slide, .slide"),this.__previousButton=this.__DOMElement.querySelector(".js-previous, .previous"),this.__nextButton=this.__DOMElement.querySelector(".js-next, .next"),this.__pipsContainer=this.__DOMElement.querySelector(".js-pips, .pips"),this.__captionsContainer=this.__DOMElement.querySelector(".js-captions, .captions"),this.__currentSlideDisplay=this.__DOMElement.querySelector(".js-current",".current"),this.__totalSlidesDisplay=this.__DOMElement.querySelector(".js-total",".total"),this.__captions=null,this.__pips=null,this.captionDisplayProp="block",this.totalSlides=this.__slideElements.length,this.activeZIndex=0,this.inactiveZIndex=0,this.currentSlideID=0,this.previousSlideID=0,this.autoCycling=!1,this.cycleTimer=null,this.animating=!1,this.touchStartX=0,this.touchStartY=0,this.slidesPrepared=!1,this.loadingImages=[],this.slideDisplayDefault="",this.options={autoPlay:!0,slide:!1,fade:!1,delay:4e3,duration:600,easing:"linear",useCaptions:!1,pips:!1,touch:!0,swipeTolerance:100,vertical:!1},e)for(var i in e)this.options[i]=e[i];this.usingjQuery="undefined"==typeof NATION.Animation&&"undefined"!=typeof jQuery,this.loadingImages=this.__DOMElement.querySelectorAll("img"),this.setup()};i.prototype=Object.create(NATION.EventDispatcher.prototype),i.prototype.constructor=i,i.prototype.SLIDE_CHANGE="SlideChange",i.prototype.IMAGE_LOAD_COMPLETE="ImageLoadComplete",i.prototype.getCurrentSlideID=function(){return this.currentSlideID},i.prototype.getTotalSlides=function(){return this.totalSlides},i.prototype.startAutoCycling=function(){this.autoCycling=!0,this.cycleTimer=setTimeout(this.onCycleTimerTicked.bind(this),this.options.delay)},i.prototype.stopAutoCycling=function(){this.autoCycling=!1,this.cycleTimer&&(clearTimeout(this.cycleTimer),this.cycleTimer=null)},i.prototype.showSlide=function(t,e){this.stopAutoCycling();var i=t<this.currentSlideID;this.showSlideByID(t,i,e)},i.prototype.showSlideByID=function(t,e,i){if(t!==this.currentSlideID&&!this.animating){this.slidesPrepared||this.prepareSlides();var s={},o={},n={},r={};i||(this.animating=!0),this.autoCycling&&this.cycleTimer&&(clearTimeout(this.cycleTimer),this.cycleTimer=null),this.options.slide?this.options.vertical?(o=e?{top:"-100%"}:{top:"100%"},r={top:0},s={top:0},n=e?{top:"100%"}:{top:"-100%"}):(o=e?{left:"-100%"}:{left:"100%"},r={left:0},s={left:0},n=e?{left:"100%"}:{left:"-100%"}):this.options.fade&&(o={display:this.slideDisplayDefault,opacity:0,zIndex:this.activeZIndex},s={opacity:1,zIndex:this.inactiveZIndex},r={opacity:1},n={opacity:1});var a=this.__slideElements[this.currentSlideID],l=this.__slideElements[t];i?(NATION.Utils.setStyle(a,n),NATION.Utils.setStyle(l,r),this.onSlideAnimationComplete()):this.usingjQuery?($(a).stop().css(s).animate(n,this.options.duration,this.options.easing),$(l).stop().css(o).animate(r,this.options.duration,this.options.easing,this.onSlideAnimationComplete.bind(this))):(NATION.Utils.setStyle(a,s),NATION.Animation.start(a,n,{duration:this.options.duration,easing:this.options.easing}),NATION.Utils.setStyle(l,o),NATION.Animation.start(l,r,{duration:this.options.duration,easing:this.options.easing},this.onSlideAnimationComplete.bind(this))),this.options.pips&&this.updatePips(this.currentSlideID,t),this.previousSlideID=this.currentSlideID,this.currentSlideID=t,this.options.useCaptions&&this.__captionsContainer&&(this.usingjQuery?$(this.__captionsContainer).stop().animate({opacity:0},this.options.duration/2,"linear",this.onCaptionFadedOut.bind(this)):NATION.Animation.start(this.__captionsContainer,{opacity:0},{duration:this.options.duration/2,easing:"linear"},this.onCaptionFadedOut.bind(this))),this.__currentSlideDisplay&&(this.__currentSlideDisplay.innerHTML=this.currentSlideID+1),this.trigger(this.SLIDE_CHANGE)}},i.prototype.setup=function(){this.options.slide||(this.options.fade=!0),this.totalSlides>1?(this.options.useCaptions&&this.prepareCaptions(),this.options.pips&&this.__pipsContainer&&this.preparePips(),this.options.autoPlay&&this.startAutoCycling(),this.createListeners()):(this.__previousButton&&(this.__previousButton.style.display="none"),this.__nextButton&&(this.__nextButton.style.display="none"),this.options.pips&&this.__pipsContainer&&(this.__pipsContainer.style.display="none")),this.__totalSlidesDisplay&&(this.__totalSlidesDisplay.innerHTML=this.totalSlides),this.__currentSlideDisplay&&(this.__currentSlideDisplay.innerHTML=this.currentSlideID+1),this.checkImageLoadProgress()},i.prototype.checkImageLoadProgress=function(){for(var t=0,e=this.loadingImages.length,i=0;e>t;t++)this.loadingImages[t].complete&&i++;i===e?this.trigger(this.IMAGE_LOAD_COMPLETE):this.imageLoader=setTimeout(this.checkImageLoadProgress.bind(this),200)},i.prototype.prepareSlides=function(){var t=0,e=this.__slideElements.length;if(this.options.fade){for(this.slideDisplayDefault=NATION.Utils.getStyle(this.__slideElements[0],"display"),this.inactiveZIndex=this.totalSlides;e>t;t++)t!==this.currentSlideID&&(this.__slideElements[t].style.zIndex=this.inactiveZIndex,this.__slideElements[t].style.opacity=0,0!==t&&(this.__slideElements[t].style.display="none"));this.animating=!1,this.activeZIndex=this.totalSlides+2,this.__slideElements[this.currentSlideID].style.zIndex=this.activeZIndex}else{for(;e>t;t++)t!==this.currentSlideID&&(this.options.vertical?this.__slideElements[t].style.top="100%":this.__slideElements[t].style.left="100%");this.options.vertical?this.__slideElements[this.currentSlideID].style.top=0:this.__slideElements[this.currentSlideID].style.left=0}this.slidesPrepared=!0},i.prototype.prepareCaptions=function(){if(this.__captionsContainer){this.__captions=this.__DOMElement.querySelectorAll(".js-caption, .caption");for(var t=0,e=this.__captions.length;e>t;t++)this.__captionsContainer.appendChild(this.__captions[t]);for(this.captionDisplayProp=NATION.Utils.getStyle(this.__captions[0],"display"),t=0;e>t;t++)t!==this.currentSlideID?this.__captions[t].style.display="none":this.__captions[t].style.display=this.captionDisplayProp}},i.prototype.preparePips=function(){if(this.__pipsContainer){this.__pips=this.__pipsContainer.querySelectorAll(".js-pip, .pip"),0===this.__pips.length&&(this.__pips=this.__pipsContainer.querySelectorAll("a"));var t,i,s=0,o=this.totalSlides;if(this.__pips.length){if(this.__pips.length<this.totalSlides)for(t=null,o=this.totalSlides-this.__pips.length;o>s;s++)t=this.__pipsContainer.children[0].cloneNode(!0),this.__pipsContainer.appendChild(t)}else{var n=this.__pipsContainer.nodeName.toLowerCase(),r=this.__pipsContainer;for("ul"!==n&&"ol"!==n&&(r=e.createElement("ul"));o>s;s++)t=e.createElement("li"),t.className="js-pip-wrapper",i=e.createElement("button"),i.className="js-pip",t.appendChild(i),r.appendChild(t);"ul"!==n&&"ol"!==n&&this.__pipsContainer.appendChild(r),this.__pips=this.__pipsContainer.querySelectorAll(".js-pip, .pip")}this.__pips[0].className.search("active")<0&&(this.__pips[0].className+=" active")}},i.prototype.createListeners=function(){if(this.__previousButton&&this.__previousButton.addEventListener("click",this.onPreviousClicked.bind(this),!1),this.__nextButton&&this.__nextButton.addEventListener("click",this.onNextClicked.bind(this),!1),this.options.pips&&this.__pips.length)for(var t=0,e=this.__pips.length;e>t;t++)this.__pips[t].addEventListener("click",this.onPipClicked.bind(this),!1);this.options.touch&&(this.__DOMElement.addEventListener("touchstart",this.onTouchStart.bind(this),!1),this.__DOMElement.addEventListener("pointerdown",this.onTouchStart.bind(this),!1))},i.prototype.updatePips=function(t,e){this.__pips[t].className=this.__pips[t].className.replace(/ active|active/g,""),this.__pips[e].className+=" active"},i.prototype.onCycleTimerTicked=function(){this.showNextSlide()},i.prototype.onSlideAnimationComplete=function(t){this.animating=!1,this.options.fade&&this.previousSlideID>0&&(this.__slideElements[this.previousSlideID].style.display="none"),this.autoCycling&&this.startAutoCycling()},i.prototype.onCaptionFadedOut=function(t){this.__captions[this.previousSlideID].style.display="none",this.__captions[this.currentSlideID].style.display=this.captionDisplayProp,this.usingjQuery?$(this.__captionsContainer).stop().animate({opacity:1},this.options.duration/2,"lienar"):NATION.Animation.start(this.__captionsContainer,{opacity:1},{duration:this.options.duration/2,easing:"linear"})},i.prototype.onPreviousClicked=function(t){this.autoCycling&&this.stopAutoCycling(),this.showPreviousSlide(),t.preventDefault()},i.prototype.showPreviousSlide=function(t){if(!this.animating){var e=this.currentSlideID-1;0>e&&(e=this.totalSlides-1),this.showSlideByID(e,!0)}},i.prototype.showNextSlide=function(t){if(!this.animating){var e=this.currentSlideID+1;e>this.totalSlides-1&&(e=0),this.showSlideByID(e,!1)}},i.prototype.onNextClicked=function(t){this.autoCycling&&this.stopAutoCycling(),this.showNextSlide(),t.preventDefault()},i.prototype.onPipClicked=function(t){this.autoCycling&&this.stopAutoCycling();for(var e=0,i=this.__pips.length,s=-1;i>e;e++)if(this.__pips[e]===t.currentTarget){s=e;break}this.showSlideByID(s,s<this.currentSlideID),t.preventDefault()},i.prototype.onTouchStart=function(t){if(!this.animating){var i="undefined"!=typeof t.changedTouches?t.changedTouches:[t];this.touchStartX=i[0].pageX,this.touchStartY=i[0].pageY,this.handler_TouchEnd=this.onTouchEnd.bind(this),e.addEventListener("touchend",this.handler_TouchEnd,!1),e.addEventListener("pointerup",this.handler_TouchEnd,!1)}},i.prototype.onTouchEnd=function(t){var i="undefined"!=typeof t.changedTouches?t.changedTouches:[t],s=i[0].pageX,o=i[0].pageY;this.options.vertical?o>this.touchStartY+this.options.swipeTolerance?(this.autoCycling&&this.stopAutoCycling(),this.showPreviousSlide()):o<this.touchStartY-this.options.swipeTolerance&&(this.autoCycling&&this.stopAutoCycling(),this.showNextSlide()):s>this.touchStartX+this.options.swipeTolerance?(this.autoCycling&&this.stopAutoCycling(),this.showPreviousSlide()):s<this.touchStartX-this.options.swipeTolerance&&(this.autoCycling&&this.stopAutoCycling(),this.showNextSlide()),e.removeEventListener("touchend",this.handler_TouchEnd,!1),e.removeEventListener("pointerup",this.handler_TouchEnd,!1)},t.NATION.Slideshow=i}"undefined"==typeof t.NATION&&(t.NATION={}),s()}(window,document,void 0),function(t,e,i){"use strict";function s(){var s=function(){this.requestID=0,this.testElement=e.createElement("div"),this.pageElement=null};s.prototype.ajax=function(t){if(!t||t!==Object(t))throw new Error(this.ERROR_INVALID_OPTIONS);if(!t.url)throw new Error(this.ERROR_UNDEFINED_URL);t.method=t.method||"GET",t.dataType=t.dataType||"text","jsonp"===t.dataType||"script"===t.dataType?this.loadScript(t):this.createRequest(t)},s.prototype.createNamespace=function(e){for(var i=e.split("."),s="",o=0,n=i.length,r=t;n>o;o++)s=i[o],r[s]=r[s]||{},r=r[s]},s.prototype.getOffset=function(i){var s=i.getBoundingClientRect();return{top:s.top+t.pageYOffset-(e.documentElement.clientTop||0),left:s.left+t.pageXOffset-(e.documentElement.clientLeft||0)}},s.prototype.getPosition=function(t){return{top:t.offsetTop,left:t.offsetLeft}},s.prototype.getStyle=function(e,i,s){var o=0;if("float"===i&&(i="cssFloat"),i=this.getPrefixedName(i),s){var n=t.getComputedStyle(e,null).display,r=0!=e.style.display;e.style.display="none",o=t.getComputedStyle(e,null)[i],r?e.style.display=n:e.style.removeProperty("display")}else o=t.getComputedStyle(e,null)[i],o.search(/px|%|em|rem|vh|vw|vmin|vmax|ex|ch/g)>-1&&(o=parseInt(o,10));return o||""},s.prototype.setStyle=function(t,e){var i="";for(var s in e)if(i=this.getPrefixedName(s),parseInt(e[s],10)==e[s]&&s.search(/opacity|margin|z-index|zIndex|font-weight|fontWeight|line-height|lineHeight|counter-reset|counterReset|counter-increment|counterIncrement|volume|stress|pitch-range|pitchRange|richness/g)<0&&(e[s]+="px"),t.length)for(var o=0,n=t.length;n>o;o++)t[o].style[i]=e[s];else t.style[i]=e[s]},s.prototype.getCookie=function(t){for(var i=e.cookie.split("; "),s={},o=i.length-1,n="";o>=0;o--)n=i[o].split("="),s[n[0]]=n[1];return s[t]},s.prototype.setCookie=function(t,i,s){var o="";if(s){var n=new Date;n.setTime(n.getTime()+24*s*60*60*1e3),o="; expires="+n.toGMTString()}e.cookie=t+"="+i+o+";path=/"},s.prototype.getPageElement=function(){if(!this.pageElement){var i=t.pageYOffset||e.body.scrollTop,s=i+1;t.scrollTo(0,s),this.pageElement=e.documentElement.scrollTop===s?e.documentElement:e.body,t.scrollTo(0,i)}return this.pageElement},s.prototype.isEventSupported=function(t,s){var o=!1,n=!("onblur"in e.documentElement);return t?("hover"===t&&(t="mouseover"),s?"string"==typeof s&&(s=e.createElement(s)):s=this.testElement,t="on"+t.toLowerCase(),o=t in s,!o&&n&&(s.setAttribute||(s=e.createElement("div")),s.setAttribute(t,""),o="function"==typeof s[t],s[t]!==i&&(s[t]=i),s.removeAttribute(t)),o):!1},s.prototype.serializeForm=function(t){var e,i=[];if("object"==typeof t&&"FORM"===t.nodeName)for(var s=t.elements.length,o=0,n=0;s>o;o++)if(e=t.elements[o],e.name&&!e.disabled&&e.type.toString().indexOf(/file|reset|submit|button/i)<0)if("select-multiple"===e.type)for(n=e.length-1;n>=0;n--)fieldElement.options[n].selected&&(i[i.length]=encodeURIComponent(e.name)+"="+encodeURIComponentfield.options[n].value);else(e.type.toString().indexOf(/checkbox|radio/i)<0||e.checked)&&(i[i.length]=encodeURIComponent(e.name)+"="+encodeURIComponent(e.value));return i.join("&").replace(/%20/g,"+")},s.prototype.getDOMElement=function(t){return"string"==typeof t?e.querySelector(t):"undefined"!=typeof jQuery&&t instanceof jQuery?jQuery(t)[0]:t},s.prototype.getPrefixedName=function(t){for(var e=["webkit","Moz","ms","moz"],s=0,o=e.length,n=t;o>s;s++)if(n.search("-"+e[s]+"-")>-1){n=n.replace("-"+e[s]+"-","");break}if(this.testElement.style[n]!==i||"scrollLeft"===n||"scrollTop"===n)return n;for(n=n.charAt(0).toUpperCase()+n.slice(1),n=this.camelcaseString(n,!0,!0),s=0;o>s;s++)if(this.testElement.style[e[s]+n]!==i)return e[s]+n;if("transition"!=t)throw new Error(this.ERROR_UNSUPPORTED_STYLE.replace("{{property}}",t))},s.prototype.camelcaseString=function(t,e,i){return e?(t=t.replace(/\-[a-zA-Z]|\s[a-zA-Z]|\s+/g,function(t,e){return t.replace(/-|\s/g,"").toUpperCase()}),i||(t=t.charAt(0).toLowerCase()+t.substring(1)),t):t.replace(/(?:^\w|[A-Z]|\b\w|)/g,function(t,e){return 0===+t?"":t.toUpperCase()})},s.prototype.ERROR_INVALID_OPTIONS="NATION.Utils: ajax argument 'options' is not a valid object",s.prototype.ERROR_UNDEFINED_URL="NATION.Utils: ajax argument 'options.url' is undefined",s.prototype.ERROR_INVALID_DATA="Nation.Utils: ajax argument 'options.data' must be either a querystring or an object consisting of key/value pairs",s.prototype.ERROR_REQUEST_FAILED="NATION.Utils: ajax load failed wth error code '{{status}}' and response '{{response}}'",s.prototype.ERROR_UNSUPPORTED_STYLE="NATION.Utils: This browser does not support the CSS property '{{property}}'",s.prototype.prepareRequestData=function(t){if("string"!=typeof t){if(t!==Object(t))throw new Error(this.ERROR_INVALID_DATA);t=this.objectToQueryString(t)}return t},s.prototype.loadScript=function(t){var i=e.createElement("script");t.id&&i.setAttribute("id",t.id),"jsonp"===t.dataType&&(t.id=this.requestID=this.requestID+1),t.url.indexOf("?")<0&&(t.url+="?"),t.url.indexOf("?")!==t.url.length-1&&(t.url+="&"),t.data&&(t.data=this.prepareRequestData(t.data),t.url+=t.data,"jsonp"===t.dataType&&(t.url+="&")),t.success&&"jsonp"!==t.dataType&&i.addEventListener("load",t.success),"jsonp"===t.dataType&&(t.url+="callback=NATION.jsonpCallback"+t.id),"jsonp"===t.dataType&&(NATION["jsonpCallback"+t.id]=function(s){"{"===s[0]&&(s=JSON.parse(s)),t.success&&t.success(s),e.getElementsByTagName("body")[0].removeChild(i),delete NATION["jsonpCallback"+t.id]}),i.setAttribute("src",t.url),e.getElementsByTagName("body")[0].appendChild(i)},s.prototype.handleRequestError=function(t,e){return!t.status||200!==t.status&&304!==t.status?(e.error?e.error(t.status,t.statusText):console&&console.warn&&console.warn(this.ERROR_REQUEST_FAILED.replace("{{status}}",t.status).replace("{{response}}",t.response)),!0):!1},s.prototype.createRequest=function(t){var e=new XMLHttpRequest;e.open(t.method,t.url,!0),t.data&&(t.data=this.prepareRequestData(t.data),t.contentType||(t.contentType="application/x-www-form-urlencoded; charset=UTF-8"),e.setRequestHeader("Content-type",t.contentType));var i=t.dataType.indexOf(/text|arraybuffer|blob|document/i)>-1,s=this;e.upload?(i&&(e.responseType=t.dataType),e.addEventListener("load",function(o){if(!s.handleRequestError(e,t)){var n=e.responseText;i?n=e.response:"json"===t.dataType&&"{"===n[0]&&(n=JSON.parse(n)),t.success&&t.success(n)}}),e.addEventListener("error",function(i){s.handleRequestError(e,t)}),t.progress&&e.addEventListener("progress",function(e){e.lengthComputable&&t.progress(e.loaded/e.total)})):(i&&e.overrideMimeType("text/plain; charset=x-user-defined"),e.onreadystatechange=function(){if(4===e.readyState&&!s.handleRequestError(e,t)){var i=e.responseText;"json"===t.dataType&&"{"===i[0]&&(i=JSON.parse(i)),t.success&&t.success(i)}}),e.send(t.data)},s.prototype.objectToQueryString=function(t){return Object.keys(t).map(function(e){return"Array"==typeof t[e]&&(t[e]=t[e].join("&")),encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")},t.NATION.Utils=new s}"undefined"==typeof t.NATION&&(t.NATION={}),s();var o="NATION.Utils";t.waitingDependencies=t.waitingDependencies||{};for(var n in t.waitingDependencies)for(var r in t.waitingDependencies[n].dependencies)r===o&&t.waitingDependencies[n].callback();if(!t.requestAnimationFrame){var a=0;t.requestAnimationFrame=function(e,i){var s=Date.now(),o=Math.max(0,16-Math.abs(s-a)),n=t.setTimeout(function(){e(s+o)},o);return a=s+o,n}}t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}(window,document,void 0),function(t,e,i){"use strict";function s(){var e="NATION.VerticalScrollbar",i={"NATION.Utils":NATION.Utils,"NATION.EventDispatcher":NATION.EventDispatcher};t.waitingDependencies=t.waitingDependencies||{};var n=!0;for(var r in i)if(!i[r]){t.waitingDependencies[e]={dependencies:i,callback:function(){s()}},n=!1;break}if(n){delete t.waitingDependencies[e],o();for(var a in t.waitingDependencies)for(r in t.waitingDependencies[a].dependencies)r===e&&t.waitingDependencies[a].callback()}}function o(){var i=function(t,e,i){if(NATION.EventDispatcher.call(this),!t)throw new Error(this.ERROR_MISSING_SELECTOR.replace("{{selector}}","contentSelector"));if(!e)throw new Error(this.ERROR_MISSING_SELECTOR.replace("{{selector}}","scrollbarSelector"));if(this.__content=NATION.Utils.getDOMElement(t),this.__scrollbar=NATION.Utils.getDOMElement(e),this.__track=this.__scrollbar.querySelector(".js-track, .track"),this.__handle=this.__scrollbar.querySelector(".js-handle, .handle"),this.barHeight=0,this.contentHeight=0,this.handleHeight=0,this.previousScrollPercentage=0,this.lastTouchPosition=0,this.dragStartPos=0,this.resizeTimer=null,this.inertiaScrolling=!1,this.touchPreviousContentPos=0,this.touchPreviousY=0,this.touchDragInProgress=!1,this.enabled=!1,this.listenersCreated=!1,this.MIN_HANDLE_HEIGHT=50,this.options={enableMouseLock:!1,inertiaEnabled:!0,inertiaMultiplier:.8},i)for(var s in i)this.options[s]=i[s];this.setup()};i.prototype=Object.create(NATION.EventDispatcher.prototype),i.prototype.constructor=i,i.prototype.CONTENT_SCROLLED="ContentScrolled",i.prototype.ENABLED="Enabled",i.prototype.DISABLED="Disabled",i.prototype.enable=function(){this.listenersCreated||this.createListeners(),this.__scrollbar.className.search("disabled")>=0&&(this.__scrollbar.className=this.__scrollbar.className.replace(/ disabled|disabled/g,"")),this.enabled||(this.enabled=!0,this.trigger(this.ENABLED))},i.prototype.disable=function(){this.listenersCreated&&this.removeListeners(),this.__scrollbar.className.search("disabled")<0&&(this.__scrollbar.className+=" disabled"),this.enabled&&(this.enabled=!1,this.trigger(this.DISABLED))},i.prototype.reset=function(){this.__handle.style.top=0,this.repositionContent(0),this.lastTouchPosition=0},i.prototype.resize=function(t){"undefined"==typeof t&&(t=!0);var e=this.contentHeight,i=this.barHeight;this.contentHeight=this.__content.children[0].offsetHeight,this.barHeight=this.__scrollbar.offsetHeight,this.options.heightDifference||(this.options.heightDifference=this.barHeight-this.__content.clientHeight),!t||0===this.previousScrollPercentage||e===this.contentHeight&&i===this.barHeight?t||this.reset():this.setPosition(this.previousScrollPercentage),this.calculateHandleHeight(),this.handleHeight===this.barHeight?this.disable():this.enable(),this.resizeTimer&&(clearTimeout(this.resizeTimer),this.resizeTimer=null)},i.prototype.setPosition=function(t){if(t>=0){this.calculateHandleHeight(),this.repositionContent(t);var e=t*(this.__scrollbar.clientHeight-this.__handle.offsetHeight);e+this.handleHeight>this.barHeight&&(e=this.barHeight-this.handleHeight),0>e&&(e=0),this.__handle.style.top=e+"px"}},i.prototype.getPosition=function(){return this.previousScrollPercentage},i.prototype.ERROR_MISSING_SELECTOR="NATION.VerticalScrollbar: The '{{selector}}' argument is required.",i.prototype.setup=function(){this.__handle.setAttribute("draggable",!1),this.__handle.style.top=0,this.__scrollbar.style.touchAction="none",this.__content.style.touchAction="none",this.barHeight=this.__scrollbar.offsetHeight,this.contentHeight=this.__content.children[0].offsetHeight,this.options.heightDifference||(this.options.heightDifference=this.barHeight-this.__content.clientHeight),this.contentHeight>this.barHeight?(this.prepareHandle(),this.createListeners()):this.disable(),this.__content.scrollTop=0,this.handler_WindowResize=this.onWindowResized.bind(this),t.addEventListener("resize",this.handler_WindowResize,!1)},i.prototype.prepareHandle=function(){this.__handle.style.top=0,this.__handle.tabIndex=-1,this.calculateHandleHeight()},i.prototype.calculateHandleHeight=function(){this.handleHeight=Math.floor(this.barHeight*((this.barHeight-this.options.heightDifference)/this.contentHeight)),this.handleHeight<this.MIN_HANDLE_HEIGHT?this.handleHeight=this.MIN_HANDLE_HEIGHT:this.handleHeight>this.barHeight&&(this.handleHeight=this.barHeight);var t=parseInt(this.__handle.style.top,10);t+this.handleHeight>this.barHeight&&(t=this.barHeight-this.handleHeight,0>t&&(t=0),this.__handle.style.top=t+"px"),this.__handle.style.height=this.handleHeight+"px"},i.prototype.createListeners=function(){this.listenersCreated=!0,this.handler_HandleMouseDown=this.onHandleMouseDown.bind(this),this.__handle.addEventListener("mousedown",this.handler_HandleMouseDown,!1),this.handler_HandleClicked=this.onHandleClicked.bind(this),this.__handle.addEventListener("click",this.handler_HandleClicked,!1),this.handler_WheelScrolled=this.onMouseWheelScrolled.bind(this),this.__content.addEventListener("mousewheel",this.handler_WheelScrolled,!1),this.__content.addEventListener("wheel",this.handler_WheelScrolled,!1),this.__content.addEventListener("DOMMouseScroll",this.handler_WheelScrolled,!1),this.__track&&(this.handler_TrackMouseDown=this.onTrackMouseDown.bind(this),this.__track.addEventListener("mousedown",this.handler_TrackMouseDown,!1)),this.handler_HandleTouchStart=this.onHandleTouchStart.bind(this),this.__handle.addEventListener("touchstart",this.handler_HandleTouchStart,!1),this.__handle.addEventListener("pointerdown",this.handler_HandleTouchStart,!1),this.handler_ContentTouchStart=this.onContentTouchStart.bind(this),this.__content.addEventListener("touchstart",this.handler_ContentTouchStart,!1),this.__content.addEventListener("pointerdown",this.handler_ContentTouchStart,!1)},i.prototype.removeListeners=function(){this.listenersCreated=!1,this.__handle.removeEventListener("mousedown",this.handler_HandleMouseDown,!1),this.__handle.removeEventListener("click",this.handler_HandleClicked,!1),this.__content.removeEventListener("mousewheel",this.handler_WheelScrolled,!1),this.__content.removeEventListener("wheel",this.handler_WheelScrolled,!1),this.__content.removeEventListener("DOMMouseScroll",this.handler_WheelScrolled,!1),this.__track&&this.__track.removeEventListener("mousedown",this.handler_TrackMouseDown,!1),this.__handle.removeEventListener("touchstart",this.handler_HandleTouchStart,!1),this.__handle.removeEventListener("pointerdown",this.handler_HandleTouchStart,!1),this.__content.removeEventListener("touchstart",this.handler_ContentTouchStart,!1),this.__content.removeEventListener("pointerdown",this.handler_ContentTouchStart,!1),e.removeEventListener("mousemove",this.handler_HandleMouseMove,!1),e.removeEventListener("mouseup",this.handler_HandleMouseUp,!1),e.removeEventListener("touchmove",this.handler_HandleTouchMove,!1),e.removeEventListener("touchend",this.handler_HandleTouchEnd,!1),e.removeEventListener("pointermove",this.handler_HandleTouchMove,!1),e.removeEventListener("pointerup",this.handler_HandleTouchEnd,!1)},i.prototype.repositionContent=function(t){this.previousScrollPercentage=t;var e=(this.__content.children[0].offsetHeight-(this.barHeight-this.options.heightDifference))*t;this.__content.scrollTop=e,this.trigger(this.CONTENT_SCROLLED)},i.prototype.positionHandle=function(t){var e=t-this.dragStartPos;e>this.barHeight-this.__handle.offsetHeight?e=this.barHeight-this.__handle.offsetHeight:0>e&&(e=0),e+this.handleHeight>this.barHeight&&(e=this.barHeight-this.handleHeight),this.__handle.style.top=e+"px",this.repositionContent(e/(this.barHeight-this.__handle.offsetHeight))},i.prototype.inertiaScroll=function(t){var e,i,s,o;this.inertiaAmplitude&&(e=Date.now()-this.inertiaTimestamp,i=-this.inertiaAmplitude*Math.exp(-e/325),i>.5||-.5>i?(s=this.touchPreviousContentPos=this.inertiaTarget+i,this.inertiaScrolling&&requestAnimationFrame(this.inertiaScroll.bind(this))):(this.inertiaScrolling=!1,s=this.touchPreviousContentPos=this.inertiaTarget),o=s/(this.contentHeight-this.__content.clientHeight),0>o?(o=0,this.inertiaScrolling=!1):o>1&&(o=1,this.inertiaScrolling=!1),this.setPosition(o))},i.prototype.onHandleMouseDown=function(t){
this.inertiaScrolling=!1,this.__content.children[0].offsetHeight>this.barHeight&&(this.__handle.className.search("active")<0&&(this.__handle.className+=" active"),this.dragStartPos=t.pageY-NATION.Utils.getPosition(this.__scrollbar).top-NATION.Utils.getPosition(this.__handle).top,this.handler_HandleMouseMove=this.onHandleMouseMove.bind(this),this.handler_HandleMouseUp=this.onHandleMouseUp.bind(this),e.addEventListener("mousemove",this.handler_HandleMouseMove,!1),e.addEventListener("mouseup",this.handler_HandleMouseUp,!1)),t.preventDefault()},i.prototype.onHandleClicked=function(t){t.stopPropagation(),t.preventDefault()},i.prototype.normaliseScroll=function(t){var e=10,i=40,s=800,o=0,n=0,r=0,a=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(o=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(o=n,n=0),r=o*e,a=n*e,"deltaY"in t&&(a=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||a)&&t.deltaMode&&(1==t.deltaMode?(r*=i,a*=i):(r*=s,a*=s)),r&&!o&&(o=1>r?-1:1),a&&!n&&(n=1>a?-1:1),{spinX:o,spinY:n,pixelX:r,pixelY:a}},i.prototype.onMouseWheelScrolled=function(t){this.inertiaScrolling=!1;var e=this.normaliseScroll(t),i=NATION.Utils.getPosition(this.__handle).top;if(e.pixelY){var s=e.spinY*Math.abs(e.pixelY);s>40?s=40:-40>s&&(s=-40),i+=s,i>this.barHeight-this.__handle.offsetHeight?i=this.barHeight-this.__handle.offsetHeight:0>i&&(i=0),this.__handle.style.top=i+"px";var o=0;0!==i&&(o=i/(this.barHeight-this.__handle.offsetHeight)),o!==this.previousScrollPercentage&&(this.repositionContent(o),t.preventDefault&&t.preventDefault())}this.options.enableMouseLock&&t.preventDefault&&t.preventDefault()},i.prototype.onTrackMouseDown=function(t){this.inertiaScrolling=!1;var e=t.pageY-NATION.Utils.getOffset(this.__scrollbar).top-this.__handle.offsetHeight/2;e>this.barHeight-this.__handle.offsetHeight?e=this.barHeight-this.__handle.offsetHeight:0>e&&(e=0),e+this.handleHeight>this.barHeight&&(e=this.barHeight-this.handleHeight),this.__handle.style.top=e+"px";var i=e/(this.barHeight-this.__handle.offsetHeight);i!==this.previousScrollPercentage&&this.repositionContent(i),t.preventDefault()},i.prototype.onHandleMouseMove=function(t){var e=t.pageY-NATION.Utils.getPosition(this.__scrollbar).top;this.positionHandle(e),t.preventDefault()},i.prototype.onHandleMouseUp=function(t){e.removeEventListener("mousemove",this.handler_HandleMouseMove,!1),e.removeEventListener("mouseup",this.handler_HandleMouseUp,!1),this.__handle.className.search("active")>=0&&(this.__handle.className=this.__handle.className.replace(/ active|active/g,"")),t.preventDefault()},i.prototype.onHandleTouchStart=function(t){this.inertiaScrolling=!1;var i="undefined"!=typeof t.touches?t.touches:[t];this.__content.children[0].offsetHeight>this.barHeight&&(this.__handle.className.search("active")<0&&(this.__handle.className+=" active"),this.dragStartPos=i[0].pageY-NATION.Utils.getPosition(this.__scrollbar).top-NATION.Utils.getPosition(this.__handle).top,this.handler_HandleTouchMove=this.onHandleTouchMove.bind(this),this.handler_HandleTouchEnd=this.onHandleTouchEnd.bind(this),e.addEventListener("touchmove",this.handler_HandleTouchMove,!1),e.addEventListener("touchend",this.handler_HandleTouchEnd,!1),e.addEventListener("pointermove",this.handler_HandleTouchMove,!1),e.addEventListener("pointerup",this.handler_HandleTouchEnd,!1)),t.preventDefault()},i.prototype.onHandleTouchMove=function(t){var e="undefined"!=typeof t.changedTouches?t.changedTouches:[t],i=e[0].pageY-NATION.Utils.getPosition(this.__scrollbar).top;this.positionHandle(i),t.preventDefault()},i.prototype.onHandleTouchEnd=function(t){e.removeEventListener("touchmove",this.handler_HandleTouchMove,!1),e.removeEventListener("touchend",this.handler_HandleTouchUp,!1),e.removeEventListener("pointermove",this.handler_HandleTouchMove,!1),e.removeEventListener("pointerup",this.handler_HandleTouchEnd,!1),this.__handle.className.search("active")>=0&&(this.__handle.className=this.__handle.className.replace(/ active|active/g,"")),t.preventDefault()},i.prototype.onContentTouchStart=function(t){var i="undefined"!=typeof t.changedTouches?t.changedTouches:[t];this.options.inertiaEnabled&&(this.inertiaScrolling=!1,this.inertiaVelocity=0,this.inertiaAmplitude=0,this.inertiaTimestamp=Date.now()),this.touchPreviousY=i[0].pageY,this.touchPreviousContentPos=this.__content.scrollTop,this.handler_ContentTouchMove=this.onContentTouchMove.bind(this),this.handler_ContentTouchEnd=this.onContentTouchEnd.bind(this),e.addEventListener("touchmove",this.handler_ContentTouchMove),e.addEventListener("touchend",this.handler_ContentTouchEnd),e.addEventListener("pointermove",this.handler_ContentTouchMove),e.addEventListener("pointerup",this.handler_ContentTouchEnd)},i.prototype.onContentTouchMove=function(t){this.touchDragInProgress=!0;var e="undefined"!=typeof t.changedTouches?t.changedTouches:[t],i=e[0].pageY-this.touchPreviousY;if(0!==i){var s=this.touchPreviousContentPos-i;if(0>s?s=0:s>this.contentHeight-this.__content.clientHeight&&(s=this.contentHeight-this.__content.clientHeight),this.options.inertiaEnabled){var o=s-this.touchPreviousContentPos,n=1e3*o/(1+(Date.now()-this.inertiaTimestamp));this.inertiaVelocity=.8*n+.2*this.inertiaVelocity,this.inertiaTimestamp=Date.now()}this.touchPreviousContentPos=s,this.touchPreviousY=e[0].pageY;var r=0;0!==s&&(r=s/(this.contentHeight-this.__content.clientHeight)),this.setPosition(r)}t.preventDefault()},i.prototype.onContentTouchEnd=function(t){this.options.inertiaEnabled&&(this.inertiaVelocity>200||this.inertiaVelocity<-200)&&(this.inertiaAmplitude=this.options.inertiaMultiplier*this.inertiaVelocity,this.inertiaTarget=Math.round(this.touchPreviousContentPos+this.inertiaAmplitude),this.inertiaTimestamp=Date.now(),this.inertiaScrolling=!0,requestAnimationFrame(this.inertiaScroll.bind(this))),e.removeEventListener("touchmove",this.handler_ContentTouchMove),e.removeEventListener("touchend",this.handler_ContentTouchEnd),e.removeEventListener("pointermove",this.handler_ContentTouchMove),e.removeEventListener("pointerup",this.handler_ContentTouchEnd),this.touchDragInProgress&&(this.touchDragInProgress=!1,t.preventDefault())},i.prototype.onWindowResized=function(t){this.resizeTimer||(this.resizeTimer=setTimeout(this.resize.bind(this,!0),20))},t.NATION.VerticalScrollbar=i}"undefined"==typeof t.NATION&&(t.NATION={}),s()}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views");var s=function(t){NATION.EventDispatcher.call(this),this.__DOMElement=t,this.__topTitle=null,this.buildComplete=!1,this.hidden=!1,this.previousScroll=0,this.titleVisible=!0};s.prototype=Object.create(NATION.EventDispatcher.prototype),s.prototype.constructor=s,s.prototype.createListeners=function(){this.__topTitle&&(this.handler_windowScrolled=this.onWindowScrolled.bind(this),t.addEventListener("scroll",this.handler_windowScrolled))},s.prototype.removeListeners=function(){this.__topTitle&&t.removeEventListener("scroll",this.handler_windowScrolled)},s.prototype.hasHidden=function(){return this.hidden},s.prototype.destroy=function(){this.removeListeners()},s.prototype.resize=function(){},s.prototype.build=function(t,e){t&&(this.__DOMElement.innerHTML=t,picturefill&&picturefill()),this.__topTitle=this.__DOMElement.querySelector(".js-fade-title"),e||this.createListeners(),this.buildComplete=!0},s.prototype.onWindowScrolled=function(t){var e=NATION.Utils.getPageElement().scrollTop;!NATION2016.Settings.mobileHeader&&this.titleVisible&&e>this.previousScroll&&e>20?(this.titleVisible=!1,NATION.Animation.start(this.__topTitle,{opacity:0},{duration:150})):!this.titleVisible&&e<this.previousScroll&&20>e&&(this.titleVisible=!0,NATION.Animation.start(this.__topTitle,{opacity:1},{duration:150})),this.previousScroll=e},t.NATION2016.views.BasicPageView=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views.contact");var s=function(t){NATION.EventDispatcher.call(this),this.__DOMElement=t,this.__mapElement=null,this.__directionsButtons=null,this.__mapZoomButtons=[],this.__customDirectionsBubble=null,this.__customDirectionsButton=null,this.__customDirectionsForm=null,this.__customDirectionsInput=null,this.nationLatLng={},this.markerIcon={},this.mapOptions={},this.googleMap=null,this.mapMarker=null,this.directionsRenderer=null,this.directionsService=null,this.customDirectionsFormURL="",this.inputErrorText="",this.IE9PlaceholderText="",this.mapColorScheme=[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444 "}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2 "}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"transit.station.rail",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"water",elementType:"all",stylers:[{color:"#3a94d6"},{visibility:"on"}]}],this.setup()};s.prototype=Object.create(NATION.EventDispatcher.prototype),s.prototype.constructor=s,s.prototype.setup=function(){this.__directionsButtons=this.__DOMElement.querySelectorAll(".js-directions-button"),this.__mapElement=this.__DOMElement.querySelector(".js-google-map"),this.__customDirectionsButton=this.__DOMElement.querySelector(".js-custom-directions-button"),this.__customDirectionsBubble=this.__DOMElement.querySelector(".js-directions-bubble"),this.__customDirectionsInput=this.__customDirectionsBubble.querySelector(".js-directions-input"),this.__customDirectionsForm=this.__customDirectionsBubble.querySelector(".js-search-form"),this.customDirectionsFormURL=this.__customDirectionsForm.getAttribute("data-action"),this.inputErrorText=this.__customDirectionsInput.getAttribute("data-error"),this.createMapSettings(),this.createMap(),this.createMarker(),this.createZoomControls(),NATION2016.Settings.IS_IE9&&this.prepareIE9(),this.createListeners()},s.prototype.resize=function(){this.googleMap.setCenter(this.nationLatLng)},s.prototype.destroy=function(){this.hideDirectionsBubble(),this.removeListeners()},s.prototype.createMapSettings=function(){this.nationLatLng={lat:parseFloat(this.__mapElement.getAttribute("data-lat")),lng:parseFloat(this.__mapElement.getAttribute("data-lng"))},this.markerIcon={url:this.__mapElement.getAttribute("data-marker-url"),size:new google.maps.Size(72,72),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(36,36)},this.mapOptions={zoom:15,center:this.nationLatLng,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,scrollWheel:!1,draggable:!NATION2016.Settings.TOUCH_DEVICE,styles:this.mapColorScheme}},s.prototype.createZoomControls=function(){var t=e.createElement("div");t.className="js-zoom-controls";for(var i=["zoom-in","zoom-out"],s=0,o=i.length,n=null;o>s;s++)n=e.createElement("div"),n.className="js-zoom-button "+i[s],t.appendChild(n),this.__mapZoomButtons.push(n);t.style.zIndex=1,this.googleMap.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(t)},s.prototype.prepareIE9=function(){this.IE9PlaceholderText=this.__customDirectionsInput.getAttribute("placeholder"),this.__customDirectionsInput.value=this.IE9PlaceholderText},s.prototype.createMap=function(){this.directionsRenderer=new google.maps.DirectionsRenderer({suppressMarkers:!0,polylineOptions:{strokeWeight:10,strokeOpacity:.4,strokeColor:this.__mapElement.getAttribute("data-line-color")}}),this.directionsService=new google.maps.DirectionsService,this.googleMap=new google.maps.Map(this.__mapElement,this.mapOptions),this.directionsRenderer.setMap(this.googleMap)},s.prototype.createMarker=function(){this.mapMarker=new google.maps.Marker({position:this.nationLatLng,map:this.googleMap,icon:this.markerIcon,optimized:!1})},s.prototype.createListeners=function(){var t=0,e=this.__directionsButtons.length;for(this.handler_directionsButtonClicked=this.onDirectionsButtonClicked.bind(this);e>t;t++)this.__directionsButtons[t].addEventListener("click",this.handler_directionsButtonClicked);this.handler_zoomInClicked=this.onZoomInButtonClicked.bind(this),this.__mapZoomButtons[0].addEventListener("click",this.handler_zoomInClicked),this.handler_zoomOutClicked=this.onZoomOutButtonClicked.bind(this),this.__mapZoomButtons[1].addEventListener("click",this.handler_zoomOutClicked),this.handler_customDirectionsButtonClicked=this.onCustomDirectionsButtonClicked.bind(this),this.__customDirectionsButton.addEventListener("click",this.handler_customDirectionsButtonClicked),this.handler_customDirectionSubmitted=this.onCustomDirectionSubmitted.bind(this),this.__customDirectionsForm.addEventListener("submit",this.handler_customDirectionSubmitted),this.handler_customDirectionsInputFocusIn=this.onCustomDirectionsInputFocusIn.bind(this),this.__customDirectionsInput.addEventListener("focus",this.handler_customDirectionsInputFocusIn),NATION2016.Settings.IS_IE9&&(this.handler_customDirectionsInputFocusOut=this.onCustomDirectionsInputFocusOut.bind(this),this.__customDirectionsInput.addEventListener("blur",this.handler_customDirectionsInputFocusOut)),this.handler_mapTilesLoaded=this.onFirstMapTilesLoaded.bind(this),this.mapListener=google.maps.event.addListener(this.googleMap,"tilesloaded",this.handler_mapTilesLoaded)},s.prototype.removeListeners=function(){var t=0,e=this.__directionsButtons.length;if(e>0)for(;e>t;t++)this.__directionsButtons[t].removeEventListener("click",this.handler_directionsButtonClicked);this.__mapZoomButtons.length>0&&(this.__mapZoomButtons[0].removeEventListener("click",this.handler_zoomInClicked),this.__mapZoomButtons[1].removeEventListener("click",this.handler_zoomOutClicked)),this.__customDirectionsButton.removeEventListener("click",this.handler_customDirectionsButtonClicked),google.maps.event.removeListener(this.mapListener)},s.prototype.displayDirections=function(t){this.directionsService.route({origin:t,destination:this.nationLatLng,travelMode:google.maps.TravelMode.WALKING},this.onDirectionsReceived.bind(this))},s.prototype.showDirectionsBubble=function(){this.__customDirectionsInput.value="",this.__customDirectionsBubble.className+=" active",this.__customDirectionsInput.focus(),this.handler_documentClicked=this.onDocumentClicked.bind(this),e.documentElement.addEventListener("click",this.handler_documentClicked)},s.prototype.hideDirectionsBubble=function(){this.__customDirectionsBubble.className=this.__customDirectionsBubble.className.replace(/ active|active/gi,""),this.removeBubbleErrorState(),this.handler_documentClicked&&e.documentElement.removeEventListener("click",this.handler_documentClicked)},s.prototype.onDirectionsReceived=function(e,i){i===google.maps.DirectionsStatus.OK?this.directionsRenderer.setDirections(e):(t.console&&console.warn("ERROR - "+i+", response:"),t.console&&console.log(e))},s.prototype.onDirectionsButtonClicked=function(t){var e="span"===t.target.nodeName.toLowerCase()?t.target.parentNode:t.target,i={lat:parseFloat(e.getAttribute("data-lat")),lng:parseFloat(e.getAttribute("data-lng"))};this.displayDirections(i),this.trigger(NATION2016.Events.DIRECTIONS_CLICKED),t.stopPropagation(),t.preventDefault()},s.prototype.onZoomInButtonClicked=function(t){this.googleMap.setZoom(this.googleMap.getZoom()+1),t.stopPropagation(),t.preventDefault()},s.prototype.onZoomOutButtonClicked=function(t){this.googleMap.setZoom(this.googleMap.getZoom()-1),t.stopPropagation(),t.preventDefault()},s.prototype.onCustomDirectionsButtonClicked=function(t){this.__customDirectionsBubble.className.search("active")<0?this.showDirectionsBubble():this.hideDirectionsBubble(),t.stopPropagation(),t.preventDefault()},s.prototype.onDocumentClicked=function(t){var e=NATION.Utils.getOffset(this.__customDirectionsBubble);e.width=this.__customDirectionsBubble.offsetWidth,e.height=this.__customDirectionsBubble.offsetHeight,(t.pageX<e.left||t.pageX>e.left+e.width||t.pageY<e.top||t.pageY>e.top+e.height)&&this.hideDirectionsBubble()},s.prototype.removeBubbleErrorState=function(){this.__customDirectionsBubble.className.search("error")>=0&&(this.__customDirectionsBubble.className=this.__customDirectionsBubble.className.replace(/ error|error/gi,""))},s.prototype.onCustomDirectionSubmitted=function(e){var i=this.__customDirectionsInput.value;if(""===i.replace(/ /g,"")||i===this.IE9PlaceholderText||i===this.inputErrorText)this.__customDirectionsBubble.className.search("error")<0&&(this.__customDirectionsBubble.className+=" error",this.__customDirectionsInput.value=this.inputErrorText);else{this.removeBubbleErrorState();var s=encodeURIComponent(i),o=this.customDirectionsFormURL.replace("[[startPoint]]",s),n=t.open(o,"_blank");n.focus()}e.stopPropagation(),e.preventDefault()},s.prototype.onCustomDirectionsInputFocusIn=function(t){this.removeBubbleErrorState();var e=this.__customDirectionsInput.value;e!==this.IE9PlaceholderText&&e!==this.inputErrorText||(this.__customDirectionsInput.value="")},s.prototype.onCustomDirectionsInputFocusOut=function(t){var e=this.__customDirectionsInput.value;""===e.replace(/ /g,"")&&(this.__customDirectionsInput.value=this.IE9PlaceholderText)},s.prototype.onFirstMapTilesLoaded=function(t){google.maps.event.removeListener(this.mapListener),this.trigger(NATION2016.Events.MAP_READY)},t.NATION2016.views.contact.StudioMap=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views.global");var s=function(t,e){NATION.EventDispatcher.call(this),this.__DOMElement=t,this.__backgroundShape=null,this.__foregroundShape=null,this.setup()};s.prototype.setup=function(){this.prepareShapes(),this.createListeners()},s.prototype.prepareShapes=function(){this.__foregroundShape=this.__DOMElement.querySelector(".js-foreground-shape"),this.__backgroundShape=this.__DOMElement.querySelector(".js-background-shape"),this.lineLength=this.__backgroundShape.getTotalLength(),this.__backgroundShape.style.strokeDasharray=this.lineLength+" "+this.lineLength,this.__backgroundShape.style.strokeDashoffset=0,this.__foregroundShape.style.strokeDasharray=this.lineLength+" "+this.lineLength,this.__foregroundShape.style.strokeDashoffset=this.lineLength},s.prototype.createListeners=function(){NATION2016.Settings.TOUCH_DEVICE||(this.handler_projectButtonMouseOver=this.onProjectButtonMouseOver.bind(this),this.handler_projectButtonMouseOut=this.onProjectButtonMouseOut.bind(this),this.__DOMElement.addEventListener("mouseenter",this.handler_projectButtonMouseOver),this.__DOMElement.addEventListener("mouseleave",this.handler_projectButtonMouseOut),this.handler_pageLoadComplete=this.onPageLoadComplete.bind(this),t.addEventListener("load",this.handler_pageLoadComplete))},s.prototype.resize=function(){var t=this.__DOMElement.clientWidth-6,e=this.__DOMElement.clientHeight-4,i="M"+(t-27)+" "+(e+2)+" L 30 "+(e+2)+" C -5 "+(e+2)+", -5 2, 30, 2 L "+(t-27)+" 2 C "+(t+11)+" 2, "+(t+11)+" "+(e+2)+", "+(t-27)+" "+(e+2);this.__backgroundShape.setAttribute("d",i),this.__foregroundShape.setAttribute("d",i),this.prepareShapes()},s.prototype.destroy=function(){NATION.Animation.stop(this.__backgroundShape),NATION.Animation.stop(this.__foregroundShape),NATION2016.Settings.TOUCH_DEVICE||(this.__DOMElement.removeEventListener("mouseenter",this.handler_projectButtonMouseOver),this.__DOMElement.removeEventListener("mouseleave",this.handler_projectButtonMouseOut),t.removeEventListener("load",this.handler_pageLoadComplete))},s.prototype.onProjectButtonMouseOver=function(t){NATION.Animation.stop(this.__backgroundShape),NATION.Animation.stop(this.__foregroundShape),this.__foregroundShape.style.strokeDasharray="0 "+this.lineLength,this.__foregroundShape.style.strokeDashoffset=0,this.__foregroundShape.style.opacity=1;var e=this;this.foregroundAnimating=!0,NATION.Animation.start(this.__backgroundShape,{strokeDashoffset:this.lineLength},{jsMode:!0,duration:250,easing:"easeInOutQuad"}),NATION.Animation.start(this.__foregroundShape,{strokeDashoffset:this.lineLength+400,strokeDasharray:"200 "+this.lineLength},{jsMode:!0,delay:200,duration:300,easing:"easeInOutQuad"},function(t){e.foregroundAnimating=!1,t.target.style.strokeDasharray=e.lineLength+" "+e.lineLength,t.target.style.strokeDashoffset=0})},s.prototype.onProjectButtonMouseOut=function(t){NATION.Animation.stop(this.__backgroundShape),NATION.Animation.stop(this.__foregroundShape),this.__backgroundShape.style.strokeDashoffset=0,this.foregroundAnimating?this.onForegroundHidden():NATION.Animation.start(this.__foregroundShape,{opacity:0},{duration:150},this.onForegroundHidden.bind(this))},s.prototype.onForegroundHidden=function(t){this.__foregroundShape.style.strokeDasharray="0 "+this.lineLength,this.__foregroundShape.style.strokeDashoffset=0,this.foregroundAnimating=!1},s.prototype.onPageLoadComplete=function(t){this.resize()},NATION2016.views.global.AnimatedVectorButton=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views.global");var s=function(t,e){NATION.EventDispatcher.call(this),this.__DOMElement=t,this.options=e,this.__paths=[],this.__bouncers=[],this.bounceOffsets=[],this.bounceDelays=[],this.bounceStrokeWidths=[],this.pathDelays=[],this.strokeWidths=[],this.pathReversed=[],this.__bubbles=[],this.bubbleDelays=[],this.bubbleRadii=[],this.bubbleStrokeWidths=[],this.progressedBounces=[],this.progressedBubbles=[],this.setup()};s.prototype=Object.create(NATION.EventDispatcher.prototype),s.prototype.constructor=s,s.prototype.setup=function(){this.preparePaths(),this.prepareBouncers(),this.prepareBubbles(),this.__DOMElement.style.opacity=1},s.prototype.preparePaths=function(){this.__paths=this.__DOMElement.querySelectorAll("[data-path]"),this.pathDelays=[],this.strokeWidths=[],this.pathReversed=[];for(var t,e,i,s=0,o=this.__paths.length;o>s;s++)t=this.__paths[s],i=t.getAttribute("data-delay")?parseInt(t.getAttribute("data-delay"),10):0,this.pathDelays.push(i),e=t.getTotalLength(),this.pathReversed.push(!!t.getAttribute("data-reverse")),t.style.strokeDasharray=e+" "+e,t.style.strokeDashoffset=e,this.strokeWidths.push(NATION.Utils.getStyle(t,"strokeWidth")),t.style.strokeWidth=0},s.prototype.prepareBouncers=function(){this.__bouncers=this.__DOMElement.querySelectorAll("[data-bouncer]"),this.bounceStrokeWidths=[],this.bounceOffsets=[],this.bounceDelays=[];for(var t,e,i,s=0,o=this.__bouncers.length;o>s;s++)this.bounceStrokeWidths.push(NATION.Utils.getStyle(this.__bouncers[s],"strokeWidth")),this.__bouncers[s].style.strokeWidth=0,t=this.__bouncers[s].getAttribute("data-offset-x"),t||(t="0"),e=this.__bouncers[s].getAttribute("data-offset-y"),e||(e="0"),this.bounceOffsets.push(t+"px, "+e+"px"),i=this.__bouncers[s].getAttribute("data-delay"),i||(i=0),this.bounceDelays.push(parseInt(i,10))},s.prototype.prepareBubbles=function(){this.__bubbles=this.__DOMElement.querySelectorAll("[data-bubble]"),this.bubbleStrokeWidths=[],this.bubbleDelays=[],this.bubbleRadii=[];for(var t,e=0,i=this.__bubbles.length;i>e;e++)this.bubbleStrokeWidths.push(NATION.Utils.getStyle(this.__bubbles[e],"strokeWidth")),t=this.__bubbles[e].getAttribute("data-delay"),t||(t=0),this.bubbleDelays.push(t),this.bubbleRadii.push(parseInt(this.__bubbles[e].getAttribute("r"),10)),this.__bubbles[e].style.strokeWidth=0,this.__bubbles[e].setAttribute("r",0)},s.prototype.start=function(t){this.progressedBounces=0,this.progressedBubbles=0;for(var e,i=0,s=this.__paths.length,o=0;s>i;i++)o=this.pathDelays[i],e=0,this.pathReversed[i]&&(this.__paths[i].style.strokeDashoffset=-this.__paths[i].getTotalLength()),t?NATION.Utils.setStyle(this.__paths[i],{strokeWidth:this.strokeWidths[i],strokeDashoffset:0}):NATION.Animation.start(this.__paths[i],{strokeWidth:this.strokeWidths[i],strokeDashoffset:e},{jsMode:!0,delay:o,duration:this.options.duration,easing:this.options.easing});for(i=0,s=this.__bouncers.length;s>i;i++)o=this.bounceDelays[i],t?NATION.Utils.setStyle(this.__bouncers[i],{strokeWidth:this.bounceStrokeWidths[i],transform:"translate(0, 0)"}):NATION.Animation.start(this.__bouncers[i],{strokeWidth:this.bounceStrokeWidths[i]/2,transform:"translate("+this.bounceOffsets[i]+")"},{jsMode:!0,delay:o,duration:120,easing:"easeInQuad"},this.onBounceHalfComplete.bind(this));for(i=0,s=this.__bubbles.length;s>i;i++)t?NATION.Utils.setStyle(this.__bubbles[i],{strokeWidth:0}):NATION.Animation.start(this.__bubbles[i],{strokeWidth:this.bubbleStrokeWidths[i]},{jsMode:!0,delay:this.bubbleDelays[i],duration:120,easing:"easeInQuad",progress:this.onBubbleProgress.bind(this)},this.onBubbleHalfComplete.bind(this))},s.prototype.onBounceHalfComplete=function(t){NATION.Animation.start(t.target,{strokeWidth:this.bounceStrokeWidths[this.progressedBounces],transform:"translate(0px, 0px)"},{jsMode:!0,duration:120,easing:"cubic-bezier(0.175, 0.885, 0.22, 1.5)"}),this.progressedBounces++},s.prototype.onBubbleProgress=function(t,e){var i=7.5*e;t.target.setAttribute("r",i)},s.prototype.onBubbleHalfComplete=function(t){NATION.Animation.start(t.target,{strokeWidth:0},{jsMode:!0,duration:120,easing:"easeOutQuad",progress:this.onBubbleProgressPart2.bind(this)}),this.progressedBubbles++},s.prototype.onBubbleProgressPart2=function(t,e){var i=7.5+7.5*e;t.target.setAttribute("r",i)},s.prototype.stop=function(){for(var t=0,e=this.__paths.length;e>t;t++)NATION.Animation.stop(this.__paths[t]);for(t=0,e=this.__bouncers.length;e>t;t++)NATION.Animation.stop(this.__bouncers[t]);for(t=0,e=this.__bubbles.length;e>t;t++)NATION.Animation.stop(this.__bubbles[t])},s.prototype.reset=function(){this.stop(),this.preparePaths(),this.prepareBouncers(),this.prepareBubbles()},t.NATION2016.views.global.LineAnimation=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views.global");var s=function(t,e,i){NATION.video.StandardVideoPlayer.call(this,t,e,i)};s.prototype=Object.create(NATION.video.StandardVideoPlayer.prototype),s.prototype.constructor=s,s.prototype.createControls=function(){this.controls=new NATION2016.views.global.VideoControls(this.__DOMElement.querySelector(".js-controls-container, .controls-container"),this.controlsOptions),this.options.mute&&this.controls.showUnMuteButton()},t.NATION2016.views.global.LocalVideoPlayer=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views.global");var s=function(t,e,i,s){NATION.EventDispatcher.call(this),this.__DOMElement=t,this.options=e,this.controlsOptions=i,this.__DOMElement.getAttribute("data-poster")&&(this.options.poster=this.__DOMElement.getAttribute("data-poster")),this.controlsOptions!==!1&&(this.controlsOptions.duration||(this.controlsOptions.duration=300),this.controlsOptions.easing||(this.controlsOptions.easing="easeInOutQuad")),this.disableControls=s,this.__placeholder=this.__DOMElement.querySelector(".js-placeholder"),this.placeholderHidden=!1,this.VIDEO_COMPLETE="VideoComplete",this.PLAYER_READY="PlayerReady",this.PLAY_PROGRESS="PlayProgress",this.player=null,this.setup(),this.createListeners()};s.prototype=Object.create(NATION.EventDispatcher.prototype),s.prototype.constructor=s,s.prototype.getHasPlayTriggered=function(){return this.player.getHasPlayTriggered()},s.prototype.playVideo=function(){this.player.isPlaying()||this.player.playVideo(!0)},s.prototype.pauseVideo=function(){this.player.isPlaying()&&this.player.pauseVideo(!0)},s.prototype.seekTo=function(t){this.player.seekTo(t)},s.prototype.getCurrentTime=function(t){return this.player.getCurrentTime(t)},s.prototype.getDuration=function(t){return this.player.getDuration(t)},s.prototype.setup=function(){var t=this.__DOMElement.getAttribute("data-video");if(t)if(t.search(/youtube/i)>-1||t.search(/youtu\.be/i)>-1)this.disableControls?this.player=new NATION.video.BasicYouTubePlayer(this.__DOMElement,this.options):this.player=new NATION2016.views.global.YouTubePlayer(this.__DOMElement,this.options,this.controlsOptions);else if(t.search(/vimeo/i)>-1){this.__DOMElement.className+=" vimeo";var e=this.__DOMElement.querySelector(".js-controls");e&&(e.style.display="none"),this.player=new NATION2016.views.global.VimeoPlayer(this.__DOMElement,this.options)}else this.disableControls?this.player=new NATION.video.BasicVideoPlayer(this.__DOMElement,this.options):this.player=new NATION2016.views.global.LocalVideoPlayer(this.__DOMElement,this.options,this.controlsOptions)},s.prototype.createListeners=function(){this.handler_videoStarted=this.onVideoStarted.bind(this),this.player.addListener(this.player.VIDEO_PLAYING,this.handler_videoStarted),this.handler_playerReady=this.onPlayerReady.bind(this),this.player.addListener(this.player.PLAYER_READY,this.handler_playerReady),this.handler_videoComplete=this.onVideoComplete.bind(this),this.player.addListener(this.player.VIDEO_COMPLETE,this.handler_videoComplete),this.handler_videoPlayProgress=this.onVideoPlayProgress.bind(this),this.player.addListener(this.player.PLAY_PROGRESS,this.handler_videoPlayProgress)},s.prototype.removeListeners=function(){this.player.removeListener(this.player.VIDEO_PLAYING,this.handler_videoStarted),this.player.removeListener(this.player.PLAYER_READY,this.handler_playerReady),this.player.removeListener(this.player.VIDEO_COMPLETE,this.handler_videoComplete),this.player.removeListener(this.player.PLAY_PROGRESS,this.handler_videoPlayProgress)},s.prototype.onVideoStarted=function(t){this.__placeholder&&!this.placeholderHidden&&(this.placeholderHidden=!0,this.__DOMElement.className.search(/started/i)<0&&(this.__DOMElement.className+=" started")),this.__DOMElement.className.search(/active/i)<0&&(this.__DOMElement.className+=" active")},s.prototype.onPlayerReady=function(t){this.trigger(this.PLAYER_READY)},s.prototype.onVideoComplete=function(t){this.trigger(this.VIDEO_COMPLETE)},s.prototype.onVideoPlayProgress=function(t){this.trigger(this.PLAY_PROGRESS)},t.NATION2016.views.global.MultiSourceVideoPlayer=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views.global");var s=function(t,e){NATION.MediaControls.call(this,t,e)};s.prototype=Object.create(NATION.MediaControls.prototype),s.prototype.constructor=s,s.prototype.show=function(){this.controlsShowing=!0,NATION.Animation.start(this.__controls,{transform:"translateY(0px)"},{duration:this.options.duration,easing:this.options.easing})},s.prototype.hide=function(){this.controlsShowing=!1,NATION.Animation.start(this.__controls,{transform:"translateY("+(this.__controls.clientHeight-6)+"px)"},{duration:this.options.duration,easing:this.options.easing})},t.NATION2016.views.global.VideoControls=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views.global");var s=function(t,e,i){NATION.EventDispatcher.call(this),this.__DOMElement=t,this.options=e,this.PLAYER_READY="PlayerReady",this.VIDEO_COMPLETE="VideoComplete",this.VIDEO_PLAYING="VideoStarted",this.VIDEO_STOPPED="VideoStopped",this.PLAY_PROGRESS="PlayProgress",this.PLAYER_API="http://a.vimeocdn.com/js/froogaloop2.min.js",this.PLAYER_URL="http://player.vimeo.com/video/",this.videoURL=this.__DOMElement.getAttribute("data-video"),this.videoID=0,this.videoPlaying=!1,this.player=null,this.playerReady=!1,this.apiLoaded=!1,this.preventEvent=!1,this.vimeoCheckTimer=null,this.firstPlayHasHappened=!1,this.videoURL&&this.setup()};s.prototype=Object.create(NATION.EventDispatcher.prototype),s.prototype.constructor=s,s.prototype.setup=function(){e.getElementById("vimeo-api")?this.onAPILoaded():NATION.Utils.ajax({url:this.PLAYER_API,dataType:"script",id:"vimeo-api",success:this.onAPILoaded.bind(this)})},s.prototype.getHasPlayTriggered=function(){return this.firstPlayHasHappened},s.prototype.getVideoID=function(t){var e=t.search("hd#")>-1?t.search("hd#")-3:t.search("vimeo.com/")+10,i=t.search("&")>-1?t.search("&"):t.length;this.videoID=t.substr(e,i-e);
},s.prototype.isPlaying=function(){return this.videoPlaying},s.prototype.playVideo=function(){this.playerReady&&this.apiLoaded&&(this.player.api("play"),this.videoPlaying=!0)},s.prototype.pauseVideo=function(t){this.playerReady&&this.apiLoaded&&(this.preventEvent=t,this.player.api("pause"),this.videoPlaying=!1)},s.prototype.createListeners=function(){this.player.addEvent("play",this.onVideoPlayed.bind(this)),this.player.addEvent("pause",this.onVideoPaused.bind(this)),this.player.addEvent("finish",this.onVideoFinished.bind(this)),this.__DOMElement.querySelector(".js-video-overlay").addEventListener("click",this.onOverlayClicked.bind(this))},s.prototype.createPlayer=function(){var e=Date.now(),i="<iframe width='100%' height='100%' src='"+this.PLAYER_URL+this.videoID+"?api=1&player_id="+this.videoID+e+"' id='"+this.videoID+e+"' ></iframe>";this.__DOMElement.querySelector(".js-player, .player").innerHTML=i;var s=this.__DOMElement.querySelector("iframe");this.player=t.$f(s)},s.prototype.onAPILoaded=function(){t.$f?(this.apiLoaded=!0,this.getVideoID(this.videoURL),this.createPlayer(),this.player.addEvent("ready",this.onPlayerReady.bind(this))):(this.vimeoCheckTimer&&(clearTimeout(this.vimeoCheckTimer),this.vimeoCheckTimer=null),this.vimeoCheckTimer=setTimeout(this.onAPILoaded.bind(this),300))},s.prototype.onPlayerReady=function(){this.playerReady=!0,this.player.api("setColor",this.__DOMElement.getAttribute("data-player-color")),this.options.autoPlay&&this.playVideo(),this.options.mute&&this.player.api("setVolume",0),this.options.loop&&this.player.api("setLoop",!0),this.createListeners(),this.trigger(this.PLAYER_READY)},s.prototype.onVideoPlayed=function(t){this.videoPlaying=!0,this.firstPlayHasHappened=!0,this.preventEvent?this.preventEvent=!1:this.trigger(this.VIDEO_PLAYING)},s.prototype.onVideoPaused=function(t){this.videoPlaying=!1,this.preventEvent?this.preventEvent=!1:this.trigger(this.VIDEO_STOPPED)},s.prototype.onVideoFinished=function(t){this.videoPlaying=!1,this.preventEvent?this.preventEvent=!1:this.trigger(this.VIDEO_STOPPED)},s.prototype.onOverlayClicked=function(t){var e=this.__DOMElement.querySelector(".js-controls-container");e&&(e.style.display="none");var i=this.__DOMElement.querySelector(".js-placeholder");i&&(i.style.zIndex=-1),this.playVideo(),t.stopPropagation(),t.preventDefault()},t.NATION2016.views.global.VimeoPlayer=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views.global");var s=function(t,e,i){NATION.video.StandardYouTubePlayer.call(this,t,e,i)};s.prototype=Object.create(NATION.video.StandardYouTubePlayer.prototype),s.prototype.constructor=s,s.prototype.createControls=function(){this.controls=new NATION2016.views.global.VideoControls(this.__DOMElement.querySelector(".js-controls-container, .controls-container"),this.controlsOptions),this.options.mute&&this.controls.showUnMuteButton()},t.NATION2016.views.global.YouTubePlayer=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views.header");var s=function(t){NATION.EventDispatcher.call(this),this.__DOMElement=t,this.enabled=!1,this.panelOpen=!0,this.setup()};s.prototype=Object.create(NATION.EventDispatcher.prototype),s.prototype.constructor=s,s.prototype.setup=function(){this.createScrollbar()},s.prototype.createScrollbar=function(){var t=this.__DOMElement.querySelector(".js-scrollable-content"),e=this.__DOMElement.querySelector(".js-scrollbar"),i={enableMouseLock:!0};this.scrollbar=new NATION.VerticalScrollbar(t,e,i)},s.prototype.isOpen=function(){return this.panelOpen},s.prototype.open=function(t){this.panelOpen||(this.panelOpen=!0,this.scrollbar&&this.scrollbar.resize(),t?NATION.Utils.setStyle(this.__DOMElement,{transform:"translateX(-100%)"}):NATION.Animation.start(this.__DOMElement,{transform:"translateX(-100%)"},{duration:400,easing:"easeInOutQuad"}))},s.prototype.close=function(t){this.panelOpen&&(this.panelOpen=!1,t?NATION.Utils.setStyle(this.__DOMElement,{transform:"translateX(0)"}):NATION.Animation.start(this.__DOMElement,{transform:"translateX(0)"},{duration:400,easing:"easeInOutQuad"}))},s.prototype.resize=function(){this.enabled&&(this.__DOMElement.style.height=t.innerHeight+"px"),this.scrollbar&&this.panelOpen&&this.scrollbar.resize()},s.prototype.enable=function(){this.enabled||(this.enabled=!0,this.close(!0))},s.prototype.disable=function(){this.enabled&&(this.enabled=!1,this.close(!0),this.__DOMElement.style.removeProperty("height"))},t.NATION2016.views.header.SideMenu=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views.work");var s=function(t,e){this.__DOMElement=t,NATION.Slideshow.call(this,t,e),this.__flourish=this.__DOMElement.querySelector(".js-flourish"),this.__customStylesheet=null,this.deaultMediaTransform="translateX(-5%) translateY(-5%)",this.currentMediaX=-5,this.currentMediaY=-5,this.targetMediaX=0,this.targetMediaY=0,this.mouseRequest=null,this.projectButtonLength=0,this.animatedButtons=[],this.createAnimatedButtons(),this.createSlideStyles(),this.setFlourishColors(0,!0)};s.prototype=Object.create(NATION.Slideshow.prototype),s.prototype.constructor=s,s.prototype.createAnimatedButtons=function(){for(var t=this.__DOMElement.querySelectorAll(".js-project-button"),e=0,i=t.length;i>e;e++)this.animatedButtons.push(new NATION2016.views.global.AnimatedVectorButton(t[e]))},s.prototype.createListeners=function(){NATION.Slideshow.prototype.createListeners.call(this),NATION2016.Settings.TOUCH_DEVICE||(this.handler_mouseMoved=this.onMouseMoved.bind(this),this.__DOMElement.addEventListener("mousemove",this.handler_mouseMoved),this.onMouseTimerTicked())},s.prototype.destroy=function(){e.getElementsByTagName("head")[0].removeChild(this.__customStylesheet);var t=this.__slideElements[this.previousSlideID].querySelector(".js-slide-image");NATION.Animation.stop(t);var i=this.__slideElements[this.currentSlideID];NATION.Animation.stop(i);var s=i.querySelector(".js-overlay");if(NATION.Animation.stop(s),!NATION2016.Settings.TOUCH_DEVICE){this.__DOMElement.removeEventListener("mousemove",this.handler_mouseMoved),this.mouseRequest&&(cancelAnimationFrame(this.mouseRequest),this.mouseRequest=null);for(var o=0,n=this.animatedButtons.length;n>o;o++)this.animatedButtons[o].destroy()}},s.prototype.resize=function(){for(var t=0,e=this.animatedButtons.length;e>t;t++)this.animatedButtons[t].resize()},s.prototype.createSlideStyles=function(){for(var t,i,s,o,n="",r=0,a=this.__slideElements.length,l=0;a>r;r++)l=r+1,t=this.__slideElements[r].getAttribute("data-primary-color"),i=this.__slideElements[r].getAttribute("data-summary-bg"),s=this.__slideElements[r].getAttribute("data-summary-copy"),o=this.__slideElements[r].getAttribute("data-summary-arrow"),n+=".work-latest .js-slide:nth-child("+l+") .js-primary {\n",n+="	color: "+t+";\n",n+="}\n",n+=".work-latest .js-slide:nth-child("+l+") {\n",n+=" background: "+i+";\n",n+="}\n",n+=".work-latest .js-slide:nth-child("+l+") .js-foreground-shape {\n",n+=" stroke: "+t+";\n",n+="}\n",n+=".work-latest .js-slide:nth-child("+l+") .project-summary {\n",n+=" background: "+i+";\n",n+="}\n",n+=".work-latest .js-slide:nth-child("+l+") .summary-body {\n",n+=" color: "+s+";\n",n+="}\n",n+=".work-latest .js-slide:nth-child("+l+") .project-summary .view-details-button:after {\n",n+=" border-color: "+o+";\n",n+="}\n",n+=".work-latest .js-pips li:nth-child("+l+") a:hover,\n",n+=".work-latest .js-pips li:nth-child("+l+") a.active {\n",n+="	color: "+t+";\n",n+="}\n",n+=".work-latest .js-pips li:nth-child("+l+") .active .number:after,",n+=".work-latest .js-pips li:nth-child("+l+") a:hover .number:after {\n",n+="	background: "+t+";\n",n+="}\n";for(this.__customStylesheet=e.createElement("style"),this.__customStylesheet.stylesheet?this.__customStylesheet.stylesheet.cssText=n:this.__customStylesheet.appendChild(e.createTextNode(n)),e.getElementsByTagName("head")[0].appendChild(this.__customStylesheet),r=0;a>r;r++)r>0&&NATION.Utils.setStyle(this.__slideElements[r],{transform:"translateY(100%)"})},s.prototype.showSlideByID=function(t,e,i){if(t!==this.currentSlideID&&!this.animating){i||(this.animating=!0),this.autoCycling&&this.cycleTimer&&(clearTimeout(this.cycleTimer),this.cycleTimer=null);var s=this.__slideElements[this.currentSlideID],o=this.__slideElements[t],n=s.querySelector(".js-slide-image"),r=o.querySelector(".js-overlay");i?(NATION.Utils.setStyle(s,{transform:"translateY(100%)",zIndex:"auto"}),NATION.Utils.setStyle(o,{transform:"translateY(0)",zIndex:20})):(NATION.Utils.setStyle(s,{transform:"translateY(0)",zIndex:"auto"}),NATION.Utils.setStyle(o,{transform:"translateY(100%)",zIndex:20}),NATION.Utils.setStyle(n,{transform:"translate(-50%, -50%)"}),NATION.Animation.start(n,{transform:"translate(-50%, -57%)"},{duration:this.options.duration,easing:this.options.easing}),NATION.Animation.start(o,{transform:"translateY(0)"},{duration:this.options.duration,easing:this.options.easing}),NATION.Utils.setStyle(r,{opacity:0}),NATION.Animation.start(r,{opacity:1},{delay:250,duration:this.options.duration,easing:this.options.easing},this.onSlideAnimationComplete.bind(this))),this.options.pips&&this.updatePips(this.currentSlideID,t),this.previousSlideID=this.currentSlideID,this.currentSlideID=t,this.positionSlideMedia(),this.setFlourishColors(t),this.trigger(this.SLIDE_CHANGE)}},s.prototype.setFlourishColors=function(t,e){var i=this.__slideElements[t];if(i.getAttribute("data-has-flourish")){for(var s=i.getAttribute("data-primary-color"),o=this.__flourish.querySelectorAll(".js-flourish-graphic"),n=0,r=o.length;r>n;n++)e?o[n].style.fill=s:NATION.Animation.start(o[n],{fill:s},{duration:500});e?this.__flourish.querySelector(".js-flourish-line").style.stroke=s:NATION.Animation.start(this.__flourish.querySelector(".js-flourish-line"),{stroke:s},{duration:500}),1!==this.__flourish.style.opacity&&(e?this.__flourish.style.opacity=1:NATION.Animation.start(this.__flourish,{opacity:1},{duration:300}))}else 0!==this.__flourish.style.opacity&&(e?this.__flourish.style.opacity=0:NATION.Animation.start(this.__flourish,{opacity:0},{duration:300}))},s.prototype.stopFlourishAnimations=function(){for(var t=this.__flourish.querySelectorAll(".js-flourish-graphic"),e=0,i=t.length;i>e;e++)NATION.Animation.stop(t[e]);NATION.Animation.stop(this.__flourish.querySelector(".js-flourish-line")),NATION.Animation.stop(this.__flourish.querySelector(".js-flourish-line")),NATION.Animation.stop(this.__flourish)},s.prototype.onSlideAnimationComplete=function(t){NATION.Slideshow.prototype.onSlideAnimationComplete.call(this,t);var e=this.__slideElements[this.previousSlideID].querySelector(".js-slide-image");NATION.Utils.setStyle(e,{transform:"translate(-50%, -50%)"}),NATION.Utils.setStyle(this.__slideElements[this.previousSlideID],{transform:"translateY(100%)"});var i=this.__slideElements[this.previousSlideID].querySelector(".js-media");NATION.Utils.setStyle(i,{transform:this.deaultMediaTransform})},s.prototype.onMouseMoved=function(t){if(!this.animating){var e=t.pageX/this.__DOMElement.offsetWidth,i=t.pageY/this.__DOMElement.offsetHeight,s=-(5*e),o=-(5*i);this.targetMediaX=s,this.targetMediaY=o}},s.prototype.onMouseTimerTicked=function(){if(!this.animating){var t=(this.targetMediaX-this.currentMediaX)/10,e=(this.targetMediaY-this.currentMediaY)/10;this.currentMediaX=Math.round(1e3*(this.currentMediaX+t))/1e3,this.currentMediaY=Math.round(1e3*(this.currentMediaY+e))/1e3,this.positionSlideMedia()}this.mouseRequest=requestAnimationFrame(this.onMouseTimerTicked.bind(this))},s.prototype.positionSlideMedia=function(){var t=this.__slideElements[this.currentSlideID].querySelector(".js-media");NATION.Utils.setStyle(t,{transform:"translateX("+this.currentMediaX+"%) translateY("+this.currentMediaY+"%)"})},s.prototype.resetSlideMedia=function(t,e,i){var s=this.__slideElements[this.currentSlideID].querySelector(".js-media");t?NATION.Utils.setStyle(s,{transform:this.deaultMediaTransform}):NATION.Animation.start(s,{transform:this.deaultMediaTransform},{duration:e,easing:i}),this.mouseRequest&&(cancelAnimationFrame(this.mouseRequest),this.mouseRequest=null)},t.NATION2016.views.work.WorkSlideshow=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016");var s=function(){this.channels={}};s.prototype.subscribe=function(t,e){return this.channels[t]&&(this.channels[t]=[]),this.channels[t].push({callback:e}),!0},s.prototype.publish=function(t){if(!this.channels[t])return!1;for(var e=0,i=this.channels[t].length;i>e;e++)this.channels[t][e].callback(data)},s.prototype.unsubscribe=function(t,e){if(!e)throw new Error("NATION2016.Mediator: No callback supplied to the unsubscribe method for event name '"+t+"'.");if(!this.channels[t])return!1;for(var i=0,s=this.channels[t].length,o=[];s>i;i++)this.channels[t][i].callback!=e&&o.push(this.channels[t][i]);this.channels=o},s.prototype.unsubscribeAll=function(t){return this.channels[t]?void delete this.channels[t]:!1},t.NATION2016.Mediator=new s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016");var s=function(){NATION.EventDispatcher.call(this),this.siteDomain=t.location.protocol+"//"+t.location.host,this.urlPrefix="",this.urlSuffix="",this.pageLoaded=!1,t.location.pathname.search("/static")>=0&&(this.urlPrefix+="/static"),this.activePath="/",this.activeSections=[],this.previousSections=[],this.currentSection="home",this.pageData="",this.colorSchemeStyles="",this.pageDataURL="",this.previousPageDataURL="",this.headerTitle="",this.loadingNotFoundPage=!1,this.createListeners(),this.checkCurrentPage(),this.activePath=this.pageDataURL};s.prototype=Object.create(NATION.EventDispatcher.prototype),s.prototype.constructor=s,s.prototype.createListeners=function(){t.addEventListener("popstate",this.onPopState.bind(this)),e.documentElement.addEventListener("click",this.onElementClicked.bind(this))},s.prototype.getCurrentPath=function(){return this.pageDataURL},s.prototype.getPreviousPath=function(){return this.previousPageDataURL},s.prototype.getNextPageData=function(){return this.pageData},s.prototype.getColorSchemeStyles=function(){return this.colorSchemeStyles},s.prototype.getHeaderTitle=function(){return this.headerTitle},s.prototype.isPageLoadForced=function(){return this.pageLoadForced},s.prototype.setPageLoadForced=function(t){this.pageLoadForced=t},s.prototype.getActiveSections=function(){return this.activeSections},s.prototype.overrideActiveSections=function(t){this.activeSections=t,this.currentSection=this.activeSections[0]?this.activeSections[0]:"home"},s.prototype.getPreviousSections=function(){return this.previousSections},s.prototype.getCurrentSection=function(){return this.currentSection},s.prototype.isPageLoaded=function(){return this.pageLoaded},s.prototype.onElementClicked=function(t){var e="";t.target!==t.currentTarget&&((e=t.target.getAttribute("data-view"))||(e=this.findParentWithView(t.target)))&&(e!==this.activePath&&(history.pushState({},"Nation",this.urlPrefix+e),this.onPopState()),t.stopPropagation(),t.preventDefault())},s.prototype.findParentWithView=function(t){for(var e="";t.parentNode&&t.parentNode.getAttribute;){if(e=t.parentNode.getAttribute("data-view"))return e;t=t.parentNode}return!1},s.prototype.checkCurrentPage=function(){this.previousSections=this.activeSections;var e=t.history.location||t.location,i=new RegExp(this.siteDomain+"|#|","gi");e=e.toString().replace(i,""),"/"!==e&&(e=this.removeTrailingSlash(e)),this.previousPageDataURL=this.pageDataURL,this.pageDataURL=e,i=new RegExp(this.siteDomain+"|"+this.urlPrefix,"gi"),e=e.replace(i,""),"/"===e.charAt(0)&&(e=e.substring(1,e.length)),""===e&&(e="home"),this.activeSections=e.split("/"),this.currentSection=this.activeSections[0]?this.activeSections[0]:"home"},s.prototype.onPopState=function(t){this.checkCurrentPage(),this.pageDataURL!=this.activePath&&(this.activePath=this.pageDataURL,this.trigger(NATION2016.Events.PAGE_REQUESTED),this.loadPage(this.pageDataURL))},s.prototype.removeTrailingSlash=function(t){return"/"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t},s.prototype.quickLoadPage=function(t){this.activePath=t,t=this.urlPrefix+t,this.loadPage(t)},s.prototype.loadPage=function(t){ga&&(ga("set","page",t),ga("send","pageview")),this.pageLoaded=!1,NATION.Utils.ajax({url:t,success:this.onPageLoaded.bind(this),error:this.onPageLoadError.bind(this)})},s.prototype.onPageLoaded=function(t){this.pageLoaded=!0,this.loadingNotFoundPage=!1;var i=e.createElement("div");i.innerHTML=t;var s=i.querySelector("[data-page-content]").innerHTML;this.pageData=s,this.colorSchemeStyles=i.querySelector("#case-study-colors"),this.headerTitle=i.getElementsByTagName("title")[0].innerHTML,this.trigger(NATION2016.Events.PAGE_LOAD_COMPLETE)},s.prototype.onPageLoadError=function(t,e){var i=this.ERROR_PAGE_NOT_FOUND.replace("{{url}}",this.activePath).replace("{{status}}",t).replace("{{responseText}}",e);if(this.loadingNotFoundPage)throw new Error(i);console&&console.warn(i),this.loadingNotFoundPage=!0,this.loadPage("/not-found")},s.prototype.ERROR_PAGE_NOT_FOUND="NATION2016.Router: The page '{{url}}' could not be loaded. Status: '{{status}}', response: '{{responseText}}'",t.NATION2016.Router=new s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016"),t.NATION2016.Events={PAGE_REQUESTED:"PageRequested",PAGE_LOAD_COMPLETE:"ShowSection",SHOW_COMPLETE:"ShowComplete",HIDE_COMPLETE:"HideComplete",VIEW_READY:"ViewReady",DIRECTIONS_CLICKED:"DirectionsClicked",MAP_READY:"MapReady",SUBNAV_SHOWN:"SubnavShown",USE_TRANSPARENT_HEADER:"UseTransparentHeader"}}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.models"),t.NATION2016.Settings={TOUCH_DEVICE:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),IS_IE9:e.body.className.search(/ie9/i)>-1,headerHeight:0,fullPanelOffset:80,mobileHeader:!1,firstPageLoad:!0}}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views");var s=function(t){NATION2016.views.BasicPageView.call(this),this.__DOMElement=t,this.__introHeader=null,this.__introTitle=null,this.__headerVideo=null,this.__approachVideos=[],this.approachVideoPlayers=[],this.__subtitleGraphic=null,this.__headerSlideshowElement=null,this.headerSlideshow=null,this.__titleCopy=null,this.videoPlayer=null};s.prototype=Object.create(NATION2016.views.BasicPageView.prototype),s.prototype.constructor=s,s.prototype.build=function(t){NATION2016.views.BasicPageView.prototype.build.call(this,t,!0),this.__introTitle=this.__DOMElement.querySelector(".js-intro-title"),this.__titleCopy=this.__DOMElement.querySelector(".js-title-copy"),this.__introHeader=this.__DOMElement.querySelector(".js-intro-header"),this.__headerVideo=this.__introHeader.querySelector(".js-video-player"),this.__approachVideos=this.__DOMElement.querySelectorAll(".js-approach .js-video-player"),this.__subtitleGraphic=this.__introHeader.querySelector(".js-subtitle-graphic"),this.__headerImage=this.__introHeader.querySelector("img"),this.headerImageTimer=null,this.createVideoPlayers(),this.createListeners(),this.resize(),NATION2016.Settings.TOUCH_DEVICE?this.checkHeaderImageLoaded():this.trigger(NATION2016.Events.VIEW_READY)},s.prototype.checkHeaderImageLoaded=function(){this.headerImageTimer&&(clearTimeout(this.headerImageTimer),this.headerImageTimer=null),this.__headerImage.complete?this.trigger(NATION2016.Events.VIEW_READY):this.headerImageTimer=setTimeout(this.checkHeaderImageLoaded.bind(this),200)},s.prototype.destroy=function(){NATION2016.views.BasicPageView.prototype.destroy.call(this)},s.prototype.createVideoPlayers=function(){if(!NATION2016.Settings.TOUCH_DEVICE){var t={mute:!0,preload:!0,loop:!0,autoPlay:!0};this.videoPlayer=new NATION.video.BasicVideoPlayer(this.__headerVideo,t);for(var e,i=0,s=this.__approachVideos.length;s>i;i++)e=new NATION.video.BasicVideoPlayer(this.__approachVideos[i],t),this.approachVideoPlayers.push(e)}},s.prototype.createListeners=function(){NATION2016.views.BasicPageView.prototype.createListeners.call(this)},s.prototype.resize=function(){var e=NATION2016.Settings.TOUCH_DEVICE?t.outerWidth:t.innerWidth;if(this.__introHeader)if(e>550){var i=NATION2016.Settings.TOUCH_DEVICE?t.outerHeight:t.innerHeight;this.__introHeader.style.height=i-(NATION2016.Settings.headerHeight+this.__introTitle.clientHeight-6+NATION2016.Settings.fullPanelOffset)+"px"}else this.__introHeader.style.removeProperty("height")},t.NATION2016.views.AboutView=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views");var s=function(t){NATION2016.views.BasicPageView.call(this),this.__DOMElement=t,this.__videoElement=null,this.__videoPlaceholderImage=null,this.bgVideo=null,this.__accordionElement=null,this.__siteContent=null,this.__mainTitle=null,this.__careersContent=null,this.__contactsPanel=null,this.__positionsHeader=null,this.__noVacanciesPanel=null,this.__applyButtons=[],this.animatedButtons=[],this.jobsAccordion=null};s.prototype=Object.create(NATION2016.views.BasicPageView.prototype),s.prototype.constructor=s,s.prototype.build=function(t){NATION2016.views.BasicPageView.prototype.build.call(this,t),this.__accordionElement=this.__DOMElement.querySelector(".js-accordion"),this.__accordionElement&&this.createAccordion(),this.__mainTitle=this.__DOMElement.querySelector(".js-fade-title"),this.__careersContent=this.__DOMElement.querySelector(".js-careers-content"),this.__contactsPanel=this.__DOMElement.querySelector(".js-contacts-panel"),this.__siteContent=e.querySelector(".page-content"),this.__videoElement=this.__DOMElement.querySelector(".js-bg-video"),this.__positionsHeader=this.__DOMElement.querySelector(".js-positions-header"),this.__noVacanciesPanel=this.__DOMElement.querySelector(".js-no-vacancies-panel"),this.__applyButtons=this.__DOMElement.querySelectorAll(".js-apply-button"),this.__videoPlaceholderImage=this.__DOMElement.querySelector(".js-placeholder img"),this.createAnimatedButtons(),this.__videoElement&&!NATION2016.Settings.TOUCH_DEVICE&&this.createVideoPlayer(),this.resize(),this.__videoPlaceholderImage&&!NATION2016.Settings.TOUCH_DEVICE||this.trigger(NATION2016.Events.VIEW_READY)},s.prototype.createAnimatedButtons=function(){for(var t=0,e=this.__applyButtons.length;e>t;t++)this.animatedButtons.push(new NATION2016.views.global.AnimatedVectorButton(this.__applyButtons[t]))},s.prototype.resize=function(){if(this.__noVacanciesPanel){var e=NATION2016.Settings.TOUCH_DEVICE?t.outerHeight:t.innerHeight;this.__noVacanciesPanel.style.height=e-(this.__positionsHeader.clientHeight+parseInt(NATION.Utils.getStyle(this.__siteContent,"paddingTop"),10))+"px"}if(this.jobsAccordion){if(1===this.jobsAccordion.getTotalSections()&&-1===this.jobsAccordion.getOpenPanelID()){var i=this.__DOMElement.querySelector(".js-header");i.style.height="auto",this.__contactsPanel.style.height="auto";var s=this.__careersContent.clientHeight,o=this.__siteContent.clientHeight-parseInt(NATION.Utils.getStyle(this.__siteContent,"paddingTop"),10)-this.__positionsHeader.clientHeight;if(o>s){var n=Math.floor(o/2)+"px";i.style.height=n,this.__contactsPanel.style.height=n}}if(this.jobsAccordion)for(var r=0,a=this.animatedButtons.length;a>r;r++)this.animatedButtons[r].resize()}},s.prototype.removeListeners=function(){NATION2016.views.BasicPageView.prototype.removeListeners.call(this),this.bgVideo&&this.bgVideo.removeListener(this.bgVideo.PLAYER_READY,this.handler_playerReady),this.jobsAccordion&&this.jobsAccordion.removeListener(this.jobsAccordion.PANEL_OPEN_COMPLETE,this.handler_accordionOpened)},s.prototype.createAccordion=function(){var t={easing:"easeInOutQuad",duration:700,autoScroll:!0,autoScrollOffset:58};this.jobsAccordion=new NATION.Accordion(this.__accordionElement,t),this.handler_accordionOpened=this.onAccordionOpened.bind(this),this.jobsAccordion.addListener(this.jobsAccordion.PANEL_OPEN_COMPLETE,this.handler_accordionOpened)},s.prototype.createVideoPlayer=function(){if(!NATION2016.Settings.TOUCH_DEVICE){var t={loop:!0,mute:!0,autoPlay:!0};this.bgVideo=new NATION.video.BasicVideoPlayer(this.__videoElement,t),this.handler_playerReady=this.onBGVideoReady.bind(this),this.bgVideo.addListener(this.bgVideo.PLAYER_READY,this.handler_playerReady)}this.__videoPlaceholderImage.complete?this.trigger(NATION2016.Events.VIEW_READY):(this.handler_placeholderLoaded=this.onPlaceholderLoaded.bind(this),this.__videoPlaceholderImage.addEventListener("load",this.handler_placeholderLoaded))},s.prototype.onBGVideoReady=function(t){this.__videoElement.style.opacity=0,NATION.Animation.start(this.__videoElement,{opacity:1},{duration:400}),this.bgVideo.playVideo()},s.prototype.onPlaceholderLoaded=function(t){this.trigger(NATION2016.Events.VIEW_READY)},s.prototype.destroy=function(){this.removeListeners(),this.jobsAccordion&&this.jobsAccordion.destroy(),this.bgVideo&&this.bgVideo.pauseVideo();for(var t=0,e=this.animatedButtons.length;e>t;t++)this.animatedButtons[t].destroy();NATION2016.views.BasicPageView.prototype.destroy.call(this)},s.prototype.onAccordionOpened=function(t){this.animatedButtons[this.jobsAccordion.getOpenPanelID()].resize()},t.NATION2016.views.CareersView=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views");var s=function(t){NATION2016.views.BasicPageView.call(this),this.__DOMElement=t,this.__mapContainer=null,this.__optionsTitle=null,this.__optionsPanel=null,this.studioMap=null};s.prototype=Object.create(NATION2016.views.BasicPageView.prototype),s.prototype.constructor=s,s.prototype.build=function(t){NATION2016.views.BasicPageView.prototype.build.call(this,t,!0),this.__mapContainer=this.__DOMElement.querySelector(".js-studio-map"),this.__optionsTitle=this.__DOMElement.querySelector(".js-options-title"),this.__optionsPanel=this.__DOMElement.querySelector(".js-options-panel"),this.createMap(),this.createListeners(),this.trigger(NATION2016.Events.VIEW_READY)},s.prototype.createMap=function(){this.studioMap=new NATION2016.views.contact.StudioMap(this.__mapContainer)},s.prototype.resize=function(){if(this.studioMap.resize(),this.__optionsPanel){var e=NATION.Utils.getStyle(this.__optionsPanel,"marginTop");e||(e=0),e=parseInt(e,10);var i=t.innerHeight-(NATION2016.Settings.headerHeight+this.__optionsTitle.clientHeight+e-6+NATION2016.Settings.fullPanelOffset)+"px";this.__optionsPanel.style.height=i}},s.prototype.destroy=function(){NATION2016.views.BasicPageView.prototype.destroy.call(this),this.studioMap&&this.studioMap.destroy(),this.removeListeners()},s.prototype.createListeners=function(){NATION2016.views.BasicPageView.prototype.createListeners.call(this),this.studioMap&&(this.handler_directionsButtonClicked=this.onDirectionsButtonClicked.bind(this),this.studioMap.addListener(NATION2016.Events.DIRECTIONS_CLICKED,this.handler_directionsButtonClicked))},s.prototype.removeListeners=function(){NATION2016.views.BasicPageView.prototype.removeListeners.call(this),this.studioMap&&(this.studioMap.removeListener(NATION2016.Events.DIRECTIONS_CLICKED,this.handler_directionsButtonClicked),this.studioMap.removeListener(NATION2016.Events.MAP_READY,this.handler_mapReady))},s.prototype.scrollToMap=function(){this.handler_mouseWheelScrolled=this.onMouseWheelScrolled.bind(this),t.addEventListener("wheel",this.handler_mouseWheelScrolled),t.addEventListener("DOMMouseWheel",this.handler_mouseWheelScrolled);var e=NATION.Utils.getOffset(this.__mapContainer).top-59;NATION.Utils.getPageElement().scrollTop!==e&&NATION.Animation.start(NATION.Utils.getPageElement(),{scrollTop:e},{duration:500,easing:"easeInOutQuad"},this.onAutoScrollComplete.bind(this))},s.prototype.onMouseWheelScrolled=function(t){this.onAutoScrollComplete(t)},s.prototype.onAutoScrollComplete=function(e){t.removeEventListener("wheel",this.handler_mouseWheelScrolled),t.removeEventListener("DOMMouseWheel",this.handler_mouseWheelScrolled),NATION.Animation.stop(NATION.Utils.getPageElement())},s.prototype.onDirectionsButtonClicked=function(t){this.scrollToMap()},t.NATION2016.views.ContactView=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views");var s=function(t){NATION2016.views.BasicPageView.call(this),this.__DOMElement=t};s.prototype=Object.create(NATION2016.views.BasicPageView.prototype),s.prototype.constructor=s,s.prototype.build=function(t){NATION2016.views.BasicPageView.prototype.build.call(this,t,!0),this.trigger(NATION2016.Events.VIEW_READY)},t.NATION2016.views.ErrorView=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views");var s=function(t){NATION2016.views.BasicPageView.call(this),this.__DOMElement=t,this.REQUIRED_FLAG_LOOPS=3,this.OVERLAY_DELAY=2500,this.REEL_VIDEO_WIDTH=1920,this.REEL_VIDEO_HEIGHT=1080,this.__flagVideoElement=null,this.__loopVideoElement=null,this.__reelVideoElement=null,this.__reelCloseButton=null,this.__reelButton=null,this.__title=null,this.overlayTimer=null,this.__subtitle=null,this.__subnav=null,this.flagVideo=null,this.loopVideo=null,this.reelVideo=null,this.flagLoops=0,this.logoAnimation=null,this.__subnavDivider=null,this.__subnavLeft=null,this.__subnavRight=null,this.__subnavUnderlineLeft=null,this.__subnavUnderlineRight=null,this.reelVideoPadding=0};s.prototype=Object.create(NATION2016.views.BasicPageView.prototype),s.prototype.constructor=s,s.prototype.build=function(t){NATION2016.views.BasicPageView.prototype.build.call(this,t,!0),this.prepareElements(),this.createLineAnimations(),this.createVideos(),this.createListeners(),NATION2016.Settings.firstPageLoad||(this.logoAnimation.start(!0),this.loopVideo&&(this.handler_loopVideoReady=this.onLoopVideoReady.bind(this),this.loopVideo.addListener(this.loopVideo.PLAYER_READY,this.handler_loopVideoReady))),this.__loopVideoElement||!NATION2016.Settings.firstPageLoad||NATION2016.Settings.TOUCH_DEVICE?this.revealOverlay(!0):this.overlayTimer=setTimeout(this.onOverlayTimerTicked.bind(this),this.OVERLAY_DELAY),this.trigger(NATION2016.Events.VIEW_READY)},s.prototype.createLineAnimations=function(){var t={duration:250,easing:"linear"};this.logoAnimation=new NATION2016.views.global.LineAnimation(this.__title,t)},s.prototype.onLoopVideoReady=function(){this.playLoopVideo()},s.prototype.prepareElements=function(){this.__flagVideoElement=this.__DOMElement.querySelector(".js-flag-video"),this.__loopVideoElement=this.__DOMElement.querySelector(".js-loop-video"),this.__reelButton=this.__DOMElement.querySelector(".js-reel-button"),this.__reelVideoElement=this.__DOMElement.querySelector(".js-reel-video"),this.__reelPlayerContainer=this.__reelVideoElement.querySelector(".js-player"),this.__reelPlayerControls=this.__reelVideoElement.querySelector(".js-controls-container"),this.__reelCloseButton=this.__reelVideoElement.querySelector(".js-close-button"),this.__subnav=this.__DOMElement.querySelector(".js-subnav"),this.__subnavDivider=this.__subnav.querySelector(".divider"),this.__subnavLeft=this.__subnav.querySelectorAll(".copy")[0],this.__subnavRight=this.__subnav.querySelectorAll(".copy")[1],this.__subnavUnderlineLeft=this.__subnavLeft.querySelector(".underline"),this.__subnavUnderlineRight=this.__subnavRight.querySelector(".underline"),this.__title=this.__DOMElement.querySelector(".js-title"),this.__subtitle=this.__DOMElement.querySelector(".js-subtitle"),this.reelVideoPadding=NATION.Utils.getStyle(this.__reelVideoElement.querySelector(".video-content"),"left"),this.reelVideoPadding||(this.reelVideoPadding=0),this.reelVideoPadding=parseInt(this.reelVideoPadding,10)},s.prototype.createVideos=function(){var t={mute:!0,preload:!0},e={fade:!0};this.__loopVideoElement||(t.loop=!0),NATION2016.Settings.TOUCH_DEVICE||((this.__loopVideoElement&&NATION2016.Settings.firstPageLoad||!this.__loopVideoElement)&&(this.flagVideo=new NATION2016.views.global.MultiSourceVideoPlayer(this.__flagVideoElement,t,!1,!0)),
this.__loopVideoElement&&(t.loop=!0,this.loopVideo=new NATION2016.views.global.MultiSourceVideoPlayer(this.__loopVideoElement,t,!1,!0))),t.loop=!1,t.mute=!1,t.mobileMode=NATION2016.Settings.TOUCH_DEVICE,e.mobileMode=NATION2016.Settings.TOUCH_DEVICE,this.reelVideo=new NATION2016.views.global.MultiSourceVideoPlayer(this.__reelVideoElement,t,e,!1)},s.prototype.createListeners=function(){NATION2016.views.BasicPageView.prototype.createListeners.call(this),this.flagVideo&&(this.handler_videoReady=this.onFlagVideoReady.bind(this),this.flagVideo.addListener(this.flagVideo.PLAYER_READY,this.handler_videoReady),this.__loopVideoElement&&(this.handler_flagVideoComplete=this.onFlagVideoComplete.bind(this),this.flagVideo.addListener(this.flagVideo.VIDEO_COMPLETE,this.handler_flagVideoComplete))),this.handler_reelButtonClicked=this.onReelButtonClicked.bind(this),this.__reelButton.addEventListener("click",this.handler_reelButtonClicked),this.handler_reelCloseClicked=this.onReelCloseButtonClicked.bind(this),this.__reelCloseButton.addEventListener("click",this.handler_reelCloseClicked)},s.prototype.removeListeners=function(){NATION2016.views.BasicPageView.prototype.removeListeners.call(this),this.flagVideo&&(this.flagVideo.removeListener(this.flagVideo.PLAYER_READY,this.handler_videoReady),this.flagVideo.removeListener(this.flagVideo.VIDEO_COMPLETE,this.handler_flagVideoComplete)),this.__reelButton.removeEventListener("click",this.handler_reelButtonClicked),this.__reelCloseButton.removeEventListener("click",this.handler_reelCloseClicked)},s.prototype.onFlagVideoReady=function(t){this.flagVideo.playVideo(),NATION.Animation.start(this.__flagVideoElement,{opacity:1},{duration:400})},s.prototype.onOverlayTimerTicked=function(t){this.revealOverlay()},s.prototype.onFlagVideoComplete=function(t){this.flagLoops++,1===this.flagLoops&&this.revealOverlay(),this.flagLoops>=this.REQUIRED_FLAG_LOOPS&&(this.flagVideo.removeListener(this.flagVideo.VIDEO_COMPLETE,this.handler_flagVideoComplete),this.playLoopVideo(),NATION.Animation.start(this.__flagVideoElement,{opacity:0},{duration:400},this.onFlagVideoHideComplete.bind(this))),this.flagVideo.seekTo(0),this.flagVideo.playVideo()},s.prototype.revealOverlay=function(t){t?(this.__title.style.opacity=1,this.__subtitle.style.opacity=1,this.__subnav.style.opacity=1,this.__subnavRight.style.opacity=1,this.__subnavUnderlineLeft.style.opacity=1,this.__subnavUnderlineRight.style.opacity=1,this.logoAnimation.start(!0),this.trigger(NATION2016.Events.SUBNAV_SHOWN)):(this.logoAnimation.start(),NATION.Animation.start(this.__subtitle,{opacity:1},{delay:800,duration:500}),NATION.Utils.setStyle(this.__subnavLeft,{transform:"translateX(5%)"}),NATION.Utils.setStyle(this.__subnavRight,{transform:"translateX(-5%)",opacity:0}),NATION.Utils.setStyle(this.__subnavDivider,{transform:"scaleX(0.3)"}),NATION.Animation.start(this.__subnav,{opacity:1},{delay:1600,duration:150,easing:"easeInOutQuad"}),NATION.Animation.start(this.__subnavLeft,{transform:"translateX(-5%)"},{delay:1600,duration:150,easing:"easeInQuad"}),NATION.Animation.start(this.__subnavRight,{opacity:1,transform:"translateX(5%)"},{delay:1600,duration:150,easing:"easeInQuad"}),NATION.Animation.start(this.__subnavUnderlineLeft,{opacity:1},{delay:1750,duration:200}),NATION.Animation.start(this.__subnavUnderlineRight,{opacity:1},{delay:1750,duration:200}),NATION.Animation.start(this.__subnavDivider,{transform:"scaleX(1.1)"},{delay:1600,duration:150,easing:"easeInQuad"},this.onDividerEnlarged.bind(this)))},s.prototype.onDividerEnlarged=function(t){NATION.Animation.start(this.__subnavLeft,{transform:"translateX(1.5%)"},{duration:150,easing:"easeOutQuad"}),NATION.Animation.start(this.__subnavRight,{transform:"translateX(-1.5%)"},{duration:150,easing:"easeOutQuad"}),NATION.Animation.start(this.__subnavDivider,{transform:"scaleX(0.9)"},{duration:150,easing:"easeOutQuad"},this.onDividerShrunk.bind(this))},s.prototype.onDividerShrunk=function(t){this.trigger(NATION2016.Events.SUBNAV_SHOWN),NATION.Animation.start(this.__subnavLeft,{transform:"translateX(0)"},{duration:400,easing:"easeOutQuad"}),NATION.Animation.start(this.__subnavRight,{transform:"translateX(0)"},{duration:400,easing:"easeOutQuad"}),NATION.Animation.start(this.__subnavDivider,{transform:"scaleX(1)"},{duration:400,easing:"easeOutQuad"},this.onSubnavShown.bind(this))},s.prototype.onSubnavShown=function(t){},s.prototype.playLoopVideo=function(t){this.loopVideo&&(this.__loopVideoElement.style.opacity=1,this.loopVideo.playVideo())},s.prototype.onFlagVideoHideComplete=function(t){this.__flagVideoElement.style.display="none"},s.prototype.onReelButtonClicked=function(t){this.__reelVideoElement.style.display="block",this.__reelVideoElement.style.opacity=0,NATION.Animation.start(this.__reelVideoElement,{opacity:1},{duration:300}),this.loopVideo&&this.loopVideo.pauseVideo(),NATION2016.Settings.TOUCH_DEVICE&&!this.reelVideo.getHasPlayTriggered()||this.reelVideo.playVideo(),t.stopPropagation(),t.preventDefault()},s.prototype.onReelCloseButtonClicked=function(t){this.loopVideo&&this.loopVideo.playVideo(),this.reelVideo.seekTo(0),this.reelVideo.pauseVideo(),NATION.Animation.start(this.__reelVideoElement,{opacity:0},{duration:300},this.onReelHidden.bind(this)),t.stopPropagation(),t.preventDefault()},s.prototype.destroy=function(){this.flagVideo&&this.flagVideo.pauseVideo(),this.loopVideo&&this.loopVideo.pauseVideo(),this.reelVideo&&this.reelVideo.pauseVideo(),this.logoAnimation&&this.logoAnimation.stop(),this.overlayTimer&&(clearTimeout(this.overlayTimer),this.overlayTimer=null),this.removeListeners(),NATION.Animation.stop(this.__reelVideoElement),NATION2016.views.BasicPageView.prototype.destroy.call(this)},s.prototype.resize=function(){var e=0,i=0,s=2*this.reelVideoPadding;this.REEL_VIDEO_WIDTH/(t.innerWidth-s)>this.REEL_VIDEO_HEIGHT/(t.innerHeight-s)?(e="100%",i=(t.innerWidth-s)/this.REEL_VIDEO_WIDTH*this.REEL_VIDEO_HEIGHT+"px"):(i="100%",e=(t.innerHeight-s)/this.REEL_VIDEO_HEIGHT*this.REEL_VIDEO_WIDTH+"px"),this.__reelPlayerControls.style.width=e,this.__reelPlayerControls.style.height=i},s.prototype.onReelHidden=function(){this.__reelVideoElement.style.display="none"},t.NATION2016.views.HomeView=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views");var s=function(t){this.__DOMElement=t,this.__navLinks=this.__DOMElement.querySelectorAll(".js-main-nav [data-view]"),this.__breadcrumbs=this.__DOMElement.querySelector(".js-breadcrumbs"),this.__headerBackground=this.__DOMElement.querySelector(".js-header-background"),this.__menuButton=this.__DOMElement.querySelector(".js-menu-button"),this.__menuButtonLabel=this.__menuButton.querySelector(".js-label"),this.__mainMenu=this.__DOMElement.querySelector(".js-menu"),this.sideMenu=null,this.activeSectionID=-1,this.previousSectionArrayLength=-1,this.headerSolid=!1,this.MAX_SCROLL=100,this.sectionArray=[],this.backCopy=this.__breadcrumbs.getAttribute("data-back-copy"),this.previousScrollProgress=NATION.Utils.getPageElement().scrollTop>this.MAX_SCROLL?1:NATION.Utils.getPageElement().scrollTop/this.MAX_SCROLL,this.smallModeActive=!1,this.sideMenuEnabled=!1,this.setup(),this.createListeners()};s.prototype.setup=function(){for(var t=0,e=this.__navLinks.length;e>t;t++)this.__navLinks[t].className.search(/active/i)>=0&&(this.__navLinks[t].className=this.__navLinks[t].className.replace(/ active|active/i,""));this.menuButtonOpenCopy=this.__menuButtonLabel.innerHTML,this.menuButtonCloseCopy=this.__menuButtonLabel.getAttribute("data-close"),this.decideMobileClass(),this.createSideMenu(),this.resize()},s.prototype.decideMobileClass=function(){NATION2016.Settings.TOUCH_DEVICE&&(e.documentElement.className+=" touch")},s.prototype.getSectionIndex=function(t){for(var e=-1,i=0,s=this.__navLinks.length;s>i;i++)if(this.__navLinks[i].getAttribute("data-view").search(t)>-1){e=i;break}return e},s.prototype.openSideMenu=function(t){this.sideMenuEnabled&&(this.sideMenu.open(t),this.__DOMElement.className+=" menu-open",this.showCloseIcon(t))},s.prototype.show=function(t){t?this.__DOMElement.style.opacity=1:NATION.Animation.start(this.__DOMElement,{opacity:1},{duration:300})},s.prototype.showCloseIcon=function(t){if(this.menuOpenColor=NATION.Utils.getStyle(this.__menuButton.querySelector(".top"),"backgroundColor"),t)NATION.Utils.setStyle(this.__menuButton.querySelector(".top"),{top:"50%",transform:"translateY(-1px) rotate(-45deg)"}),NATION.Utils.setStyle(this.__menuButton.querySelector(".bottom"),{bottom:"50%",transform:"translateY(-1px)"}),NATION.Utils.setStyle(this.__menuButton.querySelector(".arrowhead"),{transform:"scale(0, 0)"}),NATION.Utils.setStyle(this.__menuButton.querySelector(".center"),{background:"#1299DC",transform:"rotate(45deg)"}),this.__menuButtonLabel.innerHTML=this.menuButtonCloseCopy;else{var e="easeInQuad",i=150;NATION.Animation.start(this.__menuButton.querySelector(".top"),{top:"50%",transform:"translateY(-1px)"},{duration:i,easing:e}),NATION.Animation.start(this.__menuButton.querySelector(".bottom"),{bottom:"50%",transform:"translateY(1px)"},{duration:i,easing:e}),NATION.Animation.start(this.__menuButton.querySelector(".arrowhead"),{transform:"scale(0, 0)"},{duration:i,easing:e}),NATION.Animation.start(this.__menuButton.querySelector(".center"),{transform:"translateX(0)"},{duration:i,easing:e},this.animateToCloseIcon.bind(this))}},s.prototype.animateToCloseIcon=function(){var t="easeOutQuart",e=250;this.__menuButtonLabel.innerHTML=this.menuButtonCloseCopy,this.__menuButton.querySelector(".bottom").style.display="none",NATION.Animation.start(this.__menuButton.querySelector(".top"),{background:"#1299DC",transform:"translateY(-1px) rotate(-45deg)"},{duration:e,easing:t}),NATION.Animation.start(this.__menuButton.querySelector(".center"),{background:"#1299DC",transform:"rotate(45deg)"},{duration:e,easing:t})},s.prototype.showOpenIcon=function(t){if(t)NATION.Utils.setStyle(this.__menuButton.querySelector(".top"),{top:0,background:"#0965DA",transform:"translateY(0)"}),NATION.Utils.setStyle(this.__menuButton.querySelector(".bottom"),{bottom:0,transform:"translateY(0)"}),NATION.Utils.setStyle(this.__menuButton.querySelector(".center"),{transition:"none",background:"#0965DA",transform:"translateX(0)"}),this.clearMenuIconStyles(),this.__menuButtonLabel.innerHTML=this.menuButtonOpenCopy;else{var e="easeInQuad",i=200;NATION.Animation.start(this.__menuButton.querySelector(".top"),{background:this.menuOpenColor,transform:"translateY(-1px) rotate(0)"},{duration:i,easing:e}),NATION.Animation.start(this.__menuButton.querySelector(".center"),{background:this.menuOpenColor,transform:"translateX(0)"},{duration:i,easing:e},this.animateToOpenIcon.bind(this))}},s.prototype.animateToOpenIcon=function(){var t="cubic-bezier(0, 0, 0.1, 2)",e=200;this.__menuButtonLabel.innerHTML=this.menuButtonOpenCopy,this.__menuButton.querySelector(".bottom").style.display="block",NATION.Animation.start(this.__menuButton.querySelector(".bottom"),{bottom:0,transform:"translateY(0)"},{duration:e,easing:t}),NATION.Animation.start(this.__menuButton.querySelector(".center"),{transform:"translateX(0) rotate(0)"},{duration:e,easing:t},this.clearMenuIconStyles.bind(this)),NATION.Animation.start(this.__menuButton.querySelector(".top"),{top:0,transform:"translateY(0)"},{duration:e,easing:t})},s.prototype.clearMenuIconStyles=function(){this.__menuButton.querySelector(".bottom").removeAttribute("style"),this.__menuButton.querySelector(".top").removeAttribute("style"),this.__menuButton.querySelector(".center").removeAttribute("style"),this.__menuButton.querySelector(".arrowhead").removeAttribute("style")},s.prototype.closeSideMenu=function(t){this.sideMenu.close(t),this.__DOMElement.className=this.__DOMElement.className.replace(/ menu-open|menu-open/gi,""),this.showOpenIcon(t)},s.prototype.createSideMenu=function(){this.sideMenu=new NATION2016.views.header.SideMenu(this.__mainMenu)},s.prototype.createListeners=function(){t.addEventListener("scroll",this.onWindowScrolled.bind(this)),this.__menuButton.addEventListener("click",this.onMenuButtonClicked.bind(this))},s.prototype.setColorSchemeStyles=function(t){var i=e.getElementById("case-study-colors");i&&e.getElementsByTagName("head")[0].removeChild(i),t&&e.getElementsByTagName("head")[0].appendChild(t)},s.prototype.setPageTitle=function(t){t&&(e.getElementsByTagName("title")[0].innerHTML=t)},s.prototype.update=function(t,e){this.sectionArray=t,this.updateBreadcrumbs(),this.currentSectionName=this.sectionArray[0].toLowerCase(),this.updateHeaderStyle(e);for(var i=new RegExp(this.currentSectionName,"i"),s=0,o=this.__navLinks.length,n=-1,r="";o>s;s++)if(r=this.__navLinks[s].getAttribute("data-view").toLowerCase(),r.search(i)>=0||"/"===r&&"home"===this.currentSectionName){n=s;break}this.activeSectionID>=0&&(this.__navLinks[this.activeSectionID].className=this.__navLinks[this.activeSectionID].className.replace("active","")),n>-1&&this.__navLinks[n].className.search(/active/i)<0&&(this.__navLinks[n].className+=" active"),this.activeSectionID=n,this.previousSectionArrayLength=this.sectionArray.length},s.prototype.updateHeaderStyle=function(t){"error"===this.currentSectionName?this.__DOMElement.className.search("error")<0&&(this.__DOMElement.className+=" error"):this.__DOMElement.className.search("error")>-1&&(this.__DOMElement.className=this.__DOMElement.className.replace(/ error-page|error-page/gi,"")),this.__DOMElement.className=this.__DOMElement.className.replace(/ scrolled|scrolled/gi,""),("home"===this.currentSectionName||"error"===this.currentSectionName||this.sectionArray.length>1)&&(this.headerSolid||t)?this.showTransparentHeader():"home"!==this.currentSectionName&&"error"!==this.currentSectionName&&!this.headerSolid&&this.sectionArray.length<=1&&this.showSolidHeader(),"home"===this.currentSectionName?this.__DOMElement.className.search("landing-page")<0&&(this.__DOMElement.className+=" landing-page"):this.__DOMElement.className.search("landing-page")>=0&&(this.__DOMElement.className=this.__DOMElement.className.replace(/ landing-page|landing-page/gi,"")),this.sectionArray.length>1?this.__DOMElement.className.search("subsection")<0&&(this.__DOMElement.className+=" subsection"):this.__DOMElement.className.search("subsection")>=0&&(this.__DOMElement.className=this.__DOMElement.className.replace(/ subsection|subsection/gi,""))},s.prototype.showTransparentHeader=function(){this.__DOMElement.className=this.__DOMElement.className.replace(/ solid|solid/gi,""),this.headerSolid=!1},s.prototype.showSolidHeader=function(){this.__DOMElement.className+=" solid",this.headerSolid=!0},s.prototype.updateBreadcrumbs=function(){if(this.sectionArray[0].toLowerCase()!==this.currentSectionName||this.sectionArray.length!==this.previousSectionArrayLength){for(;this.__breadcrumbs.firstChild;)this.__breadcrumbs.removeChild(this.__breadcrumbs.firstChild);var t=e.createElement("a");t.setAttribute("href","#"),t.setAttribute("data-view","/"+this.sectionArray[0].toLowerCase());var i=this.sectionArray.length>1?this.backCopy:this.sectionArray[0].toLowerCase(),s=e.createTextNode(NATION.Utils.camelcaseString(i));t.appendChild(s),this.__breadcrumbs.appendChild(t)}},s.prototype.resize=function(){NATION2016.Settings.headerHeight=this.__DOMElement.offsetHeight,"none"===NATION.Utils.getStyle(this.__menuButton,"display")?(this.smallModeActive=!1,NATION2016.Settings.mobileHeader=!1):(this.smallModeActive=!0,NATION2016.Settings.mobileHeader=!0),this.smallModeActive?this.sideMenuEnabled||this.enableSideMenu():this.sideMenuEnabled&&this.disableSideMenu(),this.sideMenuEnabled&&(this.previousScrollProgress>0&&NATION.Utils.setStyle(this.__DOMElement,{transform:"translateY(0)"}),this.sideMenu.resize()),this.repositionHeader()},s.prototype.enableSideMenu=function(){this.sideMenuEnabled=!0,this.sideMenu.enable(),this.__DOMElement.className.search("side-menu-header")&&(this.__DOMElement.className+=" side-menu-header")},s.prototype.disableSideMenu=function(){this.sideMenuEnabled=!1,this.closeSideMenu(!0),this.sideMenu.disable(),this.__DOMElement.className.search("side-menu-header")&&(this.__DOMElement.className=this.__DOMElement.className.replace(/side-menu-header/gi,"")),this.__DOMElement.className=this.__DOMElement.className.replace(/ menu-open|menu-open/gi,"")},s.prototype.repositionHeader=function(){if("error"!==this.currentSectionName){var t=NATION.Utils.getPageElement().scrollTop,e=t>this.MAX_SCROLL?1:t/this.MAX_SCROLL;if(this.previousScrollProgress!==e){if(!this.sideMenuEnabled){var i="home"!==this.currentSectionName?-20*e:-t;NATION.Utils.setStyle(this.__DOMElement,{transform:"translateY("+i+"px)"})}this.previousScrollProgress=e,e>=1&&""!==this.currentSectionName?this.__DOMElement.className.search(/scrolled/i)<0&&(this.__DOMElement.className+=" scrolled"):this.__DOMElement.className.search(/scrolled/i)>=0&&(this.__DOMElement.className=this.__DOMElement.className.replace(/ scrolled|scrolled/gi,"")),this.sectionArray.length>1&&(1!=e||this.headerSolid?1>e&&this.headerSolid&&this.showTransparentHeader():this.showSolidHeader())}}},s.prototype.onWindowScrolled=function(){this.resize()},s.prototype.onMenuButtonClicked=function(t){this.sideMenuEnabled&&(this.sideMenu.isOpen()?this.closeSideMenu():this.openSideMenu()),t.stopPropagation(),t.preventDefault()},t.NATION2016.views.SiteHeader=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views");var s=function(t){NATION.EventDispatcher.call(this),this.__DOMElement=t,this.__leftNarrow=this.__DOMElement.querySelector(".js-left-narrow"),this.__leftWideInner=this.__DOMElement.querySelector(".js-left-wide .inner"),this.__leftNarrowInner=this.__DOMElement.querySelector(".js-left-narrow .inner"),this.__leftWide=this.__DOMElement.querySelector(".js-left-wide"),this.__overlay=this.__DOMElement.querySelector(".js-overlay"),this.__overlayEnd=this.__DOMElement.querySelector(".js-overlay-end"),this.__pageFade=this.__DOMElement.querySelector(".js-page-fade"),this.__logo=this.__DOMElement.querySelector(".js-logo"),this.__logoPathWhite=this.__DOMElement.querySelector(".js-logo-path-white"),this.__logoPathColored=this.__DOMElement.querySelector(".js-logo-path-color"),this.__bubbleContainer=this.__DOMElement.querySelector(".js-bubble-container"),this.__bubble=this.__DOMElement.querySelector(".js-bubble"),this.animating=!1,this.showing=!1,this.hiding=!1,this.showComplete=!1,this.hideRequested=!1,this.showRequested=!1,this.logoTimer=null,this.bubbleTimer=null,this.showDirection="",this.requestedDirection="",this.setup()};s.prototype=Object.create(NATION.EventDispatcher.prototype),s.prototype.constructor=s,s.prototype.FLAG_LOOP_DELAY=1e3,s.prototype.DIRECTION_LEFT="DirectionLeft",s.prototype.DIRECTION_RIGHT="DirectionRight",s.prototype.DIRECTION_DOWN="DirectionDown",s.prototype.DIRECTION_UP="DirectionUp",s.prototype.isAnimating=function(){return this.animating},s.prototype.isShowComplete=function(){return this.showComplete},s.prototype.show=function(t){if(t=t||this.DIRECTION_LEFT,this.showing||this.hiding)this.showRequested=!0,this.requestedDirection=t;else{this.showDirection=t,this.animating=!0,this.showing=!0,this.showComplete=!1,this.hideRequested=!1;var e=300,i="easeInOutQuad";this.__DOMElement.style.display="block",this.__logo.style.opacity=1,this.__logo.style.display="none";var s,o,n,r,a,l,h,c,d,p;t===this.DIRECTION_LEFT?(s={transform:"scaleX(0.2) scaleY(1)",bottom:0,right:"auto",width:62,height:"auto"},o="scaleX(2) scaleY(1)",n="translateX(100%) translateY(0)",r={transform:"translateX(-10%) translateY(0)"},a="translateX(45%) translateY(0)",h="translateX(-62px) translateY(0)",c="translateX(50%) translateY(0)",d="translateX(100%) translateY(0)",p="translateX(0) translateY(0)",l={bottom:0,right:"auto",width:5,height:"auto",transform:"translateX(-10%) translateY(0)"}):t===this.DIRECTION_RIGHT?(s={transform:"scaleX(0.2) scaleY(1)",bottom:0,right:"auto",width:62,height:"auto"},o="scaleX(2) scaleY(1)",n="translateX(-100%) translateY(0)",r={transform:"translateX(110%) translateY(0)"},a="translateX(55%) translateY(0)",h="translateX("+(this.__leftWide.clientWidth+62)+"px) translateY(0)",c="translateX(50%) translateY(0)",d="translateX(-100%) translateY(0)",p="translateX(0) translateY(0)",l={bottom:0,right:"auto",width:5,height:"auto",transform:"translateX(-10%) translateY(0)"}):t===this.DIRECTION_UP?(s={transform:"scaleX(1) scaleY(0.2)",bottom:"auto",right:0,width:"auto",height:62},o="scaleX(1) scaleY(2)",n="translateX(0) translateY(100%)",r={transform:"translateX(0) translateY(-10%)"},a="translateX(0) translateY(55%)",h="translateX(0) translateY(-62px)",c="translateX(0) translateY(50%)",d="translateX(0) translateY(100%)",p="translateX(0) translateY(0)",l={bottom:"auto",right:0,width:"100%",height:5,transform:"translateX(0) translateY(-10%)"}):(s={transform:"scaleX(1) scaleY(0.2)",bottom:"auto",right:0,width:"auto",height:62},o="scaleX(1) scaleY(2)",n="translateX(0) translateY(100%)",r={transform:"translateX(0) translateY(110%)"},a="translateX(0) translateY(45%)",h="translateX(0) translateY("+(this.__leftWide.clientHeight+62)+"px)",c="translateX(0) translateY(50%)",d="translateX(0) translateY(-100%)",p="translateX(0) translateY(0)",l={bottom:"auto",right:0,width:"100%",height:5,transform:"translateX(0) translateY(-10%)"}),NATION.Utils.setStyle(this.__leftWideInner,s),NATION.Animation.start(this.__leftWideInner,{transform:o},{duration:e,easing:i}),NATION.Utils.setStyle(this.__leftNarrowInner,l),NATION.Utils.setStyle(this.__overlayEnd,{transform:n}),NATION.Utils.setStyle(this.__leftNarrow,r),NATION.Animation.start(this.__leftNarrow,{transform:a},{duration:e,easing:i}),NATION.Utils.setStyle(this.__leftWide,{transform:h}),NATION.Animation.start(this.__leftWide,{transform:c},{duration:e,easing:i}),NATION.Utils.setStyle(this.__overlay,{transform:d}),NATION.Animation.start(this.__overlay,{transform:p},{duration:e,easing:i},this.onShowComplete.bind(this))}},s.prototype.hide=function(){var t=this.showDirection||this.DIRECTION_LEFT;if(this.hiding||this.showing)this.showing&&(this.hideRequested=!0);else{this.animating=!0,this.showComplete=!1,this.hiding=!0,this.showRequested=!1,this.hideRequested=!1,this.flagTimer&&(clearTimeout(this.flagTimer),this.flagTimer=null);var e=400,i="easeInQuad";this.logoTimer&&(clearTimeout(this.logoTimer),this.logoTimer=null),this.bubbleTimer&&(clearTimeout(this.bubbleTimer),this.bubbleTimer=null),NATION.Animation.stop(this.__logoPathColored),NATION.Animation.stop(this.__logoPathWhite),NATION.Animation.stop(this.__bubbleContainer),NATION.Animation.stop(this.__bubble),NATION.Utils.setStyle(this.__bubbleContainer,{transform:"scale(0)"}),NATION.Animation.start(this.__logo,{opacity:0},{duration:300,bounce:!1}),NATION.Utils.setStyle(this.__pageFade,{opacity:1});var s,o,n,r,a,l;t===this.DIRECTION_LEFT?(s="translateX(-120%) translateY(0)",o="translateX(0) translateY(0)",n="translateX(-100%) translateY(0)",r={transform:"translateX(110%) translateY(0)"},a="translateX(-62px) translateY(0)",l={transform:"scaleX(0.2) scaleY(1)",bottom:0,right:"auto",width:62,height:"auto"}):t===this.DIRECTION_RIGHT?(s="translateX(120%) translateY(0)",o="translateX(0) translateY(0)",n="translateX(100%) translateY(0)",r={transform:"translateX(110%) translateY(0)"},a="translateX("+(this.__leftWide.clientWidth+62)+"px) translateY(0)",l={transform:"scaleX(0.2) scaleY(1)",bottom:0,right:"auto",width:62,height:"auto"}):t===this.DIRECTION_UP?(s="translateX(0) translateY(-120%)",o="translateX(0) translateY(0)",n="translateX(0) translateY(-100%)",r={transform:"translateX(0) translateY(-10%)"},a="translateX(0) translateY(-62px)",l={transform:"scaleX(1) scaleY(0.2)",bottom:"auto",right:0,width:"auto",height:62}):(s="translateX(0) translateY(120%)",o="translateX(0) translateY(0)",n="translateX(0) translateY(100%)",r={transform:"translateX(0) translateY(110%)"},a="translateX(0) translateY("+(this.__leftWide.clientHeight+62)+"px)",l={transform:"scaleX(1) scaleY(0.2)",bottom:"auto",right:0,width:"auto",height:62}),NATION.Utils.setStyle(this.__leftNarrow,r),NATION.Utils.setStyle(this.__leftWide,{transform:a}),NATION.Utils.setStyle(this.__leftWideInner,l),NATION.Utils.setStyle(this.__overlayEnd,{transform:o}),NATION.Animation.stop(this.__overlay),NATION.Animation.start(this.__pageFade,{opacity:0},{delay:250,duration:e-100,easing:i}),NATION.Animation.start(this.__overlay,{transform:s},{duration:e,easing:i}),NATION.Animation.start(this.__overlayEnd,{transform:n},{delay:250,duration:e-100,easing:i},this.onHideComplete.bind(this))}},s.prototype.setup=function(){NATION.Utils.setStyle(this.__overlay,{transform:"translateX(100%)"})},s.prototype.onShowComplete=function(){this.animating=!1,this.showing=!1,this.hiding=!1,this.showComplete=!0,this.hideRequested?(this.hideRequested=!1,this.hide()):(this.handler_flagTimerTicked=this.onFlagTimerTicked.bind(this),this.flagTimer=setTimeout(this.handler_flagTimerTicked,this.FLAG_LOOP_DELAY)),this.trigger(NATION2016.Events.SHOW_COMPLETE)},s.prototype.onFlagTimerTicked=function(){this.speedDivision=.7,this.__logo.style.display="block",this.__logoPathColored.style.display="none";var t=this;this.logoTimer=setTimeout(function(){t.__logoPathColored.style.display="block"},190/this.speedDivision),this.__logoPathColored.style.strokeDasharray="1, 200",this.__logoPathColored.style.strokeDashoffset="0",this.__logoPathWhite.style.strokeDasharray="1, 200",this.__logoPathWhite.style.strokeDashoffset="0",NATION.Animation.start(this.__logoPathColored,{strokeDasharray:"450, 700",strokeDashoffset:-this.__logoPathColored.getTotalLength()-350},{jsMode:!0,delay:150/this.speedDivision,duration:1e3/this.speedDivision,easing:"linear",loop:!0}),NATION.Animation.start(this.__logoPathWhite,{strokeDasharray:"150, 700",strokeDashoffset:-this.__logoPathWhite.getTotalLength()-350},{jsMode:!0,duration:1e3/this.speedDivision,easing:"linear",loop:!0,loopComplete:this.onFlagLoopComplete.bind(this)}),this.onFlagLoopComplete()},s.prototype.onFlagLoopComplete=function(){this.bubbleTimer=setTimeout(this.animateBubble.bind(this),250/this.speedDivision)},s.prototype.animateBubble=function(){NATION.Utils.setStyle(this.__bubbleContainer,{transform:"scale(0)"}),NATION.Animation.start(this.__bubbleContainer,{transform:"scale(3)"},{duration:300,easing:"easeOutQuad"}),NATION.Utils.setStyle(this.__bubble,{strokeWidth:4}),NATION.Animation.start(this.__bubble,{strokeWidth:0},{duration:300,easing:"easeOutQuad"})},s.prototype.onHideComplete=function(){this.animating=!1,this.hiding=!1,this.showing=!1,this.showComplete=!1,this.__DOMElement.style.display="none",this.showRequested?(this.showRequested=!1,this.show(this.requestedDirection)):this.trigger(NATION2016.Events.HIDE_COMPLETE)},t.NATION2016.views.StandardTransition=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views");var s=function(t){NATION2016.views.BasicPageView.call(this),this.__DOMElement=t,this.__scrollButton=null,this.__moreContentButtons=null,this.__moreContentLabels=null,this.__introCopy=null,this.__projectHeader=null,this.__viewListButton=null,this.__accordionElements=[],this.extraContentAccordions=[],this.scrollTarget="",this.videoPlayers=[],this.__headerImage=null,this.imageLoadTimer=null,this.animatedButtons=[],this.showMoreContentTexts=[],this.hideMoreContentTexts=[]};s.prototype=Object.create(NATION2016.views.BasicPageView.prototype),s.prototype.constructor=s,s.prototype.build=function(t){NATION2016.views.BasicPageView.prototype.build.call(this,t,!0),this.__scrollButton=this.__DOMElement.querySelector(".js-scroll-button"),this.scrollTarget=this.__scrollButton.getAttribute("href"),this.__moreContentButtons=this.__DOMElement.querySelectorAll(".js-more-content-button"),this.__moreContentLabels=this.__DOMElement.querySelectorAll(".js-more-content-button span"),this.__projectHeader=this.__DOMElement.querySelector(".js-project-header"),this.__introCopy=this.__DOMElement.querySelector(".js-intro-copy"),this.__viewListButton=this.__DOMElement.querySelector(".js-view-list"),this.__headerImage=this.__projectHeader.querySelector("img"),this.__bottomNavImages=this.__DOMElement.querySelectorAll(".project-nav img"),this.headerImageTimer=null,this.createVideoPlayers(),this.createExtraContentAccordions(),this.createAnimatedButtons(),this.createListeners(),this.resize(),this.__headerImage?this.checkHeaderImageLoaded():this.trigger(NATION2016.Events.VIEW_READY)},s.prototype.checkHeaderImageLoaded=function(){this.headerImageTimer&&(clearTimeout(this.headerImageTimer),this.headerImageTimer=null),this.__headerImage.complete?this.trigger(NATION2016.Events.VIEW_READY):this.headerImageTimer=setTimeout(this.checkHeaderImageLoaded.bind(this),200)},s.prototype.createAnimatedButtons=function(){for(var t=this.__DOMElement.querySelectorAll(".js-more-content-button"),e=0,i=t.length;i>e;e++)this.animatedButtons.push(new NATION2016.views.global.AnimatedVectorButton(t[e]))},s.prototype.resize=function(){this.__projectHeader.style.height=t.innerHeight-this.__introCopy.clientHeight-NATION2016.Settings.fullPanelOffset+"px",this.resizeViewListButton();for(var e=0,i=this.animatedButtons.length;i>e;e++)this.animatedButtons[e].resize()},s.prototype.resizeViewListButton=function(){this.__viewListButton.style.height="auto",this.__viewListButton.style.height=this.__viewListButton.parentNode.clientHeight+1+"px"},s.prototype.createVideoPlayers=function(){for(var t,e=this.__DOMElement.querySelectorAll(".js-video-player"),i=0,s=e.length,o={preload:!0,mobileMode:NATION2016.Settings.TOUCH_DEVICE},n={slide:!0,mobileMode:NATION2016.Settings.TOUCH_DEVICE};s>i;i++)e[i].getAttribute("data-video")&&(t=new NATION2016.views.global.MultiSourceVideoPlayer(e[i],o,n),this.videoPlayers.push(t))},s.prototype.createExtraContentAccordions=function(){if(this.__accordionElements=this.__DOMElement.querySelectorAll(".js-more-content-accordion"),this.__accordionElements&&this.__accordionElements.length>0)for(var t={duration:1e3,easing:"easeInOutQuart",autoScroll:!0,autoScrollOffset:79},e=0,i=this.__accordionElements.length;i>e;e++)this.extraContentAccordions.push(new NATION.Accordion(this.__accordionElements[e],t)),this.showMoreContentTexts.push(this.__moreContentButtons[e].getAttribute("data-show")),this.hideMoreContentTexts.push(this.__moreContentButtons[e].getAttribute("data-hide"))},s.prototype.createListeners=function(){if(NATION2016.views.BasicPageView.prototype.createListeners.call(this),this.__scrollButton&&(this.handler_scrollButtonClicked=this.onScrollButtonClicked.bind(this),this.__scrollButton.addEventListener("click",this.handler_scrollButtonClicked)),this.extraContentAccordions.length)for(var e=0,i=this.extraContentAccordions.length;i>e;e++)this.handler_moreContentClicked=this.onMoreContentButtonClicked.bind(this),this.extraContentAccordions[e].addListener(this.extraContentAccordions[e].HEADER_CLICKED,this.handler_moreContentClicked);for(this.handler_pageContentLoaded=this.onPageContentLoaded.bind(this),t.addEventListener("load",this.handler_pageContentLoaded),e=0,i=this.__bottomNavImages.length,this.handler_bottomNavImageLoaded=this.onBottomNavImageLoaded.bind(this);i>e;e++)this.__bottomNavImages[e].addEventListener("load",this.handler_bottomNavImageLoaded)},s.prototype.removeListeners=function(){if(NATION2016.views.BasicPageView.prototype.removeListeners.call(this),this.__scrollButton&&this.__scrollButton.removeEventListener("click",this.handler_scrollButtonClicked),this.extraContentAccordions.length)for(var e=0,i=this.extraContentAccordions.length;i>e;e++)this.extraContentAccordions[e].removeListener(this.extraContentAccordions[e].HEADER_CLICKED,this.handler_moreContentClicked);for(t.removeEventListener("load",this.handler_pageContentLoaded),e=0,i=this.__bottomNavImages.length;i>e;e++)this.__bottomNavImages[e].removeEventListener("load",this.handler_bottomNavImageLoaded)},s.prototype.show=function(){this.showing=!0,NATION.Utils.setStyle(this.__DOMElement,{transform:"none"});var t=this.__DOMElement.querySelector(".js-work-page-content");
t.style.opacity=0,t.style.opacity=1,this.onShowComplete()},s.prototype.onShowComplete=function(t){this.showing=!1},s.prototype.destroy=function(){if(NATION2016.views.BasicPageView.prototype.destroy.call(this),this.showing){this.showing=!1;var t=this.__DOMElement.querySelector(".js-work-page-content");NATION.Animation.stop(t)}if(this.videoPlayers.length)for(var e=0,i=this.videoPlayers.length;i>e;e++)this.videoPlayers[e].pauseVideo&&this.videoPlayers[e].pauseVideo();this.onAutoScrollComplete(),this.removeListeners();for(var e=0,i=this.animatedButtons.length;i>e;e++)this.animatedButtons[e].destroy();this.extraContentAccordion&&this.extraContentAccordion.destroy()},s.prototype.onScrollButtonClicked=function(e){this.handler_mouseWheelScrolled=this.onMouseWheelScrolled.bind(this),t.addEventListener("wheel",this.handler_mouseWheelScrolled),t.addEventListener("DOMMouseWheel",this.handler_mouseWheelScrolled);var i=NATION.Utils.getOffset(this.__DOMElement.querySelector(this.scrollTarget)).top;NATION.Animation.start(NATION.Utils.getPageElement(),{scrollTop:i},{duration:500,easing:"easeInOutQuad"},this.onAutoScrollComplete.bind(this)),e.stopPropagation(),e.preventDefault()},s.prototype.onMouseWheelScrolled=function(t){this.onAutoScrollComplete(t)},s.prototype.onAutoScrollComplete=function(e){t.removeEventListener("wheel",this.handler_mouseWheelScrolled),t.removeEventListener("DOMMouseWheel",this.handler_mouseWheelScrolled),NATION.Animation.stop(NATION.Utils.getPageElement())},s.prototype.onMoreContentButtonClicked=function(t){for(var i=0,s=0,o=this.extraContentAccordions.length;o>s;s++)if(t.target===this.extraContentAccordions[s]){i=s;break}var n=this.extraContentAccordions[i].getOpenPanelID()>-1;for(this.__moreContentLabels[i];this.__moreContentLabels[i].firstChild;)this.__moreContentLabels[i].removeChild(this.__moreContentLabels[i].firstChild);n?this.__moreContentLabels[i].appendChild(e.createTextNode(this.hideMoreContentTexts[i])):this.__moreContentLabels[i].appendChild(e.createTextNode(this.showMoreContentTexts[i])),this.animatedButtons[i].resize()},s.prototype.onPageContentLoaded=function(t){this.resize()},s.prototype.onBottomNavImageLoaded=function(t){this.resizeViewListButton()},t.NATION2016.views.WorkPageView=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016.views");var s=function(t){NATION2016.views.BasicPageView.call(this),this.__DOMElement=t,this.__slideshowElement=null,this.__skipButton=null,this.__slideshowTitle=null,this.skipTarget="",this.hiding=!1,this.hidden=!1,this.slideshow=null};s.prototype=Object.create(NATION2016.views.BasicPageView.prototype),s.prototype.constructor=s,s.prototype.build=function(t){NATION2016.views.BasicPageView.prototype.build.call(this,t,!0),this.__slideshowElement=this.__DOMElement.querySelector(".js-slideshow"),this.__slideshowTitle=this.__DOMElement.querySelector(".js-slideshow-title"),this.__skipButton=this.__DOMElement.querySelector(".js-skip-button"),this.skipTarget=this.__skipButton.getAttribute("href"),this.createSlideshow(),this.createListeners()},s.prototype.createSlideshow=function(){var t={slide:!0,pips:!0,duration:400,easing:"easeInOutQuart",touch:!1};this.slideshow=new NATION2016.views.work.WorkSlideshow(this.__slideshowElement,t)},s.prototype.createListeners=function(){if(NATION2016.views.BasicPageView.prototype.createListeners.call(this),this.buildComplete){var t=this.__DOMElement.querySelector(".js-slide-image img");t&&(t.complete?this.onFirstSlideLoaded():(this.handler_imageLoadComplete=this.onFirstSlideLoaded.bind(this),t.addEventListener("load",this.handler_imageLoadComplete))),this.__skipButton&&(this.handler_skipButtonClicked=this.onSkipButtonClicked.bind(this),this.__skipButton.addEventListener("click",this.handler_skipButtonClicked))}},s.prototype.removeListeners=function(){NATION2016.views.BasicPageView.prototype.removeListeners.call(this),this.buildComplete&&(this.__slideImage&&this.__slideImage.removeEventListener("load",this.handler_imageLoadComplete),this.__skipButton&&this.__skipButton.removeEventListener("click",this.handler_skipButtonClicked))},s.prototype.resize=function(){NATION2016.views.BasicPageView.prototype.resize.call(this);var e=NATION.Utils.getStyle(this.__slideshowTitle,"marginTop");e||(e=0),e=parseInt(e,10);var i=this.__slideshowTitle.clientHeight+e,s=t.innerHeight-(NATION2016.Settings.headerHeight+i-6);this.__slideshowElement.style.height=s+"px",this.slideshow&&this.slideshow.resize()},s.prototype.hide=function(){if(this.buildComplete&&!this.hiding){this.hiding=!0,this.slideshow.stopAutoCycling();var i="easeOutQuad",s=500;this.activeSlide=this.slideshow.getCurrentSlideID(),this.activeSlide=this.__slideshowElement.querySelectorAll(".js-slide")[this.activeSlide];var o=this.activeSlide.querySelector(".js-button-container"),n=!0;o.style.height=parseInt(NATION.Utils.getStyle(o,"height"),10)+"px",NATION.Animation.start(o,{opacity:0},{jsMode:n,duration:s/2,easing:i},function(t){NATION.Animation.start(o,{height:0},{jsMode:n,duration:s/2,easing:i})});var r=NATION.Utils.getPageElement();0!==r.scrollTop&&NATION.Animation.start(r,{scrollTop:0},{duration:s,easing:i});var a=this.slideshow.getCurrentSlideID(),l=this.__slideshowElement.querySelectorAll(".js-slide")[a].querySelector(".media"),h=this.activeSlide.querySelector(".slide-content");this.animatingSummary=this.activeSlide.querySelector(".project-summary");var c=t.innerHeight-this.animatingSummary.clientHeight-NATION2016.Settings.fullPanelOffset,d=NATION.Utils.getStyle(this.__slideshowElement,"minHeight");d>c&&(c=d);for(var p=(NATION.Utils.getStyle(e.querySelector(".page-content"),"paddingTop"),this.__slideshowElement.querySelectorAll(".js-slide")),u=0,_=p.length;_>u;u++)u!==a&&(p[u].style.visibility="hidden"),p[u].style.overflow="visible";var m=this.activeSlide.querySelector(".project-summary").clientHeight,g=this.__DOMElement.querySelector(".js-work-content");NATION.Animation.start(g,{opacity:0},{jsMode:n,duration:s,easing:i});var y=this.__DOMElement.querySelector(".js-additional-overlays");NATION.Animation.start(y,{opacity:0},{jsMode:n,duration:s,easing:i});var f=this.__DOMElement.querySelectorAll(".js-project-button")[0];NATION.Animation.start(f,{opacity:0},{jsMode:n,duration:s,easing:i}),this.slideshow.resetSlideMedia(!1,s,i),NATION.Animation.start(h,{height:c},{jsMode:n,duration:s,easing:i}),NATION.Animation.start(this.__slideshowElement,{height:c+m},{jsMode:n,duration:s,easing:i}),NATION.Animation.start(l,{top:0,left:0,transform:"translateX(-5%) translateY(-5%)",width:"120%",height:"120%"},{jsMode:n,duration:s,easing:i}),this.slideshowOffset=NATION.Utils.getOffset(this.__slideshowElement).top,t.innerWidth>550&&(this.slideshowOffset+=6),NATION.Utils.setStyle(this.animatingSummary,{transform:"translateY(0)"}),this.__skipButton.style.display="none",this.targetSlideHeight=c,NATION.Animation.start(this.animatingSummary,{transform:"translateY(-100%)"},{jsMode:n,duration:200,easing:"easeInOutQuad"},this.onSummaryMovedUp.bind(this)),NATION.Animation.start(this.__DOMElement,{transform:"translateY(-"+this.slideshowOffset+"px)"},{jsMode:n,duration:s,easing:i}),this.trigger(NATION2016.Events.USE_TRANSPARENT_HEADER)}else this.onHideComplete()},s.prototype.onSummaryMovedUp=function(t){setTimeout(this.onSummaryTimerTicked.bind(this),100),NATION.Animation.start(this.animatingSummary,{transform:"translateY(-95%)"},{duration:150,easing:"easeInOutQuad"},this.onSummaryMovedDown.bind(this))},s.prototype.onSummaryTimerTicked=function(){var t=this.animatingSummary.querySelector(".content-body");NATION.Utils.setStyle(t,{transform:"translateY(100%)",opacity:0}),NATION.Animation.start(t,{opacity:1,transform:"translateY(0)"},{duration:300,easing:"easeOutQuad"})},s.prototype.onSummaryMovedDown=function(t){NATION.Animation.start(this.animatingSummary,{transform:"translateY(-102.5%)"},{duration:150,easing:"easeInOutQuad"},this.onSummaryResizing.bind(this))},s.prototype.onSummaryResizing=function(t){NATION.Animation.start(this.animatingSummary,{transform:"translateY(-97.5%)"},{duration:150,easing:"easeInOutQuad"},this.onSummaryFinishing.bind(this))},s.prototype.onSummaryFinishing=function(t){NATION.Animation.start(this.animatingSummary,{transform:"translateY(-100%)"},{duration:200,easing:"easeOutQuad"},this.onHideComplete.bind(this))},s.prototype.onHideComplete=function(){this.hidden=!0,this.hiding=!1,this.trigger(NATION2016.Events.HIDE_COMPLETE)},s.prototype.destroy=function(){if(NATION2016.views.BasicPageView.prototype.destroy.call(this),this.buildComplete){if(this.hiding){this.hiding=!1;var t=NATION.Utils.getPageElement();NATION.Animation.stop(t),t.scrollTop=0,NATION.Animation.stop(this.__DOMElement);var e=this.slideshow.getCurrentSlideID();e=this.__slideshowElement.querySelectorAll(".js-slide")[e];var i=e.querySelector(".js-button-container");NATION.Animation.stop(i);var s=this.__DOMElement.querySelector(".js-work-content");NATION.Animation.stop(s);var o=this.__DOMElement.querySelector(".js-additional-overlays");NATION.Animation.stop(o);var n=this.__DOMElement.querySelectorAll(".js-project-button")[0];NATION.Animation.stop(n),NATION.Animation.stop(this.__slideshowElement)}this.__DOMElement.querySelector(".js-slide img")&&this.__DOMElement.querySelector(".js-slide img").removeEventListener("complete",this.handler_imageLoadComplete),this.__skipButton&&this.__skipButton.addEventListener("click",this.handler_skipButtonClicked),this.slideshow&&(this.slideshow.stopAutoCycling(),this.slideshow.destroy()),this.__DOMElement.removeAttribute("style")}},s.prototype.onFirstSlideLoaded=function(){this.trigger(NATION2016.Events.VIEW_READY)},s.prototype.onSkipButtonClicked=function(e){this.handler_mouseWheelScrolled=this.onMouseWheelScrolled.bind(this),t.addEventListener("wheel",this.handler_mouseWheelScrolled),t.addEventListener("DOMMouseWheel",this.handler_mouseWheelScrolled);var i=NATION.Utils.getOffset(this.__DOMElement.querySelector(this.skipTarget)).top;NATION.Animation.start(NATION.Utils.getPageElement(),{scrollTop:i},{duration:500,easing:"easeInOutQuad"},this.onAutoScrollComplete.bind(this)),e.stopPropagation(),e.preventDefault()},s.prototype.onMouseWheelScrolled=function(t){this.onAutoScrollComplete(t)},s.prototype.onAutoScrollComplete=function(e){t.removeEventListener("wheel",this.handler_mouseWheelScrolled),t.removeEventListener("DOMMouseWheel",this.handler_mouseWheelScrolled),NATION.Animation.stop(NATION.Utils.getPageElement())},t.NATION2016.views.WorkView=s}(window,document,void 0),function(t,e,i){"use strict";NATION.Utils.createNamespace("NATION2016");var s=function(){this.__DOMElement=e.querySelector(".js-site"),this.__pageContainer=this.__DOMElement.querySelector("[data-page-content]"),this.header=null,this.standardTransition=null,this.activeView=null,this.resizeTimer=null,this.createGlobalViews(),this.createListeners(),this.createPageView(),history.emulate&&"home"!==NATION2016.Router.getCurrentSection()?(NATION2016.Router.setPageLoadForced(!0),NATION2016.Router.quickLoadPage("/"+NATION2016.Router.getActiveSections().join("/"))):this.activeView.build(),this.header.update(NATION2016.Router.getActiveSections(),!0)};s.prototype.createGlobalViews=function(){this.header=new NATION2016.views.SiteHeader(this.__DOMElement.querySelector(".js-header")),this.standardTransition=new NATION2016.views.StandardTransition(this.__DOMElement.querySelector(".js-standard-transition"))},s.prototype.createListeners=function(){NATION2016.Router.addListener(NATION2016.Events.PAGE_REQUESTED,this.onPageRequested.bind(this)),NATION2016.Router.addListener(NATION2016.Events.PAGE_LOAD_COMPLETE,this.onPageLoadComplete.bind(this)),this.standardTransition.addListener(NATION2016.Events.SHOW_COMPLETE,this.onTransitionShowComplete.bind(this)),t.addEventListener("resize",this.onWindowResized.bind(this))},s.prototype.showNextPage=function(){NATION.Utils.getPageElement().scrollTop=0,NATION2016.Settings.firstPageLoad?NATION2016.Settings.firstPageLoad=!1:NATION2016.Router.getActiveSections()[1]&&this.activeView.show?(this.standardTransition.isShowComplete()&&this.standardTransition.hide(),this.activeView.show()):this.standardTransition.hide()},s.prototype.onTransitionShowComplete=function(){NATION2016.Router.isPageLoaded()&&this.prepareNextPage()},s.prototype.prepareNextPage=function(){this.activeView&&(this.activeView.destroy(),this.activeView.removeListener(NATION2016.Events.HIDE_COMPLETE,this.handler_transitionShowComplete),this.activeView.removeListener(NATION2016.Events.USE_TRANSPARENT_HEADER,this.handler_transparentHeaderRequested),this.activeView.removeListener(NATION2016.Events.VIEW_READY,this.handler_viewReady)),this.createPageView(),this.header.update(NATION2016.Router.getActiveSections()),this.header.setColorSchemeStyles(NATION2016.Router.getColorSchemeStyles()),this.header.setPageTitle(NATION2016.Router.getHeaderTitle());var t=NATION2016.Router.getNextPageData();this.activeView.build(t),this.header.closeSideMenu(!0);var e=NATION2016.Router.getActiveSections(),i=NATION.Utils.camelcaseString(e[0]);("Home"===i||"Error"===i&&!NATION2016.Settings.firstPageLoad)&&this.header.show(!0)},s.prototype.createPageView=function(){var t=NATION2016.Router.getActiveSections(),e=NATION.Utils.camelcaseString(t[0]);console.log(t);e+=1===t.length?"View":"PageView",NATION2016.views[e]?this.activeView=new NATION2016.views[e](this.__pageContainer):(NATION2016.Router.overrideActiveSections(["error"]),this.activeView=new NATION2016.views.ErrorView(this.__pageContainer),t=NATION2016.Router.getActiveSections(),e=NATION.Utils.camelcaseString(t[0])),this.handler_transitionShowComplete=this.onTransitionShowComplete.bind(this),this.activeView.addListener(NATION2016.Events.HIDE_COMPLETE,this.handler_transitionShowComplete),this.handler_transparentHeaderRequested=this.onTransparentHeaderRequested.bind(this),this.activeView.addListener(NATION2016.Events.USE_TRANSPARENT_HEADER,this.handler_transparentHeaderRequested),this.handler_viewReady=this.onViewReady.bind(this),this.activeView.addListener(NATION2016.Events.VIEW_READY,this.handler_viewReady),"HomeView"===e&&(this.handler_homeSubnavShown=this.onHomeSubnavShown.bind(this),this.activeView.addListener(NATION2016.Events.SUBNAV_SHOWN,this.handler_homeSubnavShown))},s.prototype.resize=function(){this.resizeTimer&&(clearTimeout(this.resizeTimer),this.resizeTimer=null),this.header.resize(),this.activeView.resize()},s.prototype.onPageRequested=function(){var t=NATION2016.Router.getActiveSections();if(t[1]&&this.activeView.hide)this.activeView.hide();else{var e=NATION2016.Router.getPreviousSections(),i=this.header.getSectionIndex(e[0]),s=this.header.getSectionIndex(t[0]),o="";o=i>s?this.standardTransition.DIRECTION_RIGHT:s>i?this.standardTransition.DIRECTION_LEFT:this.standardTransition.DIRECTION_UP,this.standardTransition.show(o)}},s.prototype.onPageLoadComplete=function(){(this.standardTransition.isShowComplete()||this.activeView.hasHidden()||NATION2016.Router.isPageLoadForced())&&(NATION2016.Router.setPageLoadForced(!1),this.prepareNextPage())},s.prototype.onHomeSubnavShown=function(t){this.header.show()},s.prototype.onWindowResized=function(){this.resizeTimer||(this.resizeTimer=setTimeout(this.resize.bind(this),20))},s.prototype.onViewReady=function(){this.showNextPage(),this.resize(),NATION.Utils.getPageElement().scrollTop=0},s.prototype.onTransparentHeaderRequested=function(t){this.header.update(NATION2016.Router.getActiveSections())},t.NATION2016.Application=new s}(window,document,void 0);
