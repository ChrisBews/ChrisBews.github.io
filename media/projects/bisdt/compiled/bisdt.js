var NATION=NATION||{};NATION.Animation=function(){"use strict";var e={};e.start=function(e,n,i,o){i=i||{},t.startAnimation(e,n,i,o)},e.stop=function(e){t.stopAnimation(e)};var t={activeAnimations:[],animationTimer:null,CSS3Available:!1,testingElement:null,transitionEndString:"",cssPrefix:"",types:{PIXELS:"pixels",PERCENT:"percent",COLOUR:"colour",TRANSFORM:"transform",NONE:"none"},easing:{linear:function(e,t,n,i){return n+(i-n)*e},easeInSine:function(e,t,n,i,o){return-(i-n)*Math.cos(t/o*(Math.PI/2))+(i-n)+n},easeOutSine:function(e,t,n,i,o){return(i-n)*Math.sin(t/o*(Math.PI/2))+n},easeInOutSine:function(e,t,n,i,o){return-(i-n)/2*(Math.cos(Math.PI*t/o)-1)+n},easeInQuad:function(e,t,n,i,o){return(i-n)*(t/=o)*t+n},easeOutQuad:function(e,t,n,i,o){return-(i-n)*(t/=o)*(t-2)+n},easeInOutQuad:function(e,t,n,i,o){return(t/=o/2)<1?(i-n)/2*t*t+n:-(i-n)/2*(--t*(t-2)-1)+n}},cssEasing:{linear:"linear",easeInSine:"cubic-bezier(0.47, 0, 0.745, 0.715)",easeOutSine:"cubic-bezier(0.39, 0.575, 0.565, 1)",easeInOutSine:"cubic-bezier(0.445, 0.05, 0.55, 0.95)",easeInQuad:"cubic-bezier(0.55, 0.085, 0.68, 0.53)",easeOutQuad:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",easeInOutQuad:"cubic-bezier(0.455, 0.03, 0.515, 0.955)"},startTimers:[],init:function(){this.testingElement=document.createElement("div"),this.checkForCSS3(),this.getTransitionEndString()},checkForCSS3:function(){this.CSS3Available=!1;var e=this.testingElement.style,t=["ms","O","Moz","Webkit"],n="";for(""===e.transition&&(this.transitionString="transition",this.CSS3Available=!0);t.length;)if(n=t.pop()+"Transition",n in e){this.transitionString=n,this.CSS3Available=!0;break}},checkForScrollPosChange:function(e){{var t=!1;e.length}for(var n in e)("scrollLeft"===n||"scrollTop"===n)&&(t=!0);return t},startAnimation:function(e,t,n,i){if(i&&n&&(n.complete=i),"function"==typeof n){var o=n;n={},n.complete=o}n.easing=n.easing||"linear",n.duration=n.duration||1e3,this.CSS3Available?this.checkForScrollPosChange(t)?this.animateWithJavaScript(e,t,n,i):this.animateWithCSS3(e,t,n,i):this.animateWithJavaScript(e,t,n,i)},animateWithCSS3:function(e,n,i){var o=window.getComputedStyle?getComputedStyle(e):e.currentStyle,r={};for(var s in n)o[s]||(r[s]=0,"opacity"===s?r[s]=1:s.search(/color/i)>-1&&(r[s]="color"===s?"#000000":"transparent"),NATION.Utils.setStyle(e,r));requestAnimationFrame(function(){t.startCSSAnim(e,n,i)})},startCSSAnim:function(e,n,i){this.stopAnimation(e),n=this.checkForPrefixes(n);var o,r=i.duration/1e3+"s",s="",a=[],l=window.getComputedStyle?getComputedStyle(e):e.currentStyle;e.style[this.transitionString]="all "+r+" "+this.cssEasing[i.easing];var c=!1;for(var u in n){s=n[u].toString();var d=this.types.NONE;s.search(/px|%|#/gi)<0&&u.search(/transform/i)<0&&"opacity"!==u&&(s+="px"),s.search(/transform/i)>=0?d=this.types.TRANSFORM:(s.search(/px/i)>=0&&(d=this.types.PIXELS),s.search("%")>=0&&(d=this.types.PERCENT),s.search(/#|rgb/i)>=0&&(d=this.types.COLOUR)),o=e.style[u]?e.style[u]:l[u],e.style[u]=s,a.push({name:u,startValue:o,targetValue:s,type:d}),o!==s&&(c=!0)}this.activeAnimations.push({element:e,properties:a,options:i}),c?setTimeout(function(){e.addEventListener(t.transitionEndString,t.onTransitionEnd,!1)},10):this.onTransitionEnd({target:e})},checkForPrefixes:function(e){var t,n,i={};for(var o in e)t=o,n=e[o],delete i[o],t=NATION.Utils.getPrefixedName(t),i[t]=n;return i},getTransitionEndString:function(){var e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};this.cssPrefix="";for(var t in e)if(void 0!==this.testingElement.style[t])return this.cssPrefix="-"+t.toLowerCase()+"-",this.cssPrefix=this.cssPrefix.replace("transition",""),void(this.transitionEndString=e[t])},getPercentageFromFilter:function(e){var t=e.replace("progid:DXImageTransform.Microsoft.Alpha(Opacity=","");return t=t.replace(")",""),parseInt(t,10)/100},convertOpacityToFilterString:function(e){return e=Math.floor(100*e),"progid:DXImageTransform.Microsoft.Alpha(Opacity="+e+")"},convertTransformString:function(e){e=e.replace(/, | ,/g,",");for(var t,n,i,o,r=e.split(" "),s=0,a=r.length,l={};a>s;s++)i=r[s].indexOf("(")+1,o=r[s].indexOf(")")-i,t=r[s].substr(0,i-1),n=r[s].substr(i,o),n.indexOf(",")>-1&&(n=n.split(",")),l[t]=n;return l},animateWithJavaScript:function(e,t,n){this.stopAnimation(e),t=this.checkForPrefixes(t);var i,o=Date.now(),r=[];for(var s in t){var a=t[s].toString(),l=this.types.NONE;a.search(/px|%|#|rgb/gi)<0&&s.search("transform")<0&&"opacity"!==s&&(a+="px");var c="";if(s.search(/transform/i)>=0&&(l=this.types.TRANSFORM,a=this.convertTransformString(a)),e.style&&e.style[s]?c=e.style[s]:(i="undefined"!=typeof window.getComputedStyle?window.getComputedStyle(e,null)[s]:e.currentStyle[s],c=i&&l!==this.types.TRANSFORM?i:0),c&&"none"!==c){if(l===this.types.TRANSFORM){c=this.convertTransformString(c);{a.length}for(var u in a)c[u]||(window.console&&console.warn&&console.warn("NATION.Animation: Existing transform function does not match target function. Setting transform to 0 on element "+e.toString()),c[u]=0)}}else if(l===this.types.TRANSFORM){c={};for(name in a)c[name]=0}else"scrollLeft"!==s&&"scrollTop"!==s?c=window.getComputedStyle?getComputedStyle(e)[s]:e.currentStyle[s]:(e===document.documentElement&&(e=NATION.Utils.getPageElement()),c=e[s]);l!==this.types.TRANSFORM&&(a.search(/px/i)>=0?l="0px"===a&&c.toString().search("%")>=0?this.types.PERCENT:this.types.PIXELS:(a.search("%")>=0&&(l=this.types.PERCENT),a.search(/#|rgb/i)>=0&&(l=this.types.COLOUR)),a=a.replace(/px|%/gi,"")),"auto"===c&&(c=0),"opacity"!==s||"opacity"in document.documentElement.style||(s="filter",c=e.currentStyle.filter,c=c||"progid:DXImageTransform.Microsoft.Alpha(Opacity=100)",c=this.getPercentageFromFilter(c),a=parseInt(a,10)),r.push({name:s,startValue:c,targetValue:a,type:l})}this.activeAnimations.push({element:e,properties:r,options:n,startTime:o,currentTime:o,endTime:o+n.duration}),this.startAnimationInterval()},stopAnimation:function(e){if(e===document.documentElement&&(e=NATION.Utils.getPageElement(),this.stopJSAnimation(e)),this.CSS3Available){for(var n=window.getComputedStyle?getComputedStyle(e):e.currentStyle,i=0,o=this.activeAnimations.length,r="";o>i;i++)if(this.activeAnimations[i].element===e)for(var s=0,a=this.activeAnimations[i].properties.length;a>s;s++)r=this.activeAnimations[i].properties[s].name,e.style[r]=n[r];e.removeEventListener(this.transitionEndString,t.onTransitionEnd,!1),e.style[this.transitionString]="none",this.removeAnimation(e)}else this.stopJSAnimation(e)},stopJSAnimation:function(e){this.removeAnimation(e),this.activeAnimations.length<=0&&(cancelAnimationFrame(this.animRequest),clearInterval(this.animationTimer),this.animationTimer=null)},startAnimationInterval:function(){this.animationTimer&&clearTimeout(this.animationTimer),this.animationTimer=setTimeout(function(){t.animRequest=requestAnimationFrame(t.updateAnimation)},1e3/60)},tweenColour:function(e,t,n){t.search("#")>=0&&(t=this.hexToRGB(t)),n.search("#")>=0&&(n=this.hexToRGB(n)),t=this.RGBToArray(t),n=this.RGBToArray(n);var i=n[0]*e+t[0]*(1-e),o=n[1]*e+t[1]*(1-e),r=n[2]*e+t[2]*(1-e);return this.RGBToHex("("+i+","+o+","+r+")")},tweenTransform:function(e,t,n,i,o,r){var s,a,l,c,u,d={};for(var h in o)if("string"!=typeof o[h]){c="";for(var p=0,f=o[h].length;f>p;p++)s="string"!=typeof i[h]&&i[h][p]?parseFloat(i[h][p].replace(l,"")):0,a=o[h][p]?parseFloat(o[h][p].replace(l,"")):s,u=this.easing[e](t,n,s,a,r),l=o[h][p].replace(/[0-9|\-|\.]/g,""),c+=u+l,f-1>p&&(c+=",");d[h]=c}else l=o[h].replace(/[0-9|\-|\.]/g,""),s=0===i[h]?0:parseFloat(i[h].replace(l,"")),a=parseFloat(o[h].replace(l,"")),d[h]=this.easing[e](t,n,s,a,r),d[h]+=l;return d},applyNewTransform:function(e,t,n){var i="";for(var o in n)i+=o+"("+n[o]+") ";e.style[t]=i},updateAnimation:function(){for(var e,n,i,o,r=t.activeAnimations,s=!0,a=0,l=r.length;l>a;a++){r[a].currentTime=Date.now(),o=0;for(var c=0;c<r[a].properties.length;c++){if(n=r[a].properties[c],!n.complete){i=r[a].options;var u=(r[a].currentTime-r[a].startTime)/(r[a].endTime-r[a].startTime);u>1&&(u=1);var e=0;e=n.type===t.types.TRANSFORM?t.tweenTransform(i.easing,u,r[a].currentTime-r[a].startTime,n.startValue,n.targetValue,r[a].options.duration):n.type===t.types.COLOUR?t.tweenColour(u,n.startValue,n.targetValue):t.easing[i.easing](u,r[a].currentTime-r[a].startTime,parseInt(n.startValue,10),n.targetValue,r[a].options.duration),1===u&&(e=n.targetValue,r[a].properties[c].complete=!0,o++),"scrollLeft"===n.name||"scrollTop"===n.name?r[a].element[n.name]=e:n.type===t.types.TRANSFORM?t.applyNewTransform(r[a].element,n.name,e):n.type===t.types.PERCENT?r[a].element.style[n.name]=e+"%":n.type===t.types.PIXELS?r[a].element.style[n.name]=e+"px":("filter"===n.name&&(e=t.convertOpacityToFilterString(e)),r[a].element.style[n.name]=e),1>u&&(s=!1)}o===r[a].properties.length&&(r[a].allComplete=!0)}}s?(cancelAnimationFrame(t.animRequest),clearInterval(t.animationTimer),t.animationTimer=null):t.startAnimationInterval(),a=0;for(var d=t.activeAnimations.slice(0);l>a;a++)d[a].allComplete&&(t.removeAnimation(d[a].element),d[a].options.complete&&d[a].options.complete(d[a].element))},removeAnimation:function(e){for(var t=0,n=this.activeAnimations.length;n>t;t++)if(this.activeAnimations[t].element===e){this.activeAnimations.splice(t,1);break}},handleCallback:function(e){for(var t=0,n=this.activeAnimations.length;n>t;t++)this.activeAnimations[t].options.complete&&this.activeAnimations[t].options.complete(e)},hexToRGB:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,n,i){return t+t+n+n+i+i});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+")"},colourSectionToHex:function(e){e=parseInt(e,10);var t=e.toString(16);return 1===t.length?"0"+t:t},RGBToHex:function(e){var t=this.RGBToArray(e);return"#"+this.colourSectionToHex(t[0])+this.colourSectionToHex(t[1])+this.colourSectionToHex(t[2])},RGBToArray:function(e){e=e.replace(/ /g,"");var t=e.split("(");return t=t[1].split(")"),t=t[0].split(",")},onTransitionEnd:function(e){for(var n=0,i=t.activeAnimations.length,o=t.activeAnimations.slice(0);i>n;n++)if(o[n].element===e.target&&(o[n].element.removeEventListener("transitionend",t.onTransitionEnd,!1),o[n].element.style[t.transitionString]="none",t.removeAnimation(o[n].element),o[n].options.complete)){var e={};e.target=e.currentTarget=o[n].element,o[n].options.complete(e)}}};return t.init(),e}(),function(){for(var e=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),o=window.setTimeout(function(){t(n+i)},i);return e=n+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var NATION=NATION||{};NATION.EventDispatcher=function(){"use strict";var e={};e.addListener=function(e,n){"mousewheel"===e&&(e=t.normaliseMouseWheelEvent()),"undefined"==typeof t.eventHandlers[e]&&(t.eventHandlers[e]=[]),t.eventHandlers[e].push(n)},e.removeListener=function(e,n){if("mousewheel"===e&&(e=t.normaliseMouseWheelEvent()),t.eventHandlers[e]instanceof Array){var i=t.eventHandlers[e],o=0,r=i.length;if(!n)return void(t.eventHandlers[e]=[]);for(;r>o;o++)String(i[o])===String(n)&&i.splice(o,1)}},e.trigger=function(e){var n,i,o,r,s=0,a=Array.prototype.slice.call(arguments).splice(2);if("mousewheel"===e&&(e=t.normaliseMouseWheelEvent()),r="string"==typeof e?{type:e}:e,!r)throw new Error("Type is undefined");if(r.target||(r.target=this),!r.type)throw new Error("Object missing 'type' property");if(t.eventHandlers[r.type]instanceof Array)for(i=t.eventHandlers[r.type],n=i.length,a.unshift(r);n>s;s++)o=i[s],o&&o.apply(this,a)};var t={eventHandlers:[],normaliseMouseWheelEvent:function(){return NATION.Utils.isEventSupported("mousewheel")||(type="DOMMouseScroll"),type}};return e};var NATION=NATION||{};NATION.InfiniteScroll=function(e,t,n){"use strict";var i=new NATION.EventDispatcher;i.LOADED="Loaded",i.ALL_LOADED="AllLoaded",i.FIRST_LOAD="FirstLoad";var o={SELECTOR_ERROR:"InfiniteScroll: Passed selector must be either a string or a jQuery object.",selector:null,options:{nextSelector:".next",loadButtonSelector:"",alwaysButtonTrigger:!1,loadingCopy:"Loading...",loadCompleteCopy:"All items loaded"},selectorString:"",paginationSelector:null,loading:!1,currentPage:0,totalPages:0,loadingHTML:"<p>{copy}</p>",loadingSelector:"#infinite-scroll-loading-msg",loadMessage:"",loadingCopy:"Loading...",loadCompleteCopy:"All items loaded",loadTimer:null,loadsEnabled:!1,loadInProgress:!1,nextPageAnchor:null,init:function(){if(this.selector=NATION.Utils.getDOMElement(e),this.getSelectorString(e),this.paginationSelector=NATION.Utils.getDOMElement(t),n)for(var i in n)this.options[i]=n[i];this.options.loadButtonSelector?this.options.loadButtonSelector=NATION.Utils.getDOMElement(this.options.loadButtonSelector):this.loadsEnabled=!0,this.totalPages=this.paginationSelector.querySelectorAll("a").length,this.prepareLoadingMessage(),this.createListeners()},getSelectorString:function(e){if("string"==typeof e)this.selectorString=e;else{if("undefined"==typeof jQuery)throw new Error(this.SELECTOR_ERROR);if(!(e instanceof jQuery))throw new Error(this.SELECTOR_ERROR);this.selectorString=e.selector}},prepareLoadingMessage:function(){this.loadMessage=document.createElement("div"),this.loadMessage.setAttribute("id","infinite-scroll-loading-msg"),this.loadMessage.className="infinite-scroll-loading-display",this.loadMessage.innerHTML=this.loadingHTML,this.selector.appendChild(this.loadMessage),this.updateLoadMessageReference(),this.loadMessage.style.display="none"},updateLoadMessageReference:function(){this.loadMessage=document.querySelector(this.loadingSelector)},createListeners:function(){this.options.loadButtonSelector&&this.options.loadButtonSelector.addEventListener("click",function(e){o.onLoadButtonClicked(e)}),window.addEventListener("scroll",function(){o.onWindowScroll(!1)})},hideFinalLoadingMessage:function(){this.updateLoadMessageReference(),this.loadMessage.querySelector("p").innerHTML=this.options.loadCompleteCopy,this.loadMessage.className+=" complete",this.options.loadButtonSelector&&(this.options.loadButtonSelector.style.display="none"),this.loadTimer&&clearTimeout(this.loadTimer),this.loadTimer=setTimeout(function(){o.onLoadTimerTicked()},2e3)},hideLoadingMessage:function(){this.updateLoadMessageReference()},onLoadTimerTicked:function(){this.hideLoadingMessage()},onLoadButtonClicked:function(e){this.loadInProgress||(this.options.alwaysButtonTrigger?this.options.loadButtonSelector.className+=" disabled":(i.trigger(i.FIRST_LOAD),this.options.loadButtonSelector.style.display="none",this.loadsEnabled=!0),this.onWindowScroll(!0)),e.stopPropagation(),e.preventDefault()},onWindowScroll:function(e){if(this.paginationSelector&&(this.loadsEnabled||e)&&!this.loadInProgress){var t=this.selector.getBoundingClientRect().bottom,n=window.innerHeight;if(n>=t&&!this.loading){this.loading=!0,this.currentPage++;var i;if(1===this.currentPage?this.paginationSelector.querySelector(this.options.nextSelector)?i=this.paginationSelector.querySelector(this.options.nextSelector):this.options.nextSelector||(i=this.paginationSelector.getElementsByTagName("a")[this.currentPage]):i=this.nextPageAnchor,i){this.loadMessage.querySelector("p").innerHTML=this.options.loadingCopy,this.loadMessage.style.display="block",this.loadInProgress=!0;var r=i.getAttribute("href");NATION.Utils.ajax({url:r,method:"get",dataType:"text",success:function(e){o.onPageLoadComplete(e)},error:function(e){o.onPageLoadError(e)}})}}}},onPageLoadComplete:function(e){this.loadInProgress=!1,this.options.loadButtonSelector&&(this.options.loadButtonSelector.className=this.options.loadButtonSelector.className.replace(/ disabled|disabled/g,""));var t=document.createElement("div");t.innerHTML=e;for(var n=t.querySelector(this.selectorString).children,o=0,r=n.length,s=null;r>o;o++)""!==n[o].className?n[o].className+=" loaded-item":n[o].className="loaded-item";for(o=0,r=n.length,s=null;r>o;o++)s=n[o].cloneNode(!0),this.selector.appendChild(s);this.loading=!1,this.nextPageAnchor=this.options.nextSelector?t.querySelector(this.options.nextSelector)?t.querySelector(this.options.nextSelector):null:t.getElementsByTagName("a")[this.currentPage]?t.getElementsByTagName("a")[this.currentPage]:null;var a=this.nextPageAnchor;this.currentPage===this.totalPages-1&&!this.options.nextSelector||this.options.nextSelector&&!a?(this.hideFinalLoadingMessage(),i.trigger(i.ALL_LOADED)):(this.hideLoadingMessage(),i.trigger(i.LOADED))},onPageLoadError:function(){window.console&&console.log("NATION.InfiniteScroll: Load error")}};return o.init(),i};var NATION=NATION||{};NATION.ResponsiveImages=function(){"use strict";var e={};e.update=function(){t.createImages()};var t={responsiveImages:[],resizeTimer:null,init:function(){this.createImages(),this.createListeners()},createImages:function(){this.responsiveImages=[];for(var e,t,n,i,o,r,s,a,l,c=document.querySelectorAll("[data-responsive-image]"),u=0,d=c.length,h=window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth,p=0;d>u;u++){for(l=!1,t={},e=c[u],t.selector=e,t.path=e.getAttribute("data-path")||"",t.fullImage=e.getAttribute("data-src"),n=e.getAttribute("data-srcset").split(","),p=0,a=n.length,t.sizes=[],s=0;a>p&&(i=n[p].trim(),i=i.split(" "),o={filename:i[0],trigger:i[1]?parseInt(i[1].replace("w",""),10):!1},t.sizes.push(o),o.trigger>=s&&h<o.trigger||!o.trigger);p++)r=o.filename,s=o.trigger,t.currentImage=r,l=!0;l||(r=t.fullImage,t.currentImage=r),c[u].src=t.path+r,this.responsiveImages.push(t)}},createListeners:function(){window.addEventListener("resize",function(e){t.onWindowResized(e)})},update:function(){for(var e,t,n,i,o,r=0,s=this.responsiveImages.length,a=0,l=window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth;s>r;r++){for(a=0,o=!1,e=this.responsiveImages[r].sizes.length,i=n=0;e>a;a++)i=this.responsiveImages[r].sizes[a].trigger,(i>l&&i>=n||!i)&&(t=this.responsiveImages[r].sizes[a].filename,n=i,o=!0);o||(t=this.responsiveImages[r].fullImage),this.responsiveImages[r].currentImage!==t&&(this.responsiveImages[r].selector.src=this.responsiveImages[r].path+t,this.responsiveImages[r].currentImage=t)}},resize:function(){clearTimeout(this.resizeTimer),this.resizeTimer=null,this.responsiveImages.length&&this.update()},onWindowResized:function(){this.resizeTimer||(this.resizeTimer=setTimeout(function(){t.resize()},20))}};return t.init(),e}();var NATION=NATION||{};NATION.Slideshow=function(e,t){"use strict";var n=new NATION.EventDispatcher;n.IMAGE_LOAD_COMPLETE="ImageLoadComplete",n.SLIDE_CHANGE="SlideChange",n.showSlide=function(e){i.showSlide(e)},n.stopAutoCycling=function(){i.stopAutoCycling()},n.startAutoCycling=function(){i.startAutoCycling()},n.reposition=function(){i.prepareSlides()},n.disableTouch=function(){i.removeTouchListeners()},n.enableTouch=function(){i.createTouchListeners()},n.getCurrentSlideID=function(){return i.currentSlideID};var i={DOMElement:null,jQueryMode:!1,totalSlides:0,currentSlideID:0,animating:!1,options:{autoPlay:!0,slide:!1,delay:4e3,duration:600,easing:"linear",useCaptions:!1,pips:!1,touch:!0,swipeTolerance:100,useSlideWidth:!1},autoCycling:!1,cycleTimer:null,touchStartX:0,touchStartY:0,lastTouchY:0,slideWidth:0,loadingImages:[],touchListenersActive:!1,init:function(){if(this.DOMElement=NATION.Utils.getDOMElement(e),this.DOMElement.style["-ms-touch-action"]="none",this.jQueryMode="undefined"!=typeof jQuery,this.totalSlides=this.DOMElement.querySelectorAll(".slide").length,t)for(var n in t)this.options[n]=t[n];this.options.slide||(this.options.fade=!0),this.totalSlides>1?(this.prepareSlides(),this.options.useCaptions&&this.prepareCaptions(),this.options.pips&&this.preparePips(),this.options.autoPlay&&this.startAutoCycling(),this.createListeners()):(this.DOMElement.querySelector(".previous")&&(this.DOMElement.querySelector(".previous").style.display="none"),this.DOMElement.querySelector(".next")&&(this.DOMElement.querySelector(".next").style.display="none"),this.options.pips&&(this.DOMElement.querySelector(".pips").style.display="none")),this.options.useSlideWidth&&this.preloadFirstSlide(),this.loadingImages=this.DOMElement.querySelectorAll("img"),this.checkAllImagesLoaded()},preloadFirstSlide:function(){if(this.slideWidth=this.DOMElement.querySelectorAll(".slide")[0].clientWidth,this.DOMElement.querySelectorAll(".slide")[0].querySelector("img")){var e=this.DOMElement.querySelectorAll(".slide")[0].querySelector("img").getAttribute("src"),t=document.createElement("img");t.onload=function(){i.onFirstImagePreloaded()},t.src=e}},checkAllImagesLoaded:function(){var e=0,t=this.loadingImages.length,o=!0;for(this.imageLoader&&clearTimeout(this.imageLoader);t>e;e++)if(!this.loadingImages[e].complete)return o=!1,void(this.imageLoader=setTimeout(function(){i.checkAllImagesLoaded()},200));n.trigger(n.IMAGE_LOAD_COMPLETE)},prepareSlides:function(){var e=this.DOMElement.querySelectorAll(".slide"),t=0,n=e.length;if(this.options.fade){for(;n>t;t++)e[t].style.zIndex=5;this.DOMElement.querySelectorAll(".slide")[0].style.zIndex=10}else if(this.options.slide)for(t=0;n>t;t++)t!==this.currentSlideID&&(e[t].style.left=this.options.useSlideWidth?this.slideWidth+"px":"100%")},prepareCaptions:function(){var e,t=0,n=this.totalSlides,i=this.DOMElement.querySelectorAll(".slide");for(this.captions=[];n>t;t++){e=i[t].querySelector(".caption");var o=e?e.innerHTML:"&nbsp;";""===o&&(o="&nbsp;"),this.captions.push(o)}this.DOMElement.querySelector(".captions").innerHTML=this.captions[0]},preparePips:function(){var e=this.DOMElement.querySelector(".pips"),t=0,n=0;if(e.children.length<=0){t=0,n=this.totalSlides;var i="",o=e.nodeName.toLowerCase();for("ul"!==o&&"ol"!==o&&(i+="<ul>");n>t;t++)i+='<li class="pip',0===t&&(i+=" active"),i+='"><a href="#"></a></li>';"ul"!==o&&"ol"!==o&&(i+="</ul>"),e.innerHTML=i}else if(e.children.length<this.totalSlides){var r=null;for(t=0,n=this.totalSlides-e.children.length;n>t;t++)r=e.firstChild.cloneNode(),e.appendChild(r)}e.children[0].className+=" active"},startAutoCycling:function(){this.autoCycling=!0,this.cycleTimer=setTimeout(function(){i.onCycleTimerTicked()},this.options.delay)},stopAutoCycling:function(){this.autoCycling=!1,this.cycleTimer&&clearTimeout(this.cycleTimer)},showSlide:function(e,t){if(e!==this.currentSlideID&&!this.animating){this.animating=!0;var o={},r={},s={},a={};if(this.options.slide?(t?(o=this.options.useSlideWidth?{left:this.slideWidth+"px"}:{left:"100%"},s=this.options.useSlideWidth?{left:-this.slideWidth+"px"}:{left:"-100%"}):(o=this.options.useSlideWidth?{left:-this.slideWidth+"px"}:{left:"-100%"},s=this.options.useSlideWidth?{left:this.slideWidth+"px"}:{left:"100%"}),r={left:0},a={}):this.options.fade&&(o={opacity:1},r={opacity:1},a={opacity:1,zIndex:5},s={opacity:0,zIndex:10}),this.jQueryMode)$(this.DOMElement).find(".slide").eq(this.currentSlideID).stop().css(a).animate(o,this.options.duration,this.options.easing),$(this.DOMElement).find(".slide").eq(e).stop().css(s).animate(r,this.options.duration,this.options.easing,function(){i.onAnimationComplete()});else{var l=this.DOMElement.querySelectorAll(".slide")[this.currentSlideID];NATION.Utils.setStyle(l,a),NATION.Animation.start(l,o,{duration:this.options.duration,easing:this.options.easing}),l=this.DOMElement.querySelectorAll(".slide")[e],NATION.Utils.setStyle(l,s),NATION.Animation.start(l,r,{duration:this.options.duration,easing:this.options.easing},function(){i.onAnimationComplete()})}this.options.pips&&this.updatePips(this.currentSlideID,e),this.currentSlideID=e,n.trigger(n.SLIDE_CHANGE),this.options.useCaptions&&(this.jQueryMode?$(this.DOMElement).find(".captions").animate({opacity:0},this.options.duration/2,"linear",function(){i.onCaptionFadedOut()}):NATION.Animation.start(this.DOMElement.querySelector(".captions"),{opacity:0},{duration:this.options.duration/2,easing:"linear"},function(e){i.onCaptionFadedOut(e)}))}},createListeners:function(){if(this.DOMElement.querySelector(".previous")&&this.DOMElement.querySelector(".previous").addEventListener("click",function(e){i.onPreviousClicked(e)}),this.DOMElement.querySelector(".next")&&this.DOMElement.querySelector(".next").addEventListener("click",function(e){i.onNextClicked(e)}),this.options.pips)for(var e=this.DOMElement.querySelectorAll(".pips a"),t=0,n=e.length;n>t;t++)e[t].addEventListener("click",function(e){i.onPipClicked(e)});this.options.touch&&this.createTouchListeners(),this.options.useSlideWidth&&window.addEventListener("resize",function(e){i.onWindowResized(e)})},createTouchListeners:function(){this.touchListenersActive||(this.touchListenersActive=!0,this.DOMElement.addEventListener("touchstart",i.onTouchStart),this.DOMElement.addEventListener("MSPointerDown",i.onTouchStart))},removeTouchListeners:function(){this.touchListenersActive&&(this.touchListenersActive=!1,this.DOMElement.removeEventListener("touchstart",i.onTouchStart),this.DOMElement.removeEventListener("MSPointerDown",i.onTouchStart),document.documentElement.removeEventListener("touchmove",i.onTouchMove),document.documentElement.removeEventListener("touchend",i.onTouchEnd),document.documentElement.removeEventListener("MSPointerMove",i.onTouchMove),document.documentElement.removeEventListener("MSPointerUp",i.onTouchEnd))},updatePips:function(e,t){var n=this.DOMElement.querySelector(".pips").children;n[e].className=n[e].className.replace(/ active|active/g,""),n[t].className+=" active"},onPreviousClicked:function(e){if(this.autoCycling&&this.stopAutoCycling(),!this.animating){var t=this.currentSlideID-1;0>t&&(t=this.totalSlides-1),this.showSlide(t,!0)}e.stopPropagation(),e.preventDefault()},onNextClicked:function(e){if(this.autoCycling&&this.stopAutoCycling(),!this.animating){var t=this.currentSlideID+1;t>this.totalSlides-1&&(t=0),this.showSlide(t)}e.stopPropagation(),e.preventDefault()},onAnimationComplete:function(){this.animating=!1,this.autoCycling&&this.startAutoCycling()},onCycleTimerTicked:function(){var e=this.currentSlideID+1;e>this.totalSlides-1&&(e=0),this.showSlide(e)},onCaptionFadedOut:function(){var e=this.captions[this.currentSlideID];this.DOMElement.querySelector(".captions").innerHTML=e,this.jQueryMode?$(this.DOMElement).find(".captions").stop().animate({opacity:1},this.options.duration/2,"linear"):NATION.Animation.start(this.DOMElement.querySelector(".captions"),{opacity:1},{duration:this.options.duration/2,easing:"linear"})},onPipClicked:function(e){this.autoCycling&&this.stopAutoCycling();for(var t=this.DOMElement.querySelectorAll(".pips a"),n=0,i=t.length,o=-1;i>n;n++)if(t[n]===e.currentTarget){o=n;break}this.showSlide(o,o<this.currentSlideID),e.stopPropagation(),e.preventDefault()},onTouchStart:function(e){if(!i.animating){var t="undefined"!=typeof e.changedTouches?e.changedTouches:[e],n=NATION.Utils.getOffset(i.DOMElement);i.touchStartY=i.lastTouchY=t[0].pageY,i.touchStartX=t[0].pageX,i.verticalSwipeInProgress=!1;var o=NATION.Utils.getPageElement();i.startScroll=o.scrollTop;var r=i.touchStartY-NATION.Utils.getOffset(i.DOMElement).top;i.offsetTop=i.DOMElement.getBoundingClientRect().top+r,i.touchStartX>n.left&&i.touchStartX<n.left+i.DOMElement.clientWidth&&i.touchStartY>n.top&&i.touchStartY<n.top+i.DOMElement.clientHeight&&(document.documentElement.addEventListener("touchmove",i.onTouchMove),document.documentElement.addEventListener("touchend",i.onTouchEnd),document.documentElement.addEventListener("MSPointerMove",i.onTouchMove),document.documentElement.addEventListener("MSPointerUp",i.onTouchEnd))}},onTouchMove:function(e){var t="undefined"!=typeof e.changedTouches?e.changedTouches:[e];if(t[0].pageY<i.touchStartY-i.options.swipeTolerance/2||t[0].pageY>i.touchStartY+i.options.swipeTolerance/2||i.verticalSwipeInProgress){var n=NATION.Utils.getPageElement();n.scrollTop=i.startScroll+(n.scrollTop-t[0].pageY)+i.offsetTop,i.verticalSwipeInProgress=!0}e.stopPropagation(),e.preventDefault()},onTouchEnd:function(e){var t="undefined"!=typeof e.changedTouches?e.changedTouches:[e];i.verticalSwipeInProgress=!1;var n=t[0].pageX,o=i.currentSlideID,r=!1,s=!1;n>i.touchStartX+i.options.swipeTolerance?(o-=1,0>o&&(o=i.totalSlides-1),r=s=!0):n<i.touchStartX-i.options.swipeTolerance&&(o+=1,o>i.totalSlides-1&&(o=0),r=!0),r&&(i.autoCycling&&i.stopAutoCycling(),i.showSlide(o,s)),document.documentElement.removeEventListener("touchmove",i.onTouchMove),document.documentElement.removeEventListener("touchend",i.onTouchEnd),document.documentElement.removeEventListener("MSPointerMove",i.onTouchMove),document.documentElement.removeEventListener("MSPointerUp",i.onTouchEnd),r&&(e.stopPropagation(),e.preventDefault())},onFirstImagePreloaded:function(){this.slideWidth=this.DOMElement.querySelectorAll(".slide")[0].clientWidth,this.prepareSlides()},onWindowResized:function(){this.options.useSlideWidth&&(this.slideWidth=this.DOMElement.querySelectorAll(".slide")[0].clientWidth,this.prepareSlides())}};return i.init(),n};var NATION=NATION||{};NATION.Utils=function(){"use strict";var e={};e.createNamespace=function(e){for(var t=e.split("."),n=window,i="",o=0,r=t.length;r>o;o++)i=t[o],n[i]=n[i]||{},n=n[i];return n},e.isEventSupported=function(e){var t={select:"input",change:"input",focusin:"input",focusout:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},n=document.createElement(t[e]||"div");e="on"+e;var i=e in n;return i||(n.setAttribute(e,"return;"),i="function"==typeof n[e]),n=null,i},e.camelcaseString=function(e){return e.replace(/(?:^|\s)\w/g,function(e){return e.toUpperCase()})},e.getPosition=function(e){var t={top:0,left:0};if("fixed"!==e.style.position){for(var n=e.offsetParent||document.documentElement;n&&"html"!==n.nodeName&&"static"===n.style.position;)n=n.offsetParent;var i=this.getOffset(e),o={top:0,left:0};"html"!==n.nodeName&&(o=this.getOffset(e.offsetParent));var r=this.getPropertyInPixels(n,"borderTopWidth"),s=this.getPropertyInPixels(n,"borderLeftWidth");"auto"===r&&(r=0),"auto"===s&&(s=0);var a=this.getPropertyInPixels(e,"marginTop"),l=this.getPropertyInPixels(e,"marginLeft");return t.top=i.top-o.top-a,t.left=i.left-o.left-l,t}var c=e.getBoundingClientRect();t.top=c.top,t.left=c.left},e.getPropertyInPixels=function(e,t){var n="undefined"!=typeof window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t],i=0;if(n)if(n.search("%")>-1){var o=parseInt(n.replace(/%/,""),10)/100;i=e.parentElement.clientHeight*o}else i=parseInt(n.replace("px",""),10);return i},e.getProperty=function(e,t){var n=null;return t=this.getPrefixedName(t),n=e.style&&e.style[t]?e.style[t]:"undefined"!=typeof window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t],n=n.replace(/url\(/g,""),n=n.replace(/\)/g,""),n=n.replace(/px/g,""),n=n.replace(/%/g,""),n=n.replace(/'/g,"").replace(/"/g,"")},e.getStyle=function(e,t){return this.getProperty(e,t)},e.getPrefixedName=function(e){for(var n=["webkit","moz","ms"],i=0,o=n.length,r=e;o>i;i++)if(r.search("-"+n[i])>-1){r=r.replace("-"+n[i]+"-","");break}if(void 0!==t.testingElement.style[r]||"scrollLeft"===r||"scrollTop"===r)return r;for(i=0,r=r.charAt(0).toUpperCase()+r.slice(1);o>i;i++)if(void 0!==t.testingElement.style[n[i]+r])return n[i]+r;throw new Error("NATION.Utils: This browser does not support the CSS property '"+e+"'")},e.getOffset=function(e){var t={top:0,left:0};if("undefined"!=typeof e.getBoundingClientRect){var n=e.getBoundingClientRect();return t={top:n.top,left:n.left},{top:t.top+(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),left:t.left+(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0)}
}},e.getDOMElement=function(e){var t={};return t="string"==typeof e?document.querySelector(e):"undefined"!=typeof jQuery&&e instanceof jQuery?jQuery(e)[0]:e},e.getCookie=function(e){for(var t=e+"=",n=document.cookie.split(";"),i=null,o=0,r=n.length,s="";r>o;o++){for(s=n[o];" "===s.charAt(0);)s=s.substring(1,s.length);0===s.indexOf(t)&&(i=s.substring(t.length,s.length))}return i},e.setStyle=function(e,t){var n="";for(var i in t)"opacity"!==i||"opacity"in document.documentElement.style?(n=this.getPrefixedName(i),e.style[n]=t[i]):e.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+100*parseInt(t[i],10)+")"},e.getPageElement=function(){return t.scrollElement},e.ajax=function(e){!function(e){function t(t){"loaded"===this.readyState||"complete"===this.readyState?e.success():this.readyState||e.success(t)}if("jsonp"===e.dataType){var n=document.createElement("script");n.options=src.url+"?callback=NATION.Utils.callbackMethod",e.data&&(n+="&data="+JSON.stringify(e.data)),document.getElementsByTagName("body")[0].appendChild(n)}else if("script"===e.dataType){var n=document.createElement("script");n.src=e.url,e.id&&(n.id=e.id),"onreadystatechange"in n?n.onreadystatechange=t:n.addEventListener("load",t),document.getElementsByTagName("body")[0].appendChild(n)}else{e.dataType||(e.dataType="json");var i="undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");i.open(e.method,e.url,!0),"json"===e.dataType?(e.data=JSON.stringify(e.data),i.setRequestHeader("Content-Type","application/json; charset=utf-8")):(e.data=JSON.stringify(e.data),i.setRequestHeader("Content-type","application/x-www-form-urlencoded")),i.onreadystatechange=function(){if(4===i.readyState){if(200!==i.status&&304!==i.status)return void e.error(i.status,i.statusText);if(t=i.responseText,(!e.responseType||"json"===e.responseType)&&"{"===i.responseText[0])var t=JSON.parse(i.responseText);e.success(t)}},i.send(e.data)}}(e)};var t={testingElement:null,scrollElement:null,init:function(){this.testingElement=document.createElement("div"),this.checkScrollElement()},checkScrollElement:function(){var e=document.documentElement,t=document.body,n=window.pageYOffset||t.scrollTop||e.scrollTop,i=n+1;window.scrollTo(0,i);var o=e.scrollTop===i?document.documentElement:document.body;window.scrollTo(0,n),this.scrollElement=o}};return t.init(),e}();var NATION=NATION||{};NATION.VerticalScrollbar=function(e,t,n){"use strict";var i={};i.enable=function(){o.listenersCreated||o.createListeners()},i.disable=function(){o.listenersCreated&&o.removeListeners()},i.reset=function(){o.HANDLE_SELECTOR.style.top=0,o.repositionContent(0),o.touchLastPos=o.CONTENT_SELECTOR.scrollTop},i.resize=function(e){var t=o.contentHeight;if(o.SCROLLBAR_SELECTOR.style.display="block",o.contentHeight=o.CONTENT_SELECTOR.children[0].offsetHeight,o.barHeight=o.SCROLLBAR_SELECTOR.offsetHeight,o.setDefaults(),o.listenersCreated||o.createListeners(),e){if(t>0&&o.lastPercentage>0){var n=t/o.contentHeight;n>1&&(n=1);var i=n*(o.TRACK_SELECTOR.clientHeight-o.HANDLE_SELECTOR.offsetHeight);o.lastPercentage=i,o.HANDLE_SELECTOR.style.top=i+"px"}}else this.reset();o.handleHeight===o.barHeight?(o.SCROLLBAR_SELECTOR.style.display="none",o.listenersCreated&&this.disable()):o.listenersCreated||this.enable()},i.setPosition=function(e){o.repositionContent(e);var t=e*(o.TRACK_SELECTOR.clientHeight-o.HANDLE_SELECTOR.offsetHeight);o.HANDLE_SELECTOR.style.top=t+"px"};var o={CONTENT_SELECTOR:null,SCROLLBAR_SELECTOR:null,TRACK_SELECTOR:null,HANDLE_SELECTOR:null,MIN_HANDLE_HEIGHT:50,TIME_CONSTANT:325,barHeight:0,contentHeight:0,lastPercentage:0,mouseY:0,listenersCreated:!1,touchDragInProgress:!1,touchLastPos:0,touchStartY:0,handleHeight:0,inertiaVelocity:0,inertiaAmplitude:0,inertiaTimestamp:0,inertiaTarget:0,inertiaScrolling:!1,options:{heightDifference:0,enableMouseLock:!1,inertiaEnabled:!0},init:function(){if(this.CONTENT_SELECTOR=NATION.Utils.getDOMElement(e),this.SCROLLBAR_SELECTOR=NATION.Utils.getDOMElement(t),this.TRACK_SELECTOR=this.SCROLLBAR_SELECTOR.querySelector(".track"),n)for(var i in n)this.options[i]=n[i];this.HANDLE_SELECTOR=this.SCROLLBAR_SELECTOR.querySelector(".handle"),this.HANDLE_SELECTOR.setAttribute("draggable",!1),this.SCROLLBAR_SELECTOR.style["-ms-touch-action"]="none",this.CONTENT_SELECTOR.style["-ms-touch-action"]="none",this.barHeight=this.TRACK_SELECTOR.offsetHeight+this.options.heightDifference,this.contentHeight=this.CONTENT_SELECTOR.children[0].offsetHeight,this.contentHeight>this.SCROLLBAR_SELECTOR.offsetHeight&&(this.setDefaults(),this.createListeners())},setDefaults:function(){this.HANDLE_SELECTOR.style.top=0,this.HANDLE_SELECTOR.tabIndex=-1;var e=this.barHeight/this.contentHeight;this.handleHeight=Math.floor(this.barHeight*e),this.handleHeight<this.MIN_HANDLE_HEIGHT?this.handleHeight=this.MIN_HANDLE_HEIGHT:this.handleHeight>this.barHeight&&(this.handleHeight=this.barHeight),this.HANDLE_SELECTOR.style.height=this.handleHeight+"px"},createListeners:function(){this.listenersCreated=!0,this.HANDLE_SELECTOR.addEventListener("mousedown",o.onHandleMouseDown),this.HANDLE_SELECTOR.addEventListener("click",o.preventDefaultAction),this.CONTENT_SELECTOR.addEventListener("mousewheel",o.onMouseWheel),this.CONTENT_SELECTOR.addEventListener("wheel",o.onMouseWheel),this.TRACK_SELECTOR.addEventListener("mousedown",o.onTrackMouseDown),this.HANDLE_SELECTOR.addEventListener("touchstart",o.onTouchStart),this.HANDLE_SELECTOR.addEventListener("MSPointerDown",o.onTouchStart),this.CONTENT_SELECTOR.addEventListener("touchstart",o.onContentTouchStart),this.CONTENT_SELECTOR.addEventListener("MSPointerDown",o.onContentTouchStart)},removeListeners:function(){this.listenersCreated=!1,this.HANDLE_SELECTOR.removeEventListener("mousedown",o.onHandleMouseDown),this.HANDLE_SELECTOR.removeEventListener("click",o.preventDefaultAction),this.CONTENT_SELECTOR.removeEventListener("mousewheel",o.onMouseWheel),this.CONTENT_SELECTOR.removeEventListener("wheel",o.onMouseWheel),this.TRACK_SELECTOR.removeEventListener("mousedown",o.onTrackMouseDown),this.HANDLE_SELECTOR.removeEventListener("touchstart",o.onTouchStart),this.HANDLE_SELECTOR.removeEventListener("touchstart",o.onContentTouchStart),document.removeEventListener("mousemove",o.onHandleDragged),document.removeEventListener("mouseup",o.onHandleReleased),window.removeEventListener("touchmove",o.onTouchMove),window.removeEventListener("touchend",o.onTouchEnd),document.removeEventListener("MSPointerMove",o.onHandleDragged),document.removeEventListener("MSPointerUp",o.onHandleReleased),window.removeEventListener("MSPointerMove",o.onTouchMove),window.removeEventListener("MSPointerUp",o.onTouchEnd)},preventDefaultAction:function(e){e.stopPropagation(),e.preventDefault()},repositionContent:function(e){this.lastPercentage=e;var t=(this.CONTENT_SELECTOR.children[0].offsetHeight-(this.barHeight-this.options.heightDifference))*e;this.CONTENT_SELECTOR.scrollTop=t},onHandleMouseDown:function(e){o.inertiaScrolling=!1,o.CONTENT_SELECTOR.children[0].offsetHeight>o.barHeight&&(o.mouseY=e.pageY-NATION.Utils.getOffset(o.TRACK_SELECTOR).top,o.mouseBarOffset=e.pageY-NATION.Utils.getPosition(o.TRACK_SELECTOR).top-NATION.Utils.getPosition(o.HANDLE_SELECTOR).top,document.addEventListener("mousemove",o.onHandleDragged),document.addEventListener("mouseup",o.onHandleReleased),document.addEventListener("MSPointerMove",o.onHandleDragged),document.addEventListener("MSPointerUp",o.onHandleReleased)),e.stopPropagation(),e.preventDefault()},onHandleDragged:function(e){var t=e.pageY-NATION.Utils.getPosition(o.TRACK_SELECTOR).top,n=t-o.mouseBarOffset;n>o.barHeight-o.HANDLE_SELECTOR.offsetHeight?n=o.barHeight-o.HANDLE_SELECTOR.offsetHeight:0>n&&(n=0),o.HANDLE_SELECTOR.style.top=n+"px";var i=n/(o.barHeight-o.HANDLE_SELECTOR.offsetHeight);o.repositionContent(i),e.stopPropagation(),e.preventDefault()},onHandleReleased:function(e){document.removeEventListener("mousemove",o.onHandleDragged),document.removeEventListener("mouseup",o.onHandleReleased),document.removeEventListener("MSPointerMove",o.onHandleDragged),document.removeEventListener("MSPointerUp",o.onHandleReleased),e.stopPropagation(),e.preventDefault()},onMouseWheel:function(e){o.inertiaScrolling=!1;var t=e.deltaY;if(t){var n=(o.barHeight-o.HANDLE_SELECTOR.offsetHeight)/o.CONTENT_SELECTOR.children[0].clientHeight*(o.CONTENT_SELECTOR.offsetHeight-o.HANDLE_SELECTOR.offsetHeight),i=NATION.Utils.getPosition(o.HANDLE_SELECTOR).top;t>0?i+=n:i-=n,i>o.barHeight-o.HANDLE_SELECTOR.offsetHeight?i=o.barHeight-o.HANDLE_SELECTOR.offsetHeight:0>i&&(i=0),o.HANDLE_SELECTOR.style.top=i+"px";var r=0;0!==i&&(r=NATION.Utils.getPosition(o.HANDLE_SELECTOR).top/(o.barHeight-o.HANDLE_SELECTOR.offsetHeight)),(r!==o.lastPercentage||o.options.enableMouseLock)&&(o.repositionContent(r),e.stopPropagation(),e.preventDefault())}},onTrackMouseDown:function(e){o.inertiaScrolling=!1,o.mouseY=e.pageY-NATION.Utils.getOffset(o.TRACK_SELECTOR).top-o.HANDLE_SELECTOR.offsetHeight/2;var t=o.mouseY;0>t?t=0:t>o.barHeight-o.HANDLE_SELECTOR.offsetHeight&&(t=o.barHeight-o.HANDLE_SELECTOR.offsetHeight),o.HANDLE_SELECTOR.style.top=t+"px";var n=NATION.Utils.getPosition(o.HANDLE_SELECTOR).top/(o.barHeight-o.HANDLE_SELECTOR.offsetHeight);o.repositionContent(n),e.stopPropagation(),e.preventDefault()},onTouchStart:function(e){var t="undefined"!=typeof e.changedTouches?e.changedTouches:[e];o.inertiaScrolling=!1,o.CONTENT_SELECTOR.children[0].offsetHeight>o.barHeight&&(o.mouseY=t[0].pageY-NATION.Utils.getOffset(o.TRACK_SELECTOR).top,o.mouseBarOffset=t[0].pageY-NATION.Utils.getPosition(o.TRACK_SELECTOR).top-NATION.Utils.getPosition(o.HANDLE_SELECTOR).top,window.addEventListener("touchmove",o.onTouchMove),window.addEventListener("touchend",o.onTouchEnd),window.addEventListener("MSPointerMove",o.onTouchMove),window.addEventListener("MSPointerUp",o.onTouchEnd)),e.stopPropagation(),e.preventDefault()},onTouchMove:function(e){var t="undefined"!=typeof e.changedTouches?e.changedTouches:[e],n=t[0].pageY-NATION.Utils.getPosition(o.TRACK_SELECTOR).top,i=n-o.mouseBarOffset;i>o.barHeight-o.HANDLE_SELECTOR.offsetHeight?i=o.barHeight-o.HANDLE_SELECTOR.offsetHeight:0>i&&(i=0),o.HANDLE_SELECTOR.style.top=i+"px";var r=i/(o.barHeight-o.HANDLE_SELECTOR.offsetHeight);o.repositionContent(r),e.stopPropagation(),e.preventDefault()},onTouchEnd:function(){o.touchLastPos=o.CONTENT_SELECTOR.scrollTop,window.removeEventListener("touchmove",o.onTouchMove),window.removeEventListener("touchend",o.onTouchEnd),window.removeEventListener("MSPointerMove",o.onTouchMove),window.removeEventListener("MSPointerUp",o.onTouchEnd)},onContentTouchStart:function(e){var t="undefined"!=typeof e.changedTouches?e.changedTouches:[e];o.options.inertiaEnabled&&(o.inertiaScrolling=!1,o.inertiaVelocity=0,o.inertiaAmplitude=0,o.inertiaTimestamp=Date.now()),o.lastTouchPos=o.CONTENT_SELECTOR.scrollTop,o.touchStartY=o.touchLastY=t[0].pageY,window.addEventListener("touchmove",o.onContentTouchMove),window.addEventListener("touchend",o.onContentTouchEnd),window.addEventListener("MSPointerMove",o.onContentTouchMove),window.addEventListener("MSPointerUp",o.onContentTouchEnd)},onContentTouchMove:function(e){var t="undefined"!=typeof e.changedTouches?e.changedTouches:[e];o.touchDragInProgress=!0;var n=t[0].pageY-o.touchLastY;if(0!==n){var r=0;if(r=n>0?o.touchLastPos-n:o.touchLastPos-n,0>r?r=0:r>o.contentHeight-o.CONTENT_SELECTOR.clientHeight&&(r=o.contentHeight-o.CONTENT_SELECTOR.clientHeight),o.options.inertiaEnabled){var s=r-o.touchLastPos,a=1e3*s/(1+(Date.now()-o.inertiaTimestamp));o.inertiaVelocity=.8*a+.2*o.inertiaVelocity,o.inertiaTimestamp=Date.now()}o.touchLastPos=r,o.touchLastY=t[0].pageY;var l=0;0!==r&&(l=r/(o.contentHeight-o.CONTENT_SELECTOR.clientHeight)),i.setPosition(l)}e.stopPropagation(),e.preventDefault()},inertiaScroll:function(){var e,t,n,r;o.inertiaAmplitude&&(e=Date.now()-o.inertiaTimestamp,t=-o.inertiaAmplitude*Math.exp(-e/o.TIME_CONSTANT),t>.5||-.5>t?(n=o.touchLastPos=o.inertiaTarget+t,o.inertiaScrolling&&requestAnimationFrame(function(){o.inertiaScroll()})):(o.inertiaScrolling=!1,n=o.touchLastPos=o.inertiaTarget),r=n/(o.contentHeight-o.CONTENT_SELECTOR.clientHeight),0>r?(r=0,o.inertiaScrolling=!1):r>1&&(r=1,o.inertiaScrolling=!1),i.setPosition(r))},onContentTouchEnd:function(e){o.options.inertiaEnabled&&(o.inertiaVelocity>200||o.inertiaVelocity<-200)&&(o.inertiaAmplitude=.8*o.inertiaVelocity,o.inertiaTarget=Math.round(o.touchLastPos+o.inertiaAmplitude),o.inertiaTimestamp=Date.now(),o.inertiaScrolling=!0,requestAnimationFrame(function(){o.inertiaScroll()})),window.removeEventListener("touchmove",o.onContentTouchMove),window.removeEventListener("touchend",o.onContentTouchEnd),window.removeEventListener("MSPointerMove",o.onContentTouchMove),window.removeEventListener("MSPointerUp",o.onContentTouchEnd),o.touchDragInProgress&&(o.touchDragInProgress=!1,e.stopPropagation(),e.preventDefault())}};return o.init(),i},NATION.Utils.createNamespace("BISDT"),BISDT.Mediator=function(){"use strict";function e(e,t){return n[e]||(n[e]=[]),n[e].push({callback:t}),this}function t(e,t){if(!n[e])return!1;for(var i,o=0,r=n[e].length;r>o;o++)i=n[e][o],i.callback(t)}var n={};return{subscribe:e,publish:t}}(),NATION.Utils.createNamespace("BISDT.modules.Countdown"),BISDT.modules.Countdown.Controller=function(e){"use strict";function t(){i(),o(),n(),a.startTimer()}function n(){e.querySelector(".details-scroll").addEventListener("click",function(e){s(e)}),a.addListener(a.events.TIME_UPDATE,function(e){r(e)})}function i(){var t=e.getAttribute("data-time");a=new BISDT.modules.Countdown.models.TimeModel(t)}function o(){l=new BISDT.modules.Countdown.views.TimeRemainingView(e)}function r(){l.update(a.getTimeRemaining())}function s(e){BISDT.Mediator.publish(BISDT.Events.SCROLL_REQUEST,{selector:".stores"}),e.stopPropagation(),e.preventDefault()}var a=null,l=null;t()},NATION.Utils.createNamespace("BISDT.modules.EnterGuide"),BISDT.modules.EnterGuide.Controller=function(e){"use strict";function t(){n()}function n(){e.querySelector(".view-gallery").addEventListener("click",function(e){i(e)})}function i(){BISDT.Tracking.trackEvent("how to enter button","click","view the gallery")}t()},NATION.Utils.createNamespace("BISDT.modules.EntrySlideshow"),BISDT.modules.EntrySlideshow.Controller=function(e){"use strict";function t(){i(),o(),n()}function n(){e.querySelector(".previous").addEventListener("click",function(e){s(e)}),e.querySelector(".next").addEventListener("click",function(e){a(e)}),e.querySelector(".sticker-promo").addEventListener("click",function(e){m(e)}),v.addListener(v.events.VOTE_CLICKED,function(e){c(e)}),e.addEventListener("touchstart",function(e){h(e)}),e.addEventListener("MSPointerDown",function(e){h(e)}),e.addEventListener("PointerDown",function(e){h(e)}),window.addEventListener("resize",function(e){u(e)}),BISDT.Mediator.subscribe(BISDT.Events.URL_CHANGED,function(e){d(e)})}function i(){var t=e.querySelector(".gallery-slideshow").getAttribute("data-url"),n=parseInt(e.querySelector(".gallery-slideshow").getAttribute("data-total"),10),i=e.querySelector(".gallery-slideshow").getAttribute("data-vote-url");T=new BISDT.modules.EntrySlideshow.models.SlideshowModel(t,n,i)}function o(){v=new BISDT.modules.EntrySlideshow.views.SlideshowView(e,T)}function r(e){var t={state:{section:S,entryID:e},title:null,path:"/entry/"+e};BISDT.Mediator.publish(BISDT.Events.CHANGE_URL,t)}function s(e){T.getLoading()||(v.showPrevious(),r(T.getCurrentEntryID()),BISDT.Tracking.trackEvent("entry slideshow","click","previous slide")),e.stopPropagation(),e.preventDefault()}function a(e){T.getLoading()||(v.showNext(),r(T.getCurrentEntryID()),BISDT.Tracking.trackEvent("entry slideshow","click","next slide")),e.stopPropagation(),e.preventDefault()}function l(){E&&(clearTimeout(E),E=null),v.resize()}function c(){var e=v.getClickedPostID();T.submitVote(e)}function u(){E=setTimeout(function(){l()},20)}function d(e){e&&e.section===S&&e.entryID!==T.getCurrentEntryID()&&v.showSlide(e.entryID)}function h(t){if(!T.getLoading()){var n="undefined"!=typeof t.changedTouches?t.changedTouches:[t],i=NATION.Utils.getOffset(e);A=n[0].pageY,N=n[0].pageX,I=!1;var o=NATION.Utils.getPageElement();O=o.scrollTop;var r=A-NATION.Utils.getOffset(e).top;L=e.getBoundingClientRect().top+r,N>i.left&&N<i.left+e.clientWidth&&A>i.top&&A<i.top+e.clientHeight&&(document.documentElement.addEventListener("touchmove",p),document.documentElement.addEventListener("touchend",f),document.documentElement.addEventListener("MSPointerMove",p),document.documentElement.addEventListener("MSPointerUp",f),document.documentElement.addEventListener("PointerMove",p),document.documentElement.addEventListener("PointerUp",f))}}function p(e){if(y>10||!C){var t="undefined"!=typeof e.changedTouches?e.changedTouches:[e];if(1===t.length)if(t[0].pageY<A-g/2||t[0].pageY>A+g/2||I){var n=NATION.Utils.getPageElement();n.scrollTop=O+(n.scrollTop-t[0].pageY)+L,I=!0}else e.preventDefault()}y++}function f(e){var t="undefined"!=typeof e.changedTouches?e.changedTouches:[e],n=t[0].pageX,i=!1,o=!1;I||(n>N+g?(i=o=!0,s(e)):N-g>n&&(i=!0,a(e))),document.documentElement.removeEventListener("touchmove",p),document.documentElement.removeEventListener("touchend",f),document.documentElement.removeEventListener("MSPointerMove",p),document.documentElement.removeEventListener("MSPointerUp",f),document.documentElement.removeEventListener("PointerMove",p),document.documentElement.removeEventListener("PointerUp",f),I=!1,y=0,i&&(e.stopPropagation(),e.preventDefault())}function m(e){BISDT.Tracking.trackEvent("entry slideshow","click","promo button"),BISDT.Mediator.publish(BISDT.Events.SCROLL_REQUEST,{selector:".newsletter"}),e.stopPropagation(),e.preventDefault()}var g=100,S="entry",T=null,v=null,E=null,y=0,N=0,A=0,I=0,O=0,L=0,C=/iPhone|iPad|iPod/i.test(navigator.userAgent);t()},NATION.Utils.createNamespace("BISDT.modules.GalleryListing"),BISDT.modules.GalleryListing.Controller=function(e){"use strict";function t(){n(),i()}function n(){var t=".listing",n=".pager",i=".pager-next a",o=e.querySelector(".more-button"),r=e.getAttribute("data-loading-copy"),a=e.getAttribute("data-complete-copy"),l={nextSelector:i,loadButtonSelector:o,loadingCopy:r,loadCompleteCopy:a};o&&(s=new NATION.InfiniteScroll(t,n,l))}function i(){s&&(s.addListener(s.FIRST_LOAD,function(e){o(e)}),s.addListener(s.ALL_LOADED,function(e){r(e)}))}function o(){var t=e.querySelector(".more-button"),n=parseInt(NATION.Utils.getStyle(t,"marginTop"),10);n+=t.clientHeight,n+=parseInt(NATION.Utils.getStyle(t,"marginBottom"),10),e.querySelector(".listing").style.marginBottom=n+"px",document.querySelector(".gallery-content").style.paddingBottom="10px"}function r(){var t=e.querySelector(".infinite-scroll-loading-display p");t.className+=" complete"}var s=null;t()},NATION.Utils.createNamespace("BISDT.modules.GallerySearch"),BISDT.modules.GallerySearch.Controller=function(e){"use strict";function t(){n(),i()}function n(){s=new BISDT.modules.GallerySearch.views.SearchFormView(e),s.resize()}function i(){window.addEventListener("resize",function(e){r(e)})}function o(){a&&(clearTimeout(a),a=null),s.resize()}function r(){a||(a=setTimeout(function(){o()},20))}var s=null,a=null;t()},NATION.Utils.createNamespace("BISDT.modules.Header"),BISDT.modules.Header.Controller=function(e){"use strict";function t(){n(),i()}function n(){c=new BISDT.modules.Header.views.SlidingMenuView(e)}function i(){window.addEventListener("resize",function(e){a(e)}),e.querySelector(".menu-button").addEventListener("click",function(e){r(e)}),e.querySelector(".overlay").addEventListener("click",function(e){s(e)})}function o(){l&&(clearTimeout(l),l=null),c.resize()}function r(e){c.toggle(),e.stopPropagation(),e.preventDefault()}function s(e){c.close(),e.stopPropagation(),e.preventDefault()}function a(){l||(l=setTimeout(function(){o()},20))}var l=null,c=null;t()},NATION.Utils.createNamespace("BISDT.modules.NewsletterForm"),BISDT.modules.NewsletterForm.Controller=function(e){"use strict";function t(){n(),i(),o()}function n(){var t=e.querySelector("form").getAttribute("action"),n=e.querySelector("form").getAttribute("method");l=new BISDT.modules.NewsletterForm.models.SubscriptionModel(t,n)}function i(){a=new BISDT.modules.NewsletterForm.views.FormView(e,l)}function o(){a.addListener(a.events.FORM_SUBMIT,function(){r()}),l.addListener(l.events.SUBSCRIBE_COMPLETE,function(){s()})}function r(){a.disableSubmissions(),l.subscribeUser()}function s(){a.showSuccessMessage()}var a=null,l=null;t()},NATION.Utils.createNamespace("BISDT.modules.PageManager"),BISDT.modules.PageManager.Controller=function(e){"use strict";function t(){i(),o(),r(),n()}function n(){window.addEventListener("wheel",function(e){c(e)}),window.addEventListener("mousewheel",function(e){c(e)}),BISDT.Mediator.subscribe(BISDT.Events.SCROLL_REQUEST,function(e){a(e)})}function i(){BISDT.Settings=BISDT.modules.PageManager.models.Settings,BISDT.Events=BISDT.modules.PageManager.models.Events,BISDT.Tracking=BISDT.modules.PageManager.models.Tracking,BISDT.History=new BISDT.modules.PageManager.models.History}function o(){BISDT.Settings.IS_MOBILE&&(e.className+=" mobile"),BISDT.Settings.IS_IE&&(e.className+=" ie")}function r(){for(var e=document.querySelectorAll("[data-has-background]"),t=0,n=e.length;n>t;t++)e[t].className+=" background"}function s(){NATION.Animation.stop(document.documentElement),u=!1}function a(t){if(t.selector){var n=e.querySelector(t.selector),i=NATION.Utils.getOffset(n).top;BISDT.Settings.smallLayoutVisible&&(i-=BISDT.Settings.headerHeight),u&&s(),u=!0,NATION.Animation.start(document.documentElement,{scrollTop:i},{duration:600,easing:"easeInOutQuad"},function(e){l(e)})}else console&&console.warn&&console.warn("Page Controller: Scroll request did not provide a selector")}function l(){u=!1}function c(){u&&s()}var u=!1;t()},NATION.Utils.createNamespace("BISDT.modules.Slideshow"),BISDT.modules.Slideshow.Controller=function(e){"use strict";function t(){i(),o(),r(),n()}function n(){window.addEventListener("resize",function(e){s(e)}),l.addListener(l.SLIDE_CHANGE,function(e){a(e)})}function i(){f=e.getAttribute("id")?e.getAttribute("id"):"",c=e.querySelectorAll(".slide"),u=e.querySelector(".navigation"),d=e.querySelector(".pips")}function o(){var t=e.querySelector(".slideshow"),n=e.querySelector(".pips")?!0:!1,i={slide:!0,autoPlay:!1,duration:400,easing:"easeInOutQuad",pips:n,touch:!0};l=new NATION.Slideshow(t,i)}function r(){h&&(clearTimeout(h),h=null);var e="none"!==NATION.Utils.getStyle(u,"display");if(e)p||(l.reposition(),l.enableTouch());else{for(var t=0,n=c.length;n>t;t++)c[t].removeAttribute("style");l.disableTouch()}p=e}function s(){h||(h=setTimeout(function(){r()},50))}function a(){var e=l.getCurrentSlideID().toString();BISDT.Tracking.trackEvent("history slide","view",e)}var l=null,c=null,u=null,d=null,h=null,p=!1,f="";t()},NATION.Utils.createNamespace("BISDT.modules.StoreList"),BISDT.modules.StoreList.Controller=function(e){"use strict";function t(){n()}function n(){for(var t=e.querySelectorAll(".basic-button"),n=0,o=t.length;o>n;n++)t[n].addEventListener("click",function(e){i(e)})}function i(e){var t=e.target.parentNode.querySelector("img").getAttribute("alt"),n=e.target.parentNode.querySelectorAll("span")[0].innerHTML;t+=", "+n,BISDT.Tracking.trackEvent("store list button","click",t)}t()},NATION.Utils.createNamespace("BISDT.modules.TopEntries"),BISDT.modules.TopEntries.Controller=function(e){"use strict";function t(){n()}function n(){e.querySelector(".more-button").addEventListener("click",function(e){i(e)}),e.querySelector(".view-gallery").addEventListener("click",function(e){o(e)})}function i(e){BISDT.Tracking.trackEvent("top entries button","click","find out more"),BISDT.Mediator.publish(BISDT.Events.SCROLL_REQUEST,{selector:".enter-guide"}),e.stopPropagation(),e.preventDefault()}function o(){BISDT.Tracking.trackEvent("top entries button","click","see the gallery")}t()},NATION.Utils.createNamespace("BISDT.modules.VerticalSections"),BISDT.modules.VerticalSections.Controller=function(e){"use strict";function t(){u=e.querySelectorAll(".section"),i(),n(),o()}function n(){var e=BISDT.History.getCurrentState();e.length&&c.setCurrentSection(e[0])}function i(){c=new BISDT.modules.VerticalSections.views.SectionsView(e)}function o(){BISDT.Mediator.subscribe(BISDT.Events.URL_CHANGED,function(e){l(e)}),c.addListener(BISDT.Events.SECTION_CHANGE,function(e){s(e)}),window.addEventListener("scroll",function(e){a(e)})}function r(){d&&(clearTimeout(d),d=null),h=NATION.Utils.getPageElement().scrollTop,c.updateCurrentSection(h,window.innerHeight)}function s(){if(!c.getAnimating()){var e={path:"/"+c.getCurrentSection(),state:{id:c.getCurrentSection()}};h=NATION.Utils.getPageElement().scrollTop,BISDT.Mediator.publish(BISDT.Events.CHANGE_URL,e)}}function a(){d||(d=setTimeout(function(){r()},20))}function l(e){e&&e.id!==c.getCurrentSection()&&c.scrollToSection(e.id)}var c=null,u=[],d=null,h=0;t()},NATION.Utils.createNamespace("BISDT.modules.Countdown.models"),BISDT.modules.Countdown.models.TimeModel=function(e){"use strict";function t(){a=parseInt(e,10)}function n(){r()}function i(){u&&(clearTimeout(u),u=null)}function o(){var e=c;0>c?d=h=p=f=0:(d=Math.floor(e/86400),e-=86400*d,h=Math.floor(e/3600),e-=3600*h,p=Math.floor(e/60),e-=60*p,f=Math.round(e))}function r(){l=Math.round(Date.now()/1e3),c=a-l,o(),m.trigger(s.TIME_UPDATE),a>l?(i(),u=setTimeout(function(){r()},1e3)):m.trigger(s.COMPLETE)}var s={TIME_UPDATE:"TimeUpdate",COMPLETE:"Complete"},a=0,l=0,c=0,u=null,d=0,h=0,p=0,f=0;t();var m=Object.create(NATION.EventDispatcher());return m.events=s,m.startTimer=n,m.stopTimer=i,m.getTimeRemaining=function(){return{days:d,hours:h,minutes:p,seconds:f}},m},NATION.Utils.createNamespace("BISDT.modules.Countdown.views"),BISDT.modules.Countdown.views.TimeRemainingView=function(e){"use strict";function t(){o=e.querySelector(".days .value"),r=e.querySelector(".hours .value"),s=e.querySelector(".minutes .value"),a=e.querySelector(".seconds .value")}function n(e){o.textContent=i(e.days),r.textContent=i(e.hours),s.textContent=i(e.minutes),a.textContent=i(e.seconds)}function i(e){return 10>e&&(e="0"+e.toString()),e}var o=null,r=null,s=null,a=null;return t(),{update:n}},NATION.Utils.createNamespace("BISDT.modules.EntrySlideshow.models"),BISDT.modules.EntrySlideshow.models.SlideshowModel=function(e,t,n){"use strict";function i(){o()}function o(){var e=r(A);if(e){M=e.split(",");for(var t=0,n=M.length;n>t;t++)M[t]=parseInt(M[t],10)}}function r(e){for(var t,n=e+"=",i=document.cookie.split(";"),o=null,r=0,s=i.length;s>r;r++){for(t=i[r];" "===t.charAt(0);)t=t.substring(1,t.length);0===t.indexOf(n)&&(o=t.substring(n.length,t.length))}return o}function s(t,n,i){I=!0;var o=e.replace("{lastid}",t.toString());o=o.replace("{count}",n);var r=i?"previous":"next";o=o.replace("{direction}",r),"undefined"!=typeof window.console&&console.log("calling "+o),NATION.Utils.ajax({url:o,method:"get",responseType:"json",success:function(e){N(e,i)},error:function(e,t){throw new Error("SlideshowModel: "+t)}})}function a(){document.cookie=A+"="+M.join(",")}function l(e){if(M.indexOf(e)<=-1){M.push(e);var t=n.replace("{id}",e);NATION.Utils.ajax({url:t,method:"post",success:function(){L[e].votes=parseInt(L[e].votes,10)+1,1===L[e].votes&&(L[e].ranking="low"),a(),"undefined"!=typeof window.console&&console.log("Vote cast for post "+e)},error:function(){"undefined"!=typeof window.console&&console.log("Error: Vote for post "+e+" was not successfully sent.")}})}}function c(){var e=w+Math.floor(O/2);C[e]||(e-=C.length);var t=C[e];return L[t]}function u(){var e=w-Math.floor(O/2);0>e&&(e=C.length-1+(e+1));var t=C[e];return L[t]}function d(e){var t=C[e];return L[t]}function h(){return C[w]}function p(){return w}function f(e){var t=C[w+1];return t?e===C[w+1]:!1}function m(e){var t=C[w-1];return t?e===C[w-1]:!1}function g(e){var t=C.indexOf(e);if(!t)return!1;for(var n=t-Math.round(O/2),i=O;i>n;n++)if(!C[n])return!1;return!0}function S(){if(w++,w>C.length-1&&(w=0),D=C[w],!C[w+Math.floor(O/2)]&&w<C.length-1&&!b){{w+Math.floor(O/2)-1}s(C[C.length-1],O,!1)}}function T(){if(w--,D=C[w],0>w&&(w=C.length-1),w<Math.floor(O/2)&&!b){{w-Math.floor(O/2)-1}s(C[0],O,!0)}}function v(e){for(var t=0,n=O,i=0;n>t;t++)i=e[t].entryID,L[e[t].entryID]=e[t],C.push(e[t].entryID),e[t].votingClosed&&M.push(e[t].entryID);w=Math.floor(O/2),D=C[w]}function E(e){O=e}function y(e){return M.indexOf(e)>-1}function N(e,n){for(var i,o=e.entries,r=0,s=o.length,a=0;s>r;r++)if(a=o[r].entryID,C.indexOf(a)<=-1&&(L[o[r].entryID]=o[r],n?C.unshift(a):C.push(a)),i=a,C.length===t){b=!0;break}for(r=0,s=C.length;s>r;r++)C[r]===D&&(w=r);I=!1}var A="voted",I=!1,O=0,L={},C=[],w=0,D=0,M=[],b=!1;return i(),{getLoading:function(){return I},getCurrentEntryID:h,getCurrentIndex:p,increaseCurrentEntryID:S,decreaseCurrentEntryID:T,setStartingData:v,setVisibleSlides:E,loadEntries:s,getSlideDataByIndex:d,getLaterSlideData:c,getEarlierSlideData:u,submitVote:l,hasBeenVoted:y,isNextSlide:f,isPreviousSlide:m,isSlideLoaded:g}},NATION.Utils.createNamespace("BISDT.modules.EntrySlideshow.views"),BISDT.modules.EntrySlideshow.views.SlideshowView=function(e,t){"use strict";function n(){U=t.getCurrentIndex(),x=e.querySelector("#entry-template").textContent,d(),a(),c(),u(),i(),o(),y(),r()}function i(){for(var t=e.querySelectorAll(".store-logo"),n=0,i=t.length;i>n;n++)t[n].removeEventListener("click",D),t[n].addEventListener("click",D)}function o(){for(var e=0,t=H.length;t>e;e++)H[e].querySelector(".vote-button a").removeEventListener("click",L),H[e].querySelector(".vote-button a").addEventListener("click",L)}function r(){H[Math.floor(P/2)].querySelector(".media img").addEventListener("load",function(e){s(e)})}function s(){E()}function a(){var e,n,i,o=0,r=H.length;for(P=r,B=[],z=H[0].querySelector(".vote-button a").getAttribute("data-success"),Q=H[0].querySelector(".vote-button a").getAttribute("data-closed");r>o;o++){H[o].removeAttribute("style"),H[o].style.display="none",e=NATION.Utils.getStyle(H[o],"left")+"%",n=NATION.Utils.getStyle(H[o],"top")+"px",B.push({left:e,top:n}),H[o].removeAttribute("style"),H[o].style.left=e,H[o].style.top=n,2===o?(H[o].style.position="relative",H[o].querySelector(".overlay").style.opacity=0,H[o].querySelector("figcaption").style.opacity=1,H[o].querySelector(".image-details").style.opacity=1):(H[o].style.position="absolute",H[o].querySelector(".overlay").style.opacity=1,H[o].querySelector("figcaption").style.opacity=0,H[o].querySelector(".image-details").style.opacity=0),i=parseInt(H[o].getAttribute("data-entry-id"),10);var s=H[o].querySelector(".vote-button a");t.hasBeenVoted(i)?(s.innerHTML=z,s.className+=" vote-cast"):"true"==H[o].getAttribute("data-voting-closed")&&(s.innerHTML=Q,s.className+=" vote-cast")}}function l(){V=e.querySelector(".list-button").clientHeight+"px"}function c(){for(var e,n=0,i=P,o=[];i>n;n++)e={},e.entryID=parseInt(H[n].getAttribute("data-entry-id"),10),e.imageURL=H[n].querySelector(".media img").getAttribute("src"),e.firstname=H[n].querySelector(".author").textContent,e.twitterURL=H[n].querySelector(".twitter").getAttribute("href"),e.facebookURL=H[n].querySelector(".facebook").getAttribute("href"),e.votes=parseInt(H[n].getAttribute("data-vote-count"),10),e.ranking=H[n].getAttribute("data-vote-ranking"),e.votingClosed="true"==H[n].getAttribute("data-voting-closed"),e.shopLogo=H[n].querySelector(".location img").getAttribute("src"),e.shopURL=H[n].querySelector(".location a").getAttribute("href"),e.shopName=H[n].querySelector(".location img").getAttribute("alt"),e.shopURL=H[n].querySelector(".location a").getAttribute("href"),o.push(e);t.setVisibleSlides(P),t.setStartingData(o)}function u(){Y=document.getElementById("dial-template").innerHTML;for(var e,n,i,o,r=0,s=H.length;s>r;r++)e=H[r].querySelector(".count"),i=t.getSlideDataByIndex(r).votes,o=t.getSlideDataByIndex(r).ranking,n=new BISDT.modules.EntrySlideshow.views.SpeedometerView(e,Y,i,o),G.push(n),r===Math.floor(P/2)&&G[r].play()
}function d(){H=e.querySelectorAll(".entry"),H=Array.prototype.slice.call(H)}function h(e){if(!q||e){var n=q&&e;m(!0,n),n||t.decreaseCurrentEntryID()}}function p(e){if(!q||e){var n=q&&e;m(!1,n),n||t.increaseCurrentEntryID()}}function f(e,t,n,i){var o=V,r=0;F?n?(r=0,H[e].style.left=t?"-100%":"100%",H[e].style.top=V):(e!==Math.floor(P/2)&&(t?H[e].style.left="100%":e<Math.floor(P/2)&&(H[e].style.left="-100%")),r=e<=Math.floor(P/2)&&!t?"-100%":"100%",o=e===Math.floor(P/2)?0:V):(o=t?B[e+1].top:B[e-1].top,r=t?B[e+1].left:B[e-1].left);var s,a,l=H[e].querySelector(".overlay"),c=H[e].querySelector("figcaption"),u=H[e].querySelector(".image-details"),d=0===parseInt(u.style.opacity,10),h=!1;n||d?n&&d&&(s=0,a=1,h=!0):(s=1,a=0,h=!0),h&&!F&&(i?(q&&(NATION.Animation.stop(l),NATION.Animation.stop(c),NATION.Animation.stop(u)),l.style.opacity=s,c.style.opacity=a,u.style.opacity=a):(NATION.Animation.start(l,{opacity:s},{easing:b,duration:R}),NATION.Animation.start(c,{opacity:a},{easing:b,duration:R}),NATION.Animation.start(u,{opacity:a},{easing:b,duration:R}))),i?(q&&NATION.Animation.stop(H[e]),H[e].style.left=r,H[e].style.top=o):NATION.Animation.start(H[e],{left:r,top:o},{easing:b,duration:R},function(){A()})}function m(e,n){q=!0,_=0,n&&O();for(var i,o=0,r=H.length;r>o;o++)0===o&&!e||o===r-1&&e?H[o].parentNode.removeChild(H[o]):(3===o&&!e||1===o&&e?(i=!0,G[o].reset(H[o].querySelector(".count"))):i=!1,f(o,e,i,n));k=e,n&&(k?t.decreaseCurrentEntryID():t.increaseCurrentEntryID(),O(),I(),G[Math.floor(P/2)].showVotes()),d()}function g(n){var r,s=0,a=0;F?(s=n?"-100%":"100%",a=V):n?(s=B[0].left,a=B[0].top):(s=B[B.length-1].left,a=B[B.length-1].top),r=n?t.getEarlierSlideData():t.getLaterSlideData();var l=x,c="";for(var u in r)c=new RegExp("{{"+u+"}}","g"),l=l.replace(c,r[u]);n?e.querySelector(".slides").innerHTML=l+e.querySelector(".slides").innerHTML:e.querySelector(".slides").innerHTML+=l,d();var h=n?H[0]:H[H.length-1];h.style.left=s,h.style.top=a,F?(h.querySelector(".overlay").style.opacity=0,h.querySelector("figcaption").style.opacity=1,h.querySelector(".image-details").style.opacity=1):(h.querySelector(".overlay").style.opacity=1,h.querySelector("figcaption").style.opacity=0,h.querySelector(".image-details").style.opacity=0);var p=h.querySelector(".vote-button a");t.hasBeenVoted(r.entryID)?(p.innerHTML=z,p.className+=" vote-cast"):"true"==h.getAttribute("data-voting-closed")&&(p.innerHTML=Q,p.className+=" vote-cast");var f=new BISDT.modules.EntrySlideshow.views.SpeedometerView(h.querySelector(".count"),Y,r.votes,r.ranking);n?(G.pop(),G.unshift(f)):(G.shift(),G.push(f)),o(),i()}function S(){for(var e=0,t=H.length;t>e;e++)NATION.Animation.stop(H[e]),H[e].removeAttribute("style")}function T(){S(),a(),F=!1}function v(){S();for(var e,t,n=0,i=H.length,o=B[n];i>n;n++)n===Math.floor(P/2)?(e=0,o=0,t="relative"):(e=n<Math.floor(P/2)?"-100%":"100%",o=V,t="absolute"),H[n].style.left=e,H[n].style.top=o,H[n].style.position=t,H[n].querySelector(".overlay").style.opacity=0,H[n].querySelector("figcaption").style.opacity=1,H[n].querySelector(".image-details").style.opacity=1;F=!0}function E(){var t,n=NATION.Utils.getStyle(e.querySelector(".navigation"),"display"),i=0,o=0,r=0,s=0,a=0,l=0,c=0;"none"!==n&&(o=parseInt(NATION.Utils.getStyle(e,"paddingTop"),10),r=H[Math.floor(P/2)].querySelector("figcaption").clientHeight,s=H[Math.floor(P/2)].querySelector(".media").clientHeight,t=e.querySelector(".navigation .previous .arrow").clientHeight,F&&(i=parseInt(NATION.Utils.getStyle(H[Math.floor(P/2)],"paddingTop"),10),c=parseInt(NATION.Utils.getStyle(e.querySelector(".slides"),"paddingTop"),10)),a=o+i+r+l+c+s/2-t/2,e.querySelector(".navigation .previous .arrow").style.top=a+"px",e.querySelector(".navigation .next .arrow").style.top=a+"px")}function y(){l();var t=e.querySelectorAll(".entry")[Math.floor(P/2)];t.style.display="none";var n="100"==NATION.Utils.getStyle(t,"width");if(t.style.display="block",!n&&!q){var i,o=H[Math.floor(P/2)];o.style.left&&(i=o.style.left),o.style.removeProperty("left"),o.style.display="none";var r=Math.floor(NATION.Utils.getStyle(o,"left")),s=Math.floor(parseInt(B[Math.floor(P/2)].left.replace(/%|px/g,"")));i&&(o.style.left=i),o.style.display="block",r!==s&&a()}!n&&F?T():n&&!F&&v(),E()}function N(){return W}function A(){_++,_===P-1&&(O(),G[Math.floor(P/2)].play())}function I(){for(var e=0,t=G.length;t>e;e++)G[e].reset(H[e].querySelector(".count"))}function O(){q=!1,g(k),I();for(var e=0,t=H.length;t>e;e++)e===Math.floor(P/2)?(H[e].style.position="relative",H[e].style.top=0):H[e].style.position="absolute"}function L(e){var n=H[Math.floor(P/2)].querySelector(".vote-button a"),i=G[Math.floor(P/2)];n.className.search("vote-cast")<=-1&&(n.innerHTML=z,n.className+=" vote-cast",i.incrementVoteCount(),W=t.getCurrentEntryID(),j.trigger(M.VOTE_CLICKED)),e.stopPropagation(),e.preventDefault()}function C(e){t.isNextSlide(e)?t.isSlideLoaded(e)?p(!0):w(e):t.isPreviousSlide(e)&&t.isSlideLoaded(e)?h(!0):w(e)}function w(e){window.console&&console.warn&&console.warn("EntrySlideshow trying to go to a slide that hasn't been loaded. SlideID = "+e)}function D(e){var t=e.target.parentNode.querySelector("img").getAttribute("alt")+" logo";BISDT.Tracking.trackEvent("entry slideshow","click",t)}var M={VOTE_CLICKED:"VoteClicked"},b="easeInOutQuad",R=600,P=0,H=[],B=[],q=!1,U=0,_=0,x="",k=!1,F=!1,V=0,W=0,z="",Q="",G=[],Y="";n();var j=Object.create(NATION.EventDispatcher());return j.events=M,j.showPrevious=h,j.showNext=p,j.resize=y,j.getClickedPostID=N,j.showSlide=C,j},NATION.Utils.createNamespace("BISDT.modules.EntrySlideshow.views"),BISDT.modules.EntrySlideshow.views.SpeedometerView=function(e,t,n,i){"use strict";function o(){r(),s(),v=T[0].querySelectorAll("span")[0].clientHeight,l(),a()}function r(){e.innerHTML+=t,e.setAttribute("data-whatever",n)}function s(){m=e.querySelector(".dial-arrow"),g=e.querySelector(".dial-progress"),S=e.querySelector(".dial-progress-cover"),T=e.querySelectorAll(".digit")}function a(){for(var e=0,t=T.length;t>e;e++)NATION.Animation.stop(T[e]),T[e].style.top=0}function l(){NATION.Animation.stop(m),NATION.Animation.stop(g),NATION.Animation.stop(S),NATION.Utils.setStyle(m,{transform:"rotate(-22deg)"}),NATION.Utils.setStyle(g,{transform:"rotate(-225deg)"}),NATION.Utils.setStyle(S,{transform:"rotate(-100deg)"})}function c(){n>0&&(h(),d())}function u(){if(n>0){NATION.Animation.stop(m),NATION.Animation.stop(g),NATION.Animation.stop(S),NATION.Utils.setStyle(m,{transform:"rotate("+f[i]+"deg)"});var e=f[i]-200;NATION.Utils.setStyle(g,{transform:"rotate("+e+"deg)"}),e=f[i]-130,e>0&&(e=0),NATION.Utils.setStyle(S,{transform:"rotate("+e+"deg)"}),d(!1,!0)}}function d(e,t){for(var i,o=n.toString(),r=o.length,s=r-1,a=T.length-1;s>=0;s--){if(i=-(v*parseInt(o[s],10)),t)T[a].style.top=i+"px";else{var l=e?1e3:2500;NATION.Animation.start(T[a],{top:i},{duration:l,easing:"easeInOutQuad"})}a--}}function h(){var e=f[i]+10;NATION.Animation.start(g,{transform:"rotate("+(e-200)+"deg)"},{duration:1500,easing:"easeInOutQuad"});var t=e-130;t>0&&(t=0),NATION.Animation.start(S,{transform:"rotate("+t+"deg)"},{duration:1500,easing:"easeInOutQuad"}),NATION.Animation.start(m,{transform:"rotate("+e+"deg)"},{duration:1500,easing:"easeInOutQuad"},function(){e=f[i]-10,NATION.Animation.start(g,{transform:"rotate("+(e-200)+"deg)"},{duration:1500,easing:"easeInOutQuad"}),NATION.Animation.start(m,{transform:"rotate("+e+"deg)"},{duration:1500,easing:"easeInOutQuad"},function(){e=f[i],NATION.Animation.start(g,{transform:"rotate("+(e-200)+"deg)"},{duration:2e3,easing:"easeInOutQuad"}),NATION.Animation.start(m,{transform:"rotate("+e+"deg)"},{duration:2e3,easing:"easeInOutQuad"})})})}function p(){n++,d(!0),1===n&&(i="low",h())}var f={none:-22,low:24,medium:113,high:180},m=null,g=null,S=null,T=[],v=0;return o(),{play:c,showVotes:u,incrementVoteCount:p,reset:function(t){e=t,s(),a(),l()}}},NATION.Utils.createNamespace("BISDT.modules.GallerySearch.views"),BISDT.modules.GallerySearch.views.SearchFormView=function(e){"use strict";function t(){n(),p=document.getElementById("search"),i(),h||(p.value=f),o()}function n(){var e=document.createElement("input");h=void 0!==e.placeholder}function i(){f=p.getAttribute("placeholder"),m=p.getAttribute("data-small-copy")}function o(){var t=NATION.Utils.isEventSupported("focusout")?"focusout":"blur",n=NATION.Utils.isEventSupported("focusin")?"focusin":"focus";h||p.addEventListener(t,function(e){c(e)}),p.addEventListener(n,function(e){u(e)}),e.querySelector("form").addEventListener("submit",function(e){d(e)})}function r(){p.className+=" error",p.value=p.getAttribute("data-error")}function s(){p.clientWidth<385&&g?a():p.clientWidth>=385&&!g&&l()}function a(){g=!1,h||(p.value=m),p.setAttribute("placeholder",m)}function l(){g=!0,h||(p.value=f),p.setAttribute("placeholder",f)}function c(){var e=p.value;""===e.replace(/ /g,"")&&(p.value=g?f:m)}function u(){if(p.className.search("error")>-1&&(p.className=p.className.replace(/error| error/g,""),p.value=""),!h){var e=p.value;(e===f||e===m)&&(p.value="")}S=!0}function d(e){p.blur();var t=p.value;(""===t.replace(/ /g,"")||t===f)&&(r(),e.stopPropagation(),e.preventDefault()),S=!1}var h=!0,p=null,f="",m="",g=!0,S=!1;return t(),{resize:s}},NATION.Utils.createNamespace("BISDT.modules.Header.views"),BISDT.modules.Header.views.SlidingMenuView=function(e){"use strict";function t(){n(),i(),s()}function n(){u=e.querySelector(".menu-button .label"),d=e.querySelector(".menu-button").getAttribute("data-close-copy"),h=u.innerHTML,f=e.querySelector(".main-menu"),m=e.querySelector(".overlay")}function i(){v=new NATION.VerticalScrollbar(e.querySelector(".scrollable-content"),e.querySelector(".scrollbar"),{enableMouseLock:!0})}function o(){p||(p=!0,u.textContent=d,c=!0,m.style.display="block",NATION.Animation.start(m,{opacity:1},{duration:400,easing:"easeInOutQuad"}),NATION.Animation.start(f,{left:0},{duration:400,easing:"easeInOutQuad"},function(e){a(e)}))}function r(e){e?(p&&(NATION.Animation.stop(m),NATION.Animation.stop(f)),u.textContent=h,c=!1,m.removeAttribute("style"),f.removeAttribute("style")):p||(p=!0,u.textContent=h,c=!1,NATION.Animation.start(m,{opacity:0},{duration:400,easing:"easeInOutQuad"}),NATION.Animation.start(f,{left:-g+"px"},{duration:400,easing:"easeInOutQuad"},function(e){l(e)}))}function s(){S="none"!==NATION.Utils.getStyle(e.querySelector(".menu-button"),"display"),S?(g=f.clientWidth,v.resize()):T&&(f.removeAttribute("style"),r(!0)),BISDT.Settings.headerHeight=e.querySelector(".logo").clientHeight,BISDT.Settings.smallLayoutVisible=T=S}function a(){p=!1}function l(){p=!1,m.style.display="none"}var c=!1,u=null,d="",h="",p=!1,f=null,m=null,g=0,S=!1,T=!1,v=null;return t(),{toggle:function(){c?r():o()},close:r,resize:s}},NATION.Utils.createNamespace("BISDT.modules.NewsletterForm.models"),BISDT.modules.NewsletterForm.models.SubscriptionModel=function(e,t){"use strict";function n(){}function i(e,t){return""===e.replace(/ /g,"")||e===t||e.search("@")<0?!1:!0}function o(e){a=e}function r(){console.log(a),NATION.Utils.ajax({url:e,method:t,data:a,success:function(){l.trigger(s.SUBSCRIBE_COMPLETE)},error:function(){"undefined"!=typeof window.console&&console.warn&&console.warn("Unable to subscribe user to competition")}})}var s={SUBSCRIBE_COMPLETE:"SubscribeComplete"},a="";n();var l=Object.create(NATION.EventDispatcher());return l.events=s,l.validateEmail=i,l.setFormData=o,l.subscribeUser=r,l},NATION.Utils.createNamespace("BISDT.modules.NewsletterForm.views"),BISDT.modules.NewsletterForm.views.FormView=function(e,t){"use strict";function n(){i(),r(),y||(o(),N.value=A),s()}function i(){var e=document.createElement("input");y=void 0!==e.placeholder}function o(){A=N.getAttribute("placeholder")}function r(){N=document.getElementById("email"),I=e.querySelectorAll("input[type='checkbox'][data-required]")}function s(){var t=NATION.Utils.isEventSupported("focusout")?"focusout":"blur",n=NATION.Utils.isEventSupported("focusin")?"focusin":"focus";y||N.addEventListener(t,function(e){g(e)}),N.addEventListener(n,function(e){S(e)}),e.querySelector("form").addEventListener("submit",function(e){v(e)});for(var i=0,o=I.length;o>i;i++)I[i].addEventListener("click",function(e){T(e)})}function a(){var e=N.value,n=t.validateEmail(e,A),i=!0;n||(N.className+=" error",i=!1);for(var o=0,r=I.length;r>o;o++)I[o].checked||(I[o].className+=" error",i=!1);return i}function l(){O=!0;var t=e.querySelector(".errors");t.style.display="block";var n=t.clientHeight;t.style.height=0,t.firstChild.style.opacity=0,NATION.Animation.start(t,{height:n},{easing:"easeInOutQuad",duration:200},function(){c()})}function c(){var t=e.querySelector(".errors");t.style.height="auto";var n=e.querySelector(".errors").firstChild;NATION.Animation.start(n,{opacity:1},{easing:"linear",duration:200})}function u(){O=!1;var t=e.querySelector(".errors").firstChild;NATION.Animation.start(t,{opacity:0},{easing:"linear",duration:200},function(){m()})}function d(){L=!0,e.querySelector("input[type='submit']").className+=" disabled"}function h(){for(var n,i,o=e.querySelectorAll("input"),r="",s=0,a=o.length;a>s;s++)n=o[s].name,n&&(i="checkbox"===o[s].type?o[s].checked:o[s].value,r+=n+"="+i+"&");r=r.substring(0,r.lastIndexOf("&")),t.setFormData(r)}function p(){NATION.Animation.start(e.querySelector("form"),{opacity:0},{easing:"linear",duration:300},function(){f()})}function f(){e.querySelector("form").style.display="none";var t=e.querySelector(".complete");t.style.display="block",t.style.opacity=0,NATION.Animation.start(t,{opacity:1},{easing:"linear",duration:300})}function m(){var t=e.querySelector(".errors");NATION.Animation.start(t,{height:0},{easing:"easeInOutQuad",duration:200})}function g(e){var t=N.value;""===t.replace(/ /g,"")&&(e.target.value=A)}function S(){if(N.className.search("error")>-1&&(N.className=N.className.replace(/error| error/g,"")),!y){var e=N.value;e===A&&(N.value="")}}function T(e){e.target.checked&&e.target.className.search("error")&&(e.target.className=e.target.className.replace(/error| error/g,""))}function v(e){if(!L){N.blur();var t=a();t?(O&&u(),h(),C.trigger(E.FORM_SUBMIT)):O||l()}e.stopPropagation(),e.preventDefault()}var E={FORM_SUBMIT:"FormSubmit"},y=!0,N=null,A="",I=[],O=!1,L=!1;n();var C=Object.create(NATION.EventDispatcher());return C.events=E,C.disableSubmissions=d,C.showSuccessMessage=p,C},NATION.Utils.createNamespace("BISDT.modules.PageManager.models"),BISDT.modules.PageManager.models.Events=function(){"use strict";return{SCROLL_REQUEST:"ScrollRequest",CHANGE_URL:"ChangeURL",URL_CHANGED:"URLChanged",SECTION_CHANGE:"SectionChange"}}(),NATION.Utils.createNamespace("BISDT.modules.PageManager.models"),BISDT.modules.PageManager.models.History=function(){"use strict";function e(){t(),i()}function t(){s=window.history.location||window.location,s.pathname.search("/static")>-1&&(a="/static",l=s.pathname.replace("/static","")),l=n(l),l=l.split("/")}function n(e){var t=e;return"/"===t.charAt(0)&&(t=t.substring(1)),"/"===t.slice(-1)&&(t=t.substring(0,t.length-1)),t}function i(){window.addEventListener("popstate",function(e){r(e)}),BISDT.Mediator.subscribe(BISDT.Events.CHANGE_URL,function(e){o(e)})}function o(e){var t=null;e.state&&(t=e.state),e.path=a+e.path,history.pushState(t,e.title,e.path)}function r(e){BISDT.Mediator.publish(BISDT.Events.URL_CHANGED,e.state)}var s="",a="",l="";return e(),{getCurrentState:function(){return l}}},NATION.Utils.createNamespace("BISDT.modules.PageManager.models"),BISDT.modules.PageManager.models.Settings=function(){"use strict";return{smallLayoutVisible:!1,IS_IE:/IEMobile/i.test(navigator.userAgent),IS_MOBILE:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}}(),NATION.Utils.createNamespace("BISDT.modules.PageManager.models"),BISDT.modules.PageManager.models.Tracking=function(){"use strict";function e(e,t,o,r){if("undefined"!=typeof ga)if(r)ga("send","event",e,t,o,r);else if(o)ga("send","event",e,t,o);else{if(!t)throw new Error("TrackingManager: Category and action are required to track an event.");ga("send","event",e,t)}else console&&console.warn&&console.warn("Attempted to track event category: "+e+", action: "+t+", label = "+o+", but GA was undefined. Attempting to retry after a delay."),i=setTimeout(function(){n()},1e3)}function t(e,t,o){"undefined"!=typeof ga?o?ga("send","event",e,t,o):ga("send","event",e,t):(console&&console.warn&&console.warn("Attempted to track event with fields category: "+e+", action: "+t+", but GA was undefined. Attempting to retry after a delay."),i=setTimeout(function(){n()},1e3))}function n(){clearTimeout(i),"undefined"!=typeof ga?(console&&console.warn&&console.warn("GA is now ready. Tracking last requested event."),a?t(o,r,a):e(o,r,s,s)):i=setTimeout(function(){n()},1e3)}var i=null,o="",r="",s="",a=[];return{trackEvent:e,trackEventWithFields:t}}(),NATION.Utils.createNamespace("BISDT.modules.VerticalSections.views"),BISDT.modules.VerticalSections.views.SectionsView=function(e){"use strict";function t(){l=e.querySelectorAll(".section")}function n(){return c}function i(e){s(e)}function o(){return u}function r(e){for(var t,n=0,i=l.length,o=e+window.innerHeight/2;i>n;n++)NATION.Utils.getOffset(l[n]).top<o&&(t=l[n].getAttribute("id"));t!==c&&(c=t,d.trigger(BISDT.Events.SECTION_CHANGE))}function s(e){if(e!==c){c=e,u=!0;var t=NATION.Utils.getOffset(document.getElementById(e)).top;NATION.Utils.getPageElement().scrollTop=t,NATION.Animation.start(NATION.Utils.getPageElement(),{scrollTop:t},{easing:"easeInOutQuad",duration:500},function(e){a(e)})}}function a(){u=!1}var l=[],c="",u=!1;t();var d=new NATION.EventDispatcher;return d.updateCurrentSection=r,d.getCurrentSection=n,d.scrollToSection=s,d.getAnimating=o,d.setCurrentSection=i,d},NATION.Utils.createNamespace("BISDT"),BISDT.Router=function(){"use strict";function e(){t()}function t(){var e=document.documentElement.querySelectorAll("[data-module]"),t="";if(e.length)for(var i=0,o=e.length;o>i;i++)t=e[i].getAttribute("data-module"),BISDT.modules[t]?(n[t]||(n[t]=[]),n[t].push(new BISDT.modules[t].Controller(e[i]))):window.console&&console.warn&&console.warn("Found a module request for '"+t+"', but no module with that name exists.")}var n={};e()}();